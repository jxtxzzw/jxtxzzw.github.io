(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1467:function(e,t,n){var content=n(1494);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(135).default)("60dd175a",content,!0,{sourceMap:!1})},1493:function(e,t,n){"use strict";n(1467)},1494:function(e,t,n){var o=n(134)(!1);o.push([e.i,"#app-container-balance{display:flex;flex-direction:column;width:100%;height:100%}#g2-container-balance{flex:auto}#g2-customize-tooltip-balance{margin-bottom:16px;font-size:12px}#g2-customize-tooltip-balance .tooltip-items{display:flex;flex-direction:row}#g2-customize-tooltip-balance .tooltip-item{flex-basis:240px;padding-left:8px;margin-right:12px}#g2-customize-tooltip-balance .tooltip-item .tooltip-item-value{font-size:16px;font-weight:700}#g2-customize-tooltip-balance .tooltip-item-info{display:flex;justify-content:space-between}#g2-customize-tooltip-balance .tooltip-item-info .info-item{display:flex}#g2-customize-tooltip-balance .tooltip-item-info .info-item .info-item-name{opacity:.65}#g2-customize-tooltip-balance .tooltip-item-info .info-item .info-item-value{margin-left:8px}",""]),e.exports=o},1520:function(e,t,n){"use strict";n.r(t);var o=n(198),r=(n(102),n(114),n(152),n(136),n(101),n(70),n(93),n(83),n(113),n(99),n(100),n(39)),c=n(1464);function l(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,r=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw r}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var h=["#A0DC2C","#FF6500","#0059FF"],f=["#FAE423","#653CFA","#2FFAA9","#FA7055","#2382FA","#987346"];function v(e,t,n){var o,r=[],c=[],d=l(e);try{for(d.s();!(o=d.n()).done;){var h=o.value,f=n(h);if(!h.pending||t){c[h.date]||(c[h.date]={}),r.includes(f)||r.push(f);var v=parseFloat(h.amount),m=parseFloat(h.currency_weight);c[h.date][f]||(c[h.date][f]={amount:0,weightedAmount:0}),c[h.date][f].amount+=v,c[h.date][f].weightedAmount+=v*m}}}catch(e){d.e(e)}finally{d.f()}var data=[];for(var y in c){var C,k=l(r);try{for(k.s();!(C=k.n()).done;){var A=C.value,a=A in c[y]?parseFloat(c[y][A].amount):0;a=parseFloat(a.toFixed(2));var x=A in c[y]?parseFloat(c[y][A].weightedAmount):0;x=parseFloat(x.toFixed(2)),data.push({date:y,scope:A,value:x,originalAmount:a})}}catch(e){k.e(e)}finally{k.f()}}return data}function m(e,t,n){return n.indexOf(e)===t}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"currency",t={fieldFn:void 0,color:void 0,getTooltipHTMLFn:void 0};function n(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(data){var title=data.title,n=data.items,o=0,r="".concat(n.map((function(n){var r=n.color,c=n.name,l=n.value,d=n.data.originalAmount;o+=parseFloat(l);var h="",f="";return e&&(h+=c,f+=d),t&&(e&&(h+=" ",f+=" "),h+="(Weighted ".concat(c,")"),f+="(".concat(l,")")),"\n        <div class='tooltip-item' style='border-left: 2px solid ".concat(r,"'>\n          <div class='tooltip-item-name' style='color: ").concat(r,"'>").concat(h,"</div>\n          <div class='tooltip-item-value' style='color: ").concat(r,"'>").concat(f,"</div>\n        </div>\n        ")})).join("")),c="#2B2B2B";return"\n    <div class='tooltip-title'>".concat(title,"</div>\n    <div class='tooltip-items'>\n      <div class='tooltip-item' style='border-left: 2px solid ").concat(c,"'>\n          <div class='tooltip-item-name' style='color: ").concat(c,"'>(Weighted Sum)</div>\n          <div class='tooltip-item-value' style='color: ").concat(c,"'>(").concat(o.toFixed(2),")</div>\n        </div>\n      ").concat(r,"\n    </div>\n  ")}}return"currency"===e?(t.color=h,t.fieldFn=function(e){return String(e.currency)},t.getTooltipHTMLFn=n(!0,!0)):"class"===e&&(t.color=f,t.fieldFn=function(e){return"".concat(e.primary_class,"-").concat(e.secondary_class)},t.getTooltipHTMLFn=n(!1,!0)),t}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"currency",d=document.getElementById("balance");d.innerHTML="\n<div id='app-container-balance'>\n  <div id='g2-customize-tooltip-balance'></div>\n  <div id='g2-container-balance'></div>\n</div>\n";var h=e.$g2.Chart,f=e.$dataset.DataView,C=new h({container:"g2-container-balance",autoFit:!0,height:Object(c.a)("g2-container-balance")}),k=y(o),data=v(t,n,k.fieldFn);C.data(data),C.scale("value",{nice:!0}),C.scale("date",{nice:!0,type:"time"}),C.tooltip({showCrosshairs:!0,shared:!0}),C.area().adjust("stack").position("date*value").color("scope",k.color),C.line().adjust("stack").position("date*value").color("scope",k.color),C.interaction("element-highlight"),C.axis("value",{label:{formatter:function(e){return parseFloat(e).toFixed(2)}}}),C.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}});var A,x=document.getElementById("g2-customize-tooltip-balance"),w=data[data.length-1].date,F=[],S=l(data);try{for(S.s();!(A=S.n()).done;){var _=A.value;F.includes(_)||F.push(_.scope)}}catch(e){S.e(e)}finally{S.f()}if(C.on("afterrender",(function(){var e=data.filter((function(e){return e.date===w})).map((function(e){return{color:k.color[F.indexOf(e.scope)%k.color.length],name:e.scope,value:e.value,data:{originalAmount:e.originalAmount}}}));x.innerHTML=k.getTooltipHTMLFn({title:w,items:e})})),C.on("tooltip:change",(function(e){x.innerHTML=k.getTooltipHTMLFn(e.data)})),e.showAnnotationCheck){var M,G="9999-12-31",O="0000-01-01",$=[],j=[],z=[1],D=0,I=-1,P=l(data);try{for(P.s();!(M=P.n()).done;){var T=M.value;if(T.date>O&&(O=T.date),T.date<G&&(G=T.date),$[T.date]?$[T.date]+=parseFloat(T.value):$[T.date]=parseFloat(T.value),j[T.date])j[T.date]+=parseFloat(T.value)*z[I];else{if(++I===z.length){var W=1.1*z[I-1];z.push(W)}j[T.date]=parseFloat(T.value)*z[I]}D+=parseFloat(T.value)}}catch(e){P.e(e)}finally{P.f()}var E=data.map((function(e){return e.date})).filter(m).length,B=D/E;C.annotation().line({top:!0,start:[G,B],end:[O,B],style:{stroke:"#c849ff",lineWidth:1,lineDash:[2,6]},text:{position:"end",style:{fill:"#c849ff",fontSize:12,fontWeight:300},content:"".concat(e.$t("income.average-line"),"\n").concat(B.toFixed(2)),offsetX:-20,offsetY:-5}}),D=0;var H,L,R,V=0,Y=0,U=0;for(var J in $){D+=$[J],V+=j[J],U+=z[Y];var X=D/(Y+=1),K=V/U;H||(H=J,L=X,R=K),C.annotation().line({top:!0,start:[H,L],end:[J,X],style:{stroke:"#c849ff",lineWidth:1,lineDash:[5,5]}}),C.annotation().line({top:!0,start:[H,R],end:[J,K],style:{stroke:"#01376e",lineWidth:1,lineDash:[8,5]}}),H=J,L=X,R=K}C.annotation().line({top:!0,start:[H,R],end:[H,R],style:{stroke:"",lineWidth:1,lineDash:[8,5]},text:{position:"end",style:{fill:"#01376e",fontSize:12,fontWeight:300},content:"".concat(e.$t("income.weighted-average-line"),"\n").concat(R.toFixed(2)),offsetX:-20,offsetY:-5}});var N=864e5,Q=[];for(var Z in $){var ee=(Date.parse(Z)-Date.parse(G))/N;Q.push({datum:ee,value:parseFloat($[Z])})}var te=(new f).source(Q);te.transform({type:"regression",method:"polynomial",fields:["datum","value"],bandwidth:30,as:["datum","value"]});var ne=te.rows.map((function(e){return{date:Object(r.dateFormat)(new Date(Date.parse(Object(r.dateFormat)(new Date(G)))+e.datum*N)),value:e.value}}));for(var oe in ne){var re=ne[oe],ae=0===parseInt(oe)?re:ne[oe-1];C.annotation().line({top:!0,start:[re.date,re.value],end:[ae.date,ae.value],style:{stroke:"#ffbd49",lineWidth:1,lineDash:[5,3]}})}C.annotation().text({content:"".concat(e.$t("income.prediction-line"),"\n").concat(ne[ne.length-1].value),top:!0,position:[ne[ne.length-1].date,ne[ne.length-1].value],style:{fill:"#ffbd49",fontSize:12,fontWeight:300},offsetY:-5})}return C.render(),C}var k=n(398),A=n(41);function x(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,r=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw r}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function F(e,t,n){var o=Object(A.a)(n,3),r=o[0],l=o[1],d=o[2];if(0===(t=t.filter((function(e){return r.includes(e.source)&&l.includes(e.model)}))).length)return null;var h,f=new(0,e.$g2.Chart)({container:"credit-score",forceFit:!0,autoFit:!0,height:Object(c.a)()}),v=x(t);try{for(v.s();!(h=v.n()).done;){var m=h.value;m.name="".concat(m.source," + ").concat(m.model)}}catch(e){v.e(e)}finally{v.f()}return f.data(t),f.tooltip({showCrosshairs:!0,shared:!0}),f.scale("date",{type:"time"}),f.scale("score",{nice:!0}),f.axis("score",{label:{formatter:function(e){return parseInt(e,10)}}}),f.line().position("date*score").color("name"),f.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}}),function(e,t,n){var o,r=1e3,c=0,l=!1,d="9999-12-31",h="0000-01-01",f=x(e);try{for(f.s();!(o=f.n()).done;){var v=o.value;v.date>h&&(h=v.date),v.date<d&&(d=v.date)}}catch(e){f.e(e)}finally{f.f()}for(var m={"芝麻信用":{boarder:[350,950],score:[350,550,600,650,700],text:["较差","中等","良好","优秀","极好"],color:"#1574F7"},"微信支付分":{boarder:[350,950],score:[350,550,600,650,700],text:["较差","中等","良好","优秀","极好"],color:"#1AAD19"},"VantageScore 3.0":{boarder:[300,850],score:[300,500,601,661,781],text:["Very Poor","Poor","Fair","Good","Excellent"],color:"#F15F22"},"FICO Score 8":{boarder:[300,850],score:[300,580,670,740,800],text:["Poor","Fair","Good","Very Good","Exceptional"],color:"#b520ff"}},y=0,C=["芝麻信用","微信支付分","VantageScore 3.0","FICO Score 8"];y<C.length;y++){var k=C[y];if(t.includes(k)){r=Math.min(r,m[k].boarder[0]),c=Math.max(c,m[k].boarder[1]),l=!0;for(var i=0;i<m[k].score.length;i++)n.annotation().line({top:!0,start:[d,m[k].score[i]],end:[h,m[k].score[i]],style:{stroke:m[k].color,lineWidth:1,lineDash:[3,3]},text:{position:"start",style:{fill:m[k].color,fontSize:12,fontWeight:300},content:"".concat(m[k].text[i]," -").concat(k),offsetY:-5}})}}for(var A={"FICO BankCard Score 8":{boarder:[250,900]},"FICO Auto Score 8":{boarder:[350,950]}},w=0,F=["FICO BankCard Score 8","FICO Auto Score 8"];w<F.length;w++){var S=F[w];t.includes(S)&&(r=Math.min(r,A[S].boarder[0]),c=Math.max(c,A[S].boarder[1]),l=!0)}l&&(n.scale("score",{min:r,max:c}),n.legend(!0),n.removeInteraction("legend-filter"))}(t,d,f),f.render(),f}function S(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,r=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw r}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var M={name:"Balance",data:function(){return{oldChart:{balance:void 0,creditScore:void 0},chartScope:"currency",uniqueSource:[],uniqueModel:[],checkAllGroupSource:[],checkAllGroupModel:[],checkAllGroupRange:[],forceCheckedModel:[],showPendingCheck:!1,showAnnotationCheck:!1,disablePending:!1,previousPendingCheckCache:!1}},watch:{"$i18n.locale":function(){this.renderAllCharts()},chartScope:function(e){"currency"===e?(this.showPendingCheck=this.previousPendingCheckCache,this.disablePending=!1):"class"===e&&(this.previousPendingCheckCache=this.showPendingCheck,this.showPendingCheck=!0,this.disablePending=!0),this.renderCharts(["balance"])},showPendingCheck:function(){this.renderCharts(["balance"])},showAnnotationCheck:function(){this.renderCharts(["balance"])}},mounted:function(){this.prepareData(),this.renderAllCharts()},methods:{prepareData:function(){this.uniqueSource=k.credit.map((function(e){return e.source})).filter((function(e,t,n){return n.indexOf(e)===t})),this.uniqueModel=k.credit.map((function(e){return e.model})).filter((function(e,t,n){return n.indexOf(e)===t})),this.checkAllGroupSource=Object(o.a)(this.uniqueSource),this.checkAllGroupModel=Object(o.a)(this.uniqueModel),this.checkAllGroupRange=[]},renderCredit:function(){this.renderCharts(["credit"])},renderAllCharts:function(){this.renderCharts(["balance","credit"])},renderCharts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["balance","credit"];if(e.includes("balance")&&(this.oldChart.balance&&this.oldChart.balance.destroy(),this.oldChart.balance=C(this,k.balance,this.showPendingCheck,this.chartScope)),e.includes("credit")){this.oldChart.creditScore&&this.oldChart.creditScore.destroy(),this.forceCheckedModel=this.checkAllGroupRange;var t,n=S(this.forceCheckedModel);try{for(n.s();!(t=n.n()).done;){var o=t.value;this.checkAllGroupModel.includes(o)||this.checkAllGroupModel.push(o)}}catch(e){n.e(e)}finally{n.f()}this.oldChart.creditScore=F(this,k.credit,[this.checkAllGroupSource,this.checkAllGroupModel,this.checkAllGroupRange])}window.dispatchEvent(new Event("resize"))}}},G=M,O=(n(1493),n(133)),component=Object(O.a)(G,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Divider",[e._v(e._s(e.$t("balance.balance")))]),e._v(" "),n("Alert",[e._v("\n    "+e._s(e.$t("balance.scope_by_class"))+"\n    "),n("i-switch",{attrs:{size:"large","true-value":"currency","false-value":"class"},model:{value:e.chartScope,callback:function(t){e.chartScope=t},expression:"chartScope"}},[n("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("income.open")))]),e._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("income.close")))])]),e._v("\n    "+e._s(e.$t("balance.scope_by_currency"))+"\n    "),n("br"),e._v(" "),n("Checkbox",{attrs:{disabled:e.disablePending},model:{value:e.showPendingCheck,callback:function(t){e.showPendingCheck=t},expression:"showPendingCheck"}},[e._v("\n      "+e._s(e.$t("balance.show-pending"))+"\n    ")]),e._v(" "),n("Checkbox",{model:{value:e.showAnnotationCheck,callback:function(t){e.showAnnotationCheck=t},expression:"showAnnotationCheck"}},[e._v("\n      "+e._s(e.$t("balance.show-annotation"))+"\n    ")])],1),e._v(" "),n("div",{attrs:{id:"balance"}}),e._v(" "),n("Divider",[e._v(" "+e._s(e.$t("credit.credit")))]),e._v(" "),n("Alert",[n("p",[e._v(e._s(e.$t("credit.source")))]),e._v(" "),n("CheckboxGroup",{on:{"on-change":e.renderCredit},model:{value:e.checkAllGroupSource,callback:function(t){e.checkAllGroupSource=t},expression:"checkAllGroupSource"}},e._l(e.uniqueSource,(function(s){return n("Checkbox",{key:s,attrs:{label:s}})})),1),e._v(" "),n("Divider",{staticClass:"ivu-m-0",attrs:{size:"small"}}),e._v(" "),n("p",[e._v(e._s(e.$t("credit.model")))]),e._v(" "),n("CheckboxGroup",{on:{"on-change":e.renderCredit},model:{value:e.checkAllGroupModel,callback:function(t){e.checkAllGroupModel=t},expression:"checkAllGroupModel"}},e._l(e.uniqueModel,(function(t){return n("Checkbox",{key:t,attrs:{label:t,disabled:e.forceCheckedModel.includes(t)}})})),1),e._v(" "),n("Divider",{staticClass:"ivu-m-0",attrs:{size:"small"}}),e._v(" "),n("p",[e._v(e._s(e.$t("credit.range")))]),e._v(" "),n("CheckboxGroup",{on:{"on-change":e.renderCredit},model:{value:e.checkAllGroupRange,callback:function(t){e.checkAllGroupRange=t},expression:"checkAllGroupRange"}},e._l(e.uniqueModel,(function(e){return n("Checkbox",{key:e,attrs:{label:e}})})),1)],1),e._v(" "),n("div",{attrs:{id:"credit-score"}})],1)}),[],!1,null,null,null);t.default=component.exports}}]);