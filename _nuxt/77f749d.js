(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1465:function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return f}));n(114),n(102),n(93);var o={china:void 0,world:void 0},r={china:void 0,world:void 0};function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=2,n=2,o=10,r=1.5,c=e;return void 0!==t&&(c=t/r),Math.max(Math.min(c,o),n)}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n="#080298",o=1,r=c(e);t.size(r).shape("dot").color(n).style({opacity:o})}function d(map,source,t,e){var data,d,l=e.$l7,m=l.Scene,v=l.Popup,w=e.$l7maps,$=w.GaodeMap,y=w.Mapbox,z=n(398).setting,H=n(37).showDate,W={center:"china"===map?[108.5525,34.3227]:[-35.353535,35.353535],pitch:0,zoom:"china"===map?2.5:1,maxZoom:18,token:"china"===map?z.token.gaode:z.token.mapbox},x=new m({id:"".concat(map,"Footprint"),logoVisible:!1,preserveDrawingBuffer:!1,map:"china"===map?new $(W):new y(W)});x.on("loaded",(function(){window.dispatchEvent(new Event("resize")),e.screenHeight=e.$store.getters["size/getHeight"],e.screenWidth=e.$store.getters["size/getWidth"],e.screenWidth-=1,e.screenHeight-=1,x.on("zoomchange",(function(){h(o[map],c(x.getZoom())),x.render()}))})),data="china"===map?source.filter((function(t){return"china"===t.map})):source,d="china"===map?t.filter((function(t){return"china"===t.from_map&&"china"===t.to_map})):t;var _=function(data,t){var e=new(0,t.$l7.PointLayer)({name:"pointlayer"}).source(data,{parser:{type:"json",x:"lng",y:"lat"}});return o[t.map]=e,h(e),e.active(!0).select(!0).on("click",(function(e){e.feature.cluster?t.$Message.info(t.$t("footprint.cluster_click")):t.$emit("pictures",e.feature.id,e.feature.pictures)})),e}(data,e);_.on("mousemove",(function(t){var n="<span>";if(t.feature.cluster)n=e.$t("footprint.cluster",{count:t.feature.point_count});else{var o=t.feature,r=o.date,c=o.name;r&&(n+=e.$t("footprint.date",{date:H(t.feature)})),n+=e.$t("footprint.name",{name:c}),n+="</span>"}var h=new v({offsets:[0,0],closeButton:!1}).setLnglat(t.lngLat).setHTML(n);x.addPopup(h)}));var L=function(data,t){var e=new(0,t.$l7.LineLayer)({name:"arclayer",blend:"additive"}).source(data,{parser:{type:"json",x:"from_lng",y:"from_lat",x1:"to_lng",y1:"to_lat"}});return e.size(1).shape("arc").color("#8C1EB2").style({opacity:.8,blur:.99}).animate(!0),e}(d,e);return r[map]=L,x.addLayer(_),x.addLayer(L),f(!0),x}function f(t){for(var map in r)r[map]&&(t?r[map].show():r[map].hide())}},1470:function(t,e,n){"use strict";n.r(e);n(114);var o=n(1465),r=n(398),c={name:"WorldFootprint",data:function(){return{map:"world",flights:r.flights,source:r.footprint,screenHeight:0,screenWidth:0}},computed:{getId:function(){return this.map+"Footprint"},contentHeight:function(){return this.screenHeight-160-106-80},contentWidth:function(){return this.screenWidth-200-96}},watch:{"$store.state.size.height":function(){this.screenHeight=this.$store.getters["size/getHeight"]},"$store.state.size.width":function(){this.screenWidth=this.$store.getters["size/getWidth"]}},mounted:function(){this.screenHeight=this.$store.getters["size/getHeight"],this.screenWidth=this.$store.getters["size/getWidth"];var t=o.a(this.map,this.source,this.flights,this);this.$emit("scene",t)}},h=n(133),component=Object(h.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{style:{width:t.contentWidth+"px",height:t.contentHeight+"px",justifyContent:"center",position:"absolute",zIndex:1},attrs:{id:t.getId}})])}),[],!1,null,null,null);e.default=component.exports}}]);