(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{1539:function(e,t,r){"use strict";r.r(t);r(137),r(121),r(110),r(71),r(98),r(92),r(120),r(111),r(112);var o=r(41);function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,d=!0,h=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return d=e.done,e},e:function(e){h=!0,n=e},f:function(){try{d||null==r.return||r.return()}finally{if(h)throw n}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var d=["#EE915D","#2BCBCB"],h=["#FB6563"],c=["#9412EA"];function v(e){return["高血压 (Hypertension Stage 2)"].includes(e)?"#FC712D":["正常高值 (Hypertension Stage 1)","可能出现心房颤动 (Possible Atrial Fibrillation)"].includes(e)?"#FDBC39":["正常 (Normal)"].includes(e)?"#A8E342":[].includes(e)?"#4BB2F9":"#E0E3EA"}function f(e){var t=.75*(document.body.clientHeight-64-24-24-24-24-24);if(null==e||""===e)return Math.max(t,480);var r=.75*document.getElementById(e).parentElement.offsetWidth;return Math.max(480,Math.min(t,r))}function y(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=Object(o.a)(e,1),d=l[0],h={},c=n(d);try{for(c.s();!(t=c.n()).done;){var v=t.value,f=parseFloat(v.weight);!isNaN(f)&&f>0&&(h[v.date]=f)}}catch(e){c.e(e)}finally{c.f()}var y,w={},m=n(d);try{for(m.s();!(y=m.n()).done;){var P=y.value,b=parseFloat(P.bodyFat);!isNaN(b)&&b>0&&(w[P.date]=b)}}catch(e){m.e(e)}finally{m.f()}var data=[];for(var x in h)data.push({date:x,category:"体重",value:parseFloat(h[x])});if(r)for(var _ in w)data.push({date:_,category:"体脂率",value:parseFloat(w[_])});return data}function w(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"container",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=e.$g2.Chart,l=new n({container:r,autoFit:!0,height:f(r)}),data=y(t,o);return l.data(data),l.scale("value",{nice:!0}),l.scale("date",{nice:!0,type:"time"}),l.axis("date",{tickLine:null}),l.tooltip({showMarkers:!0,showTitle:!0,showCrosshairs:!0,shared:!0}),l.line().position("date*value").color("category",d).shape("smooth"),l.point().position("date*value").color("category",d).shape("circle").style({stroke:"#fff",lineWidth:1}),l.interaction("element-highlight-by-color"),l.interaction("legend-highlight"),l.interaction("axis-label-highlight"),l.render(),l}function m(e){var t,r=[],l={},d={},h={},c=n(Object(o.a)(e,1)[0]);try{for(c.s();!(t=c.n()).done;){var v=t.value;r.includes(v.date)||r.push(v.date);var s=parseFloat(v.sys);!isNaN(s)&&s>0&&(l[v.date]=s);var f=parseFloat(v.dia);!isNaN(f)&&f>0&&(d[v.date]=f);var p=parseFloat(v.pulse);!isNaN(p)&&p>0&&(h[v.date]=p)}}catch(e){c.e(e)}finally{c.f()}for(var data=[],y=0,w=r;y<w.length;y++){var dd=w[y],m={date:dd};dd in l&&(m.sys=l[dd]),dd in d&&(m.dia=d[dd]),dd in h&&(m.pulse=h[dd]),data.push(m)}return data}function P(e,t){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"container",l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],d=e.$g2.Chart,v=e.$dataset.DataView,y=new d({container:o,autoFit:!0,height:f(o)}),data=m(t),w=9999,P=0,x="9999-12-31",_="1000-01-01",C=n(data);try{for(C.s();!(r=C.n()).done;){var A=r.value;A.date<x&&(x=A.date),A.date>_&&(_=A.date),!isNaN(A.sys)&&A.sys>0&&(P=Math.max(P,A.sys),w=Math.min(w,A.sys)),!isNaN(A.dia)&&A.dia>0&&(P=Math.max(P,A.dia),w=Math.min(w,A.dia)),l&&!isNaN(A.pulse)&&A.pulse>0&&(P=Math.max(P,A.pulse),w=Math.min(w,A.pulse))}}catch(e){C.e(e)}finally{C.f()}var k=(new v).source(data);k.transform({type:"map",callback:function(e){return e.range=[e.dia,e.sys],e}}),y.data(k.rows),y.scale("range",{nice:!0,max:P,min:w}),y.scale("date",{nice:!0,type:"time"}),y.tooltip({shared:!0,showTitle:!0,showMarkers:!0,itemTpl:'<li class="g2-tooltip-list-item" data-index={index} style="margin-bottom:4px;"><span style="padding-left: 16px">SYS：{sys}</span><br/><span style="padding-left: 16px">DIA：{dia}</span><br/>'+(l?'<span style="padding-left: 16px">PULSE：{pulse}</span><br/>':"")+"</li>"}),y.legend(!1),y.schema().position("date*range").shape("box").tooltip("date*dia*sys*pulse",(function(e,t,r,o){return{name:e,dia:t>0?t:"",sys:r>0?r:"",pulse:l&&o>0?o:""}})).style({stroke:c[0],fill:c[0],fillOpacity:.3});var B=120,F=80;return y.annotation().line({top:!0,start:[x,B],end:[_,B],style:{stroke:"#FB8E3B",lineWidth:2,lineDash:[2,6]}}),y.annotation().line({top:!0,start:[x,F],end:[_,F],style:{stroke:"#FB8E3B",lineWidth:2,lineDash:[2,5]}}),l&&(y.scale("pulse",{nice:!0,max:P,min:w}),y.point().position("date*pulse").color("pulse",h).shape("circle").style({stroke:"#fff",lineWidth:1})),y.interaction("active-region"),y.render(),y}function x(e){var t,r={},l=[],d=0,h={},c=[],v=0,f=n(Object(o.a)(e,1)[0]);try{for(f.s();!(t=f.n()).done;){var y=t.value;void 0!==y.bloodPressureCatelog&&null!==y.bloodPressureCatelog&&""!==y.bloodPressureCatelog&&(l.includes(y.bloodPressureCatelog)||(l.push(y.bloodPressureCatelog),r[y.bloodPressureCatelog]=0),r[y.bloodPressureCatelog]+=1,d+=1,void 0!==y.ekg&&null!==y.ekg&&""!==y.ekg&&(c.includes(y.ekg)||(c.push(y.ekg),h[y.ekg]=0),h[y.ekg]+=1,v+=1))}}catch(e){f.e(e)}finally{f.f()}for(var w=[],m=[],P=0,x=l;P<x.length;P++){var _=x[P];w.push({name:_,count:r[_],percent:parseFloat(r[_]/d*100).toFixed(2)+"%"})}for(var C=0,A=c;C<A.length;C++){var k=A[C];m.push({name:k,count:h[k],percent:parseFloat(h[k]/v*100).toFixed(2)+"%"})}return[w,m]}function _(e){var t,r=[],l={},d=n(Object(o.a)(e,1)[0]);try{for(d.s();!(t=d.n()).done;){var h=t.value;r.includes(h.date)||(r.push(h.date),l[h.date]={}),void 0!==h.bloodPressureCatelog&&null!==h.bloodPressureCatelog&&""!==h.bloodPressureCatelog&&(l[h.date].bloodPressureCatelog=h.bloodPressureCatelog),void 0!==h.ekg&&null!==h.ekg&&""!==h.ekg&&(l[h.date].ekg=h.ekg)}}catch(e){d.e(e)}finally{d.f()}r.sort();for(var c={},v=[],f={},y=[],w=[],m=[],P=0,x=r;P<x.length;P++){var _=x[P];if(l[_].bloodPressureCatelog){c[l[_].bloodPressureCatelog]||(c[l[_].bloodPressureCatelog]=0),v.includes(l[_].bloodPressureCatelog)||v.push(l[_].bloodPressureCatelog),c[l[_].bloodPressureCatelog]+=1;var C,A=n(v);try{for(A.s();!(C=A.n()).done;){var k=C.value,B={date:_,type:k,value:c[k]};w.push(B)}}catch(e){A.e(e)}finally{A.f()}}if(l[_].ekg){f[l[_].ekg]||(f[l[_].ekg]=0),y.includes(l[_].ekg)||y.push(l[_].ekg),f[l[_].ekg]+=1;var F,$=n(y);try{for($.s();!(F=$.n()).done;){var H=F.value,M={date:_,type:H,value:f[H]};m.push(M)}}catch(e){$.e(e)}finally{$.f()}}}return[w,m]}function C(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"container",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=e.$g2.Chart,d=e.$dataset.DataSet,h=_(t),c=Object(o.a)(h,2),y=c[0],w=c[1],m=new l({container:r,autoFit:!0,height:f(r)});if(n){var P={start:{x:0,y:0},end:{x:.5,y:1}},x={start:{x:.5,y:0},end:{x:1,y:1}},C=[0,10,40,60],A=m.createView({region:P,padding:C}),k=new d,B=k.createView().source(y).transform({type:"percent",field:"value",dimension:"type",groupBy:["date"],as:"percent"});A.data(B.rows);var F=m.createView({region:x,padding:C}),$=new d,H=$.createView().source(w).transform({type:"percent",field:"value",dimension:"type",groupBy:["date"],as:"percent"});F.data(H.rows),A.scale({percent:{min:0,formatter:function(e){return(100*e).toFixed(2)+"%"}}}),A.tooltip({shared:!0,showMarkers:!0}),m.legend(!1),A.interval().position("date*percent").color("type",(function(e){return v(e)})).adjust("stack"),F.scale({percent:{min:0,formatter:function(e){return(100*e).toFixed(2)+"%"}}}),F.tooltip({shared:!0,showMarkers:!0}),m.legend(!1),F.interval().position("date*percent").color("type",(function(e){return v(e)})).adjust("stack")}else{var M=new d,N=M.createView().source(y).transform({type:"percent",field:"value",dimension:"type",groupBy:["date"],as:"percent"});m.data(N.rows),m.scale({percent:{min:0,formatter:function(e){return(100*e).toFixed(2)+"%"}}}),m.tooltip({shared:!0,showMarkers:!0}),m.legend(!0),m.interval().position("date*percent").color("type",(function(e){return v(e)})).adjust("stack")}return m.render(),m}function A(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"container",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=e.$g2.Chart,d=x(t),h=Object(o.a)(d,2),c=h[0],y=h[1],w=new l({container:r,autoFit:!0,height:f(r)});if(n){var m={start:{x:0,y:0},end:{x:.5,y:1}},P={start:{x:.5,y:0},end:{x:1,y:1}},_=[0,10,40,60],C=w.createView({region:m,padding:_});C.data(c);var A=w.createView({region:P,padding:_});A.data(y),C.coordinate("theta",{radius:.75}),C.tooltip({showTitle:!0,showMarkers:!0}),C.legend(!1),w.legend(!1),C.interval().position("count").color("name",(function(e){return v(e)})).adjust("stack").label("percent",{offset:"-30%",style:{textAlign:"center",fontSize:16,shadowBlur:2,shadowColor:"rgba(0, 0, 0, .45)"}}),A.coordinate("theta",{radius:.75}),A.tooltip({showTitle:!0,showMarkers:!0}),A.legend(!1),w.legend(!1),A.interval().position("count").color("name",(function(e){return v(e)})).adjust("stack").label("percent",{offset:"-30%",style:{textAlign:"center",fontSize:16,shadowBlur:2,shadowColor:"rgba(0, 0, 0, .45)"}})}else w.data(c),w.coordinate("theta",{radius:.75}),w.tooltip({showTitle:!0,showMarkers:!0}),w.legend(!0),w.interval().position("count").color("name",(function(e){return v(e)})).adjust("stack").label("percent",{offset:"-30%",style:{textAlign:"center",fontSize:16,shadowBlur:2,shadowColor:"rgba(0, 0, 0, .45)"}}),w.interaction("element-active");return w.render(),w}var k=r(399),B={name:"Health",data:function(){return{screenHeight:0,screenWidth:0,MIN_WIDTH:640,MIN_HEIGHT:480,showBodyFat:!0,showPulse:!0,oldChart:{healthWeightAndFat:void 0,healthBloodPressureAndPulse:void 0,healthBloodPressureAndPulseAggregated:void 0,healthBloodPressureAndPulseAggregatedPie:void 0}}},watch:{"$i18n.locale":function(){this.renderAllCharts()},showBodyFat:function(){this.renderAllCharts(["health-weight-and-fat"])},showPulse:function(){this.renderAllCharts(["health-blood-pressure-and-pulse","health-blood-pressure-and-pulse-aggregated","health-blood-pressure-and-pulse-aggregated-pie"])},"$store.state.size.height":function(){this.screenHeight=this.$store.getters["size/getHeight"]},"$store.state.size.width":function(){this.screenWidth=this.$store.getters["size/getWidth"]}},mounted:function(){"jxtxzzw"===this.$route.query.admin&&(this.screenHeight=this.$store.getters["size/getHeight"],this.screenWidth=this.$store.getters["size/getWidth"],this.renderAllCharts())},methods:{renderAllCharts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["health-weight-and-fat","health-blood-pressure-and-pulse","health-blood-pressure-and-pulse-aggregated","health-blood-pressure-and-pulse-aggregated-pie"];e.includes("health-weight-and-fat")&&(this.oldChart.healthWeightAndFat&&this.oldChart.healthWeightAndFat.destroy(),this.oldChart.healthWeightAndFat=w(this,[k.healthWeight],"health-weight-and-fat",this.showBodyFat)),e.includes("health-blood-pressure-and-pulse")&&(this.oldChart.healthBloodPressureAndPulse&&this.oldChart.healthBloodPressureAndPulse.destroy(),this.oldChart.healthBloodPressureAndPulse=P(this,[k.healthBloodPressure],"health-blood-pressure-and-pulse",this.showPulse)),e.includes("health-blood-pressure-and-pulse-aggregated")&&(this.oldChart.healthBloodPressureAndPulseAggregated&&this.oldChart.healthBloodPressureAndPulseAggregated.destroy(),this.oldChart.healthBloodPressureAndPulseAggregated=C(this,[k.healthBloodPressure],"health-blood-pressure-and-pulse-aggregated",this.showPulse)),e.includes("health-blood-pressure-and-pulse-aggregated-pie")&&(this.oldChart.healthBloodPressureAndPulseAggregatedPie&&this.oldChart.healthBloodPressureAndPulseAggregatedPie.destroy(),this.oldChart.healthBloodPressureAndPulseAggregatedPie=A(this,[k.healthBloodPressure],"health-blood-pressure-and-pulse-aggregated-pie",this.showPulse)),window.dispatchEvent(new Event("resize"))}}},F=B,$=r(134),component=Object($.a)(F,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",["jxtxzzw"===e.$route.query.admin?r("div",[r("Divider",[e._v(e._s(e.$t("health.weight")))]),e._v(" "),r("Alert",{attrs:{type:"info"}},[e._v("\n      "+e._s(e.$t("health.hide-body-fat"))+"\n      "),r("i-switch",{attrs:{size:"large","true-value":!0,"false-value":!1},model:{value:e.showBodyFat,callback:function(t){e.showBodyFat=t},expression:"showBodyFat"}},[r("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("health.show")))]),e._v(" "),r("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("health.hide")))])]),e._v("\n      "+e._s(e.$t("health.show-body-fat"))+"\n      "),r("br")],1),e._v(" "),r("Row",[r("div",{style:{width:"100%",minHeight:e.MIN_HEIGHT+"px",minWidth:e.MIN_WIDTH+"px",paddingTop:"10px"},attrs:{span:24}},[r("div",{attrs:{id:"health-weight-and-fat"}})])]),e._v(" "),r("Divider",[e._v(e._s(e.$t("health.blood-pressure")))]),e._v(" "),r("Alert",{attrs:{type:"info"}},[r("div",[e._v("\n        "+e._s(e.$t("health.hide-pulse"))+"\n        "),r("i-switch",{attrs:{size:"large","true-value":!0,"false-value":!1},model:{value:e.showPulse,callback:function(t){e.showPulse=t},expression:"showPulse"}},[r("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("health.show")))]),e._v(" "),r("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("health.hide")))])]),e._v("\n        "+e._s(e.$t("health.show-pulse"))+"\n      ")],1)]),e._v(" "),r("Row",[r("div",{style:{width:"100%",minHeight:e.MIN_HEIGHT+"px",minWidth:e.MIN_WIDTH+"px",paddingTop:"10px"},attrs:{span:24}},[r("div",{attrs:{id:"health-blood-pressure-and-pulse"}})])]),e._v(" "),r("Row",[r("div",{style:{width:"100%",minHeight:e.MIN_HEIGHT+"px",minWidth:e.MIN_WIDTH+"px",paddingTop:"10px"},attrs:{span:24}},[r("div",{attrs:{id:"health-blood-pressure-and-pulse-aggregated"}})])]),e._v(" "),r("br"),e._v(" "),r("Row",[r("div",{style:{width:"100%",minHeight:e.MIN_HEIGHT+"px",minWidth:e.MIN_WIDTH+"px",paddingTop:"10px"},attrs:{span:24}},[r("div",{attrs:{id:"health-blood-pressure-and-pulse-aggregated-pie"}})])]),e._v(" "),r("Divider",[e._v(e._s(e.$t("health.blood-sugar")))]),e._v(" "),r("Alert",{attrs:{type:"info"}},[r("div",[e._v("\n        "+e._s(e.$t("health.no-data"))+"\n      ")])])],1):r("div",[r("Alert",{attrs:{type:"error","show-icon":""}},[e._v("\n      "+e._s(e.$t("error.error"))+"\n      "),r("template",{slot:"desc"},[e._v("\n        "+e._s(e.$t("error.permission"))+"\n      ")])],2)],1)])}),[],!1,null,null,null);t.default=component.exports}}]);