(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1466:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"g",(function(){return v})),n.d(t,"e",(function(){return y})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return w})),n.d(t,"d",(function(){return A})),n.d(t,"f",(function(){return k}));var r=n(40),o=(n(136),n(98),n(110),n(99),n(113),n(70),n(92),n(120),n(111),n(112),n(55));function c(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,d=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){d=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function d(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={},o=c(e);try{for(o.s();!(t=o.n()).done;){var l=t.value,d=l.year,f=parseFloat(l.amount),v=l.type;d in r||(r[d]={}),v in r[d]||(r[d][v]=n?{}:0);var h=parseFloat(l.currency_weight);if(n){var y=l.currency;y in r[d][v]||(r[d][v][y]={amount:0,weightedAmount:0}),r[d][v][y].amount+=f,r[d][v][y].weightedAmount+=f*h}else r[d][v]+=f*h}}catch(e){o.e(e)}finally{o.f()}var data=[];for(var m in r)for(var w in r[m])if(n)for(var F in r[m][w])data.push({year:m,type:w,currency:F,amount:r[m][w][F].amount,weightedAmount:r[m][w][F].weightedAmount});else data.push({year:m,type:w,amount:r[m][w]});return data}function f(){return.75*(document.body.clientHeight-64-24-24-24-24-24)}function v(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"container",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["#74CBED","#FF6B3B","#247FEA","#F6C022","#AE0025","#7666F9","#9967BD","#E19348","#FF9EC6","#76523B","#585853","#6395F9","#62DAAB"],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=e.$g2.Chart,data=d(t,c),v=new l({container:r,autoFit:!0,height:f()});return v.data(data),v.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}}),v.scale(c?"weightedAmount":"amount",{alias:"金额",nice:!0,formatter:function(e){return e=parseFloat(parseFloat(e).toFixed(2))}}),v.axis(c?"weightedAmount":"amount",{title:{offset:80,style:{fill:"#aaaaaa"}}}),v.scale("year",{nice:!0}),v.axis("year",{tickLine:null}),v.tooltip({shared:!1,showMarkers:!0,showTitle:!0}),v.interaction("active-region"),v.interaction("element-highlight-by-color"),v.interaction("legend-highlight"),v.interaction("axis-label-highlight"),n=c?[{type:"dodge",dodgeBy:"currency",marginRatio:0},{type:"stack"}]:"stack",v.interval().adjust(n).position("year*".concat(c?"weightedAmount":"amount")).color("type",o).label("value",(function(){return{position:"middle",offset:0,content:function(e){var t=parseFloat(parseFloat(e.amount).toFixed(2));if(c){var n=parseFloat(parseFloat(e.weightedAmount).toFixed(2));return"".concat(e.currency," ").concat(t," \n (").concat(n,")")}return"(".concat(t,")")},style:{stroke:"#fff"}}})),v.render(),v}function h(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={},l=0,d=c(e);try{for(d.s();!(n=d.n()).done;){var f=n.value,v=f.category,h=parseFloat(f.amount);if(v in o||(o[v]=r?{}:0),!(h<=0)){var y=parseFloat(f.currency_weight);if(r){var m=f.currency;m in o[v]||(o[v][m]={amount:0,weightedAmount:0}),o[v][m].amount+=h,o[v][m].weightedAmount+=h*y}else o[v]+=h*y,l+=h*y}}}catch(e){d.e(e)}finally{d.f()}var w,F=c(t);try{for(F.s();!(w=F.n()).done;){var x=w.value,A="被动收入",k=parseFloat(x.amount);if(A in o||(o[A]=r?{}:0),!(k<=0)){var C=parseFloat(x.currency_weight);if(r){var D=x.currency;D in o[A]||(o[A][D]={amount:0,weightedAmount:0}),o[A][D].amount+=k,o[A][D].weightedAmount+=k*C}else o[A]+=k*C,l+=k*C}}}catch(e){F.e(e)}finally{F.f()}if(r){var j=[],B=[],S=[];for(var T in o)for(var M in o[T]){j.includes(M)||j.push(M);var E=o[T][M].amount,V=o[T][M].weightedAmount;E>0&&B.push({category:T,amount:E,weightedAmount:V,currency:"".concat(T," - ").concat(M)})}for(var W=0,$=j;W<$.length;W++){var I=$[W];for(var _ in o)if(o[_][I]){var O=o[_][I].amount,U=o[_][I].weightedAmount;O>0&&S.push({category:"".concat(I," - ").concat(_),amount:O,weightedAmount:U,currency:I})}}return[B,S]}var data=[];for(var Y in o){var z=o[Y];z>0&&data.push({category:Y,amount:z,percent:z/l})}return data}function y(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=e.$g2.Chart,l=e.$dataset.DataView,d=new c({container:"basic-category",autoFit:!0,height:f()});if(o){var v=["#e57575","#96ef78","#ba75e8","#7af1e0","#ccec68","#768dea","#e573de","#626114","#b0adad","#f1c265","#20a0ff","#7e6767"],y=h(t,n,o),m=Object(r.a)(y,2),w=m[0],F=m[1],x=d.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},padding:[0,10,40,60]}),A=new l;A.source(w).transform({type:"percent",field:"weightedAmount",dimension:"category",as:"percent"}),x.data(A.rows),x.interval().adjust("stack").position("percent").color("category").label("percent",(function(e){return{offset:e>.02?-30:30,content:function(data){return"".concat(data.category,": ").concat(parseFloat(100*data.percent).toFixed(2),"%")}}})),x.scale({percent:{formatter:function(e){return e=parseFloat(100*e).toFixed(2)+"%"}}}),x.coordinate("theta",{radius:.5}),x.tooltip({showTitle:!0,showMarkers:!0}),x.interaction("element-active");var k=d.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},padding:[0,10,40,60]}),C=new l;C.source(w).transform({type:"percent",field:"weightedAmount",dimension:"currency",as:"percent"}),k.data(C.rows),k.scale({percent:{formatter:function(e){return e=parseFloat(100*e).toFixed(2)+"%"}}}),k.coordinate("theta",{innerRadius:.5/.75,radius:.75}),k.interval().adjust("stack").position("percent").color("currency",v).label("currency").tooltip("currency*percent",(function(e,t){return{name:e,value:t=(100*t).toFixed(2)+"%"}})).style({lineWidth:1,stroke:"#fff"});var D=d.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},padding:[0,10,40,60]}),j=new l;j.source(F).transform({type:"percent",field:"weightedAmount",dimension:"currency",as:"percent"}),D.data(j.rows),D.interval().adjust("stack").position("percent").color("currency").label("percent",(function(e){return{offset:e>.02?-30:30,content:function(data){return"".concat(data.currency,": ").concat(parseFloat(100*data.percent).toFixed(2),"%")}}})),D.scale({percent:{formatter:function(e){return e=parseFloat(100*e).toFixed(2)+"%"}}}),D.coordinate("theta",{radius:.5}),D.tooltip({showTitle:!0,showMarkers:!0}),D.interaction("element-active");var B=d.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},padding:[0,10,40,60]}),S=new l;S.source(F).transform({type:"percent",field:"weightedAmount",dimension:"category",as:"percent"}),B.data(S.rows),B.scale({percent:{formatter:function(e){return e=parseFloat(100*e).toFixed(2)+"%"}}}),B.coordinate("theta",{innerRadius:.5/.75,radius:.75}),B.interval().adjust("stack").position("percent").color("category",v).label("category").tooltip("category*percent",(function(e,t){return{name:e,value:t=(100*t).toFixed(2)+"%"}})).style({lineWidth:1,stroke:"#fff"})}else{var data=h(t,n,o),T=new l;T.source(data).transform({type:"percent",field:"amount",dimension:"category",as:"percent"}),d.data(T.rows),d.interval().adjust("stack").position("percent").color("category").label("percent",(function(e){return{offset:e>.02?-30:30,content:function(data){return"".concat(data.category,": ").concat(parseFloat(100*data.percent).toFixed(2),"%")}}})),d.scale({percent:{formatter:function(e){return e=parseFloat(100*e).toFixed(2)+"%"}}}),d.coordinate("theta",{radius:.5}),d.legend(!1),d.tooltip({showTitle:!0,showMarkers:!0}),d.interaction("element-active")}return d.legend(!1),d.render(),d}function m(e,t){var n=new(0,e.$g2.Chart)({container:"all-accumulated",autoFit:!0,height:f()}),data=function(e){var t,n=[],r={},o=9999,l=0,d=c(e);try{for(d.s();!(t=d.n()).done;){var f,v=c(t.value);try{for(v.s();!(f=v.n()).done;){var h=f.value,y=parseInt(h.year),m=parseFloat(h.amount);y<o&&(o=y),y>l&&(l=y),y in r||(r[y]={});var w=parseFloat(h.currency_weight),F=h.currency;n.includes(F)||n.push(F),r[y][F]||(r[y][F]={amount:0,weightedAmount:0}),r[y][F].amount+=m,r[y][F].weightedAmount+=m*w}}catch(e){v.e(e)}finally{v.f()}}}catch(e){d.e(e)}finally{d.f()}for(var x={},A=0,k=n;A<k.length;A++)x[k[A]]=0;for(var data=[],i=o;i<=l;i++)if(i in r){var C,D=c(n);try{for(D.s();!(C=D.n()).done;){var j=C.value,B=j in r[i]?parseFloat(r[i][j].amount):0;B=parseFloat(parseFloat(B).toFixed(2)),data.push({year:i,currency:j,value:B}),x[j]+=j in r[i]?parseFloat(r[i][j].amount):0,B=parseFloat(parseFloat(x[j]).toFixed(2)),data.push({year:i,currency:"".concat(j,"_(ACCUMULATED)"),value:B})}}catch(e){D.e(e)}finally{D.f()}}return data}(t);return n.data(data),n.tooltip({showCrosshairs:!0,shared:!0}),n.scale("value",{nice:!0}),n.scale("date",{nice:!0}),n.axis("value",{label:{formatter:function(e){return parseFloat(e).toFixed(2)}}}),n.line().position("year*value").color("currency").shape("smooth"),n.point().position("year*value").color("currency").shape("circle").style({stroke:"#fff",lineWidth:1}),n.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}}),n.render(),n}function w(e,t){var n=e.$g2.Chart,r=e.$dataset.DataView,o=function(e){var t,n={},r=c(e);try{for(r.s();!(t=r.n()).done;){var o=t.value,l=parseFloat(o.amount);if(!(l<0)){void 0!==o.currency_weight&&null!==o.currency_weight&&(l*=parseFloat(o.currency_weight));var d=o.type,f=o.platform;f in n||(n[f]={},n[f].value=0,n[f].children={}),n[f].value+=l,d in n[f].children||(n[f].children[d]=0),n[f].children[d]+=l}}}catch(e){r.e(e)}finally{r.f()}var data=[];for(var v in n){var h={name:v,brand:v,value:n[v].value,children:[]};for(var y in n[v].children)h.children.push({name:"".concat(v," - ").concat(y),value:n[v].children[y]});data.push(h)}return data.sort((function(a,b){return b.value-a.value})),data}(t);o.forEach((function(td){td.value=0}));var data={name:"root",children:o},l=new r;l.source(data,{type:"hierarchy"}).transform({field:"value",type:"hierarchy.treemap",tile:"treemapResquarify",as:["x","y"]});var d,v=[],h=c(l.getAllNodes());try{for(h.s();!(d=h.n()).done;){var y=d.value;if(!y.children){var m={name:y.data.name,x:y.x,y:y.y,depth:y.depth,value:y.value};!y.data.brand&&y.parent?m.brand=y.parent.data.brand:m.brand=y.data.brand,v.push(m)}}}catch(e){h.e(e)}finally{h.f()}var w=new n({container:"advanced-platform",autoFit:!0,height:f()});return w.coordinate().scale(1,-1),w.data(v),w.axis(!1),w.legend({position:"bottom"}),w.tooltip({showTitle:!1,showMarkers:!1}),w.polygon().position("x*y").color("brand").tooltip("name*value",(function(e,t){return{name:e,value:"(".concat(parseFloat(t).toFixed(2),")")}})).style({lineWidth:1,stroke:"#fff"}).label("name",{offset:0,style:{textBaseline:"middle",fill:"#000",shadowBlur:10,shadowColor:"#fff"},layout:{type:"limit-in-shape"}}),w.interaction("element-active"),w.render(),w}function F(e,t){var n,r=[],o=[],l=c(e);try{for(l.s();!(n=l.n()).done;){var d=n.value;if(!d.pending||t){o[d.date]||(o[d.date]={}),r.includes(d.currency)||r.push(d.currency);var f=parseFloat(d.amount),v=parseFloat(d.currency_weight);o[d.date][d.currency]||(o[d.date][d.currency]={amount:0,weightedAmount:0}),o[d.date][d.currency].amount+=f,o[d.date][d.currency].weightedAmount+=f*v}}}catch(e){l.e(e)}finally{l.f()}var data=[];for(var h in o){var y,m=c(r);try{for(m.s();!(y=m.n()).done;){var w=y.value,a=w in o[h]?parseFloat(o[h][w].amount):0;a=parseFloat(parseFloat(a).toFixed(2));var F=w in o[h]?parseFloat(o[h][w].weightedAmount):0;F=parseFloat(parseFloat(F).toFixed(2)),data.push({date:h,currency:w,value:F,originalAmount:a})}}catch(e){m.e(e)}finally{m.f()}}return data}function x(e,t,n){return n.indexOf(e)===t}function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=document.getElementById("balance");r.innerHTML="\n<div id='app-container-balance'>\n  <div id='g2-customize-tooltip-balance'></div>\n  <div id='g2-container-balance'></div>\n</div>\n";var l=e.$g2.Chart,d=new l({container:"g2-container-balance",autoFit:!0,height:f()}),data=F(t,n);d.data(data),d.scale("value",{nice:!0}),d.scale("date",{nice:!0,type:"time"}),d.tooltip({showCrosshairs:!0,shared:!0}),d.area().adjust("stack").position("date*value").color("currency"),d.line().adjust("stack").position("date*value").color("currency"),d.interaction("element-highlight"),d.axis("value",{label:{formatter:function(e){return parseFloat(e).toFixed(2)}}}),d.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}});var v=document.getElementById("g2-customize-tooltip-balance");function h(data){var title=data.title,e=data.items;return"\n    <div class='tooltip-title'>".concat(title,"</div>\n    <div class='tooltip-items'>\n      ").concat(e.map((function(e){var t=e.color,n=e.name,r=e.value,o=e.data.originalAmount;return"\n        <div class='tooltip-item' style='border-left: 2px solid ".concat(t,"'>\n          <div class='tooltip-item-name'>").concat(n," (Weighted ").concat(n,")</div>\n          <div class='tooltip-item-value'>").concat(o," (").concat(r,")</div>\n        </div>\n        ")})).join(""),"\n    </div>\n  ")}var y=data[data.length-1].date;d.on("afterrender",(function(){var e=data.filter((function(e){return e.date===y})).map((function(e){return{name:e.currency,value:e.value,data:{originalAmount:e.originalAmount}}}));v.innerHTML=h({title:y,items:e})})),d.on("tooltip:change",(function(e){v.innerHTML=h(e.data)}));var m,w="9999-12-31",A="0000-01-01",k=[],C=0,D=c(data);try{for(D.s();!(m=D.n()).done;){var j=m.value;j.date>A&&(A=j.date),j.date<w&&(w=j.date),k[j.date]?k[j.date]+=parseFloat(j.value):k[j.date]=parseFloat(j.value),C+=parseFloat(j.value)}}catch(e){D.e(e)}finally{D.f()}var B=data.map((function(e){return e.date})).filter(x).length,S=C/B;d.annotation().line({top:!0,start:[w,S],end:[A,S],style:{stroke:"#595959",lineWidth:1,lineDash:[3,3]},text:{position:"start",style:{fill:"#8c8c8c",fontSize:12,fontWeight:300},content:"均值线：(".concat(S,")"),offsetY:-5}});var T=e.$dataset.DataView,M=864e6,E=[];for(var V in k){var W=(Date.parse(V)-Date.parse(w))/M;E.push({datum:W,value:parseFloat(k[V])})}var $=(new T).source(E);$.transform({type:"regression",method:"polynomial",fields:["datum","value"],bandwidth:1,as:["datum","value"]}),$.rows=$.rows.map((function(e){return{date:Object(o.a)(new Date(Date.parse(Object(o.a)(new Date(w)))+e.datum*M)),value:e.value}}));var I=d.createView();return I.axis(!1),I.data($.rows),I.line().position("date*value").style({stroke:"#ffbd49",lineWidth:1,lineDash:[3,3]}).tooltip(!1),I.annotation().text({content:"预测线",top:!0,position:[$.rows[0].date,$.rows[0].value],style:{fill:"#ffbd49",fontSize:12,fontWeight:300},offsetY:-5}),d.render(),d}function k(e,t){var n=function(e){var t,n="应税收入",r=["USD","CNY"],o=[],l=c(e);try{for(l.s();!(t=l.n()).done;){var d=t.value;parseFloat(d.amount)<0&&!o.includes(d.category)&&o.push(d.category)}}catch(e){l.e(e)}finally{l.f()}var f,v=[n].concat(o),h={},y=c(v);try{for(y.s();!(f=y.n()).done;)h[f.value]={USD:0,CNY:0}}catch(e){y.e(e)}finally{y.f()}var m,w=c(e);try{for(w.s();!(m=w.n()).done;){var F=m.value,x=parseFloat(F.amount);if(x>0&&F.taxable){h[n][F.currency]+=x;var A,k=c(o);try{for(k.s();!(A=k.n()).done;)h[A.value][F.currency]+=x}catch(e){k.e(e)}finally{k.f()}}else if(o.includes(F.category))for(var i=o.indexOf(F.category);i<o.length;i++)h[o[i]][F.currency]+=x}}catch(e){w.e(e)}finally{w.f()}var C,data=[],D=c(v.reverse());try{for(D.s();!(C=D.n()).done;){var j,B=C.value,S=c(r);try{for(S.s();!(j=S.n()).done;){var T=j.value;data.push({type:B,currency:T,value:h[B][T]})}}catch(e){S.e(e)}finally{S.f()}}}catch(e){D.e(e)}finally{D.f()}return[data,h[n].USD,h[n].CNY]}(t),o=Object(r.a)(n,3),data=o[0],base={USD:o[1],CNY:o[2]},l=new(0,e.$g2.Chart)({container:"tax-deduction",autoFit:!0,height:f(),padding:[30,120,95]});return l.data(data),l.axis(!1),l.tooltip({showMarkers:!1,showTitle:!1,itemTpl:'<li class="g2-tooltip-list-item" data-index={index} style="margin-bottom:4px;"><span style="background-color:{color};" class="g2-tooltip-marker"></span><span style="padding-left: 16px">{value} {name}</span></li>'}),l.facet("mirror",{fields:["currency"],transpose:!0,padding:0,eachView:function(view,e){view.interval().position("type*value").color("type",["#69C0FF","#40A9FF","#1890FF","#0050B3","#0C3967FF"]).shape("funnel").tooltip("currency*type*value",(function(e,t,n){return{name:e,value:t+": "+n}})).style({lineWidth:1,stroke:"#fff"}).animate({appear:{animation:"fade-in"},update:{annotation:"fade-in"}}),data.map((function(t){return t.currency===e.columnValue&&view.annotation().text({top:!0,position:[t.type,"min"],content:"".concat(t.type," ").concat(parseFloat(t.value).toFixed(2)," (").concat((100*parseFloat(t.value)/parseFloat(base[t.currency])).toFixed(2),"%)"),style:{fill:"#fff",stroke:null,fontSize:12,textAlign:e.columnIndex?"start":"end",shadowBlur:2,shadowColor:"rgba(0, 0, 0, .45)"},offsetX:e.columnIndex?10:-10}),null}))}}),l.interaction("element-active"),l.removeInteraction("legend-filter"),l.render(),l}}}]);