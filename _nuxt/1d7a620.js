(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1470:function(t,e,n){var content=n(1498);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(135).default)("60dd175a",content,!0,{sourceMap:!1})},1497:function(t,e,n){"use strict";n(1470)},1498:function(t,e,n){var o=n(134)(!1);o.push([t.i,"#app-container-balance{display:flex;flex-direction:column;width:100%;height:100%}#g2-container-balance{flex:auto}#g2-customize-tooltip-balance{margin-bottom:16px;font-size:12px}#g2-customize-tooltip-balance .tooltip-items{display:flex;flex-direction:row}#g2-customize-tooltip-balance .tooltip-item{flex-basis:240px;padding-left:8px;margin-right:12px}#g2-customize-tooltip-balance .tooltip-item .tooltip-item-value{font-size:16px;font-weight:700}#g2-customize-tooltip-balance .tooltip-item-info{display:flex;justify-content:space-between}#g2-customize-tooltip-balance .tooltip-item-info .info-item{display:flex}#g2-customize-tooltip-balance .tooltip-item-info .info-item .info-item-name{opacity:.65}#g2-customize-tooltip-balance .tooltip-item-info .info-item .info-item-value{margin-left:8px}#app-container-investment{display:flex;flex-direction:column;width:100%;height:100%}#g2-container-investment{flex:auto}#g2-customize-tooltip-investment{margin-bottom:16px;font-size:12px}#g2-customize-tooltip-investment .tooltip-items{display:flex;flex-direction:row}#g2-customize-tooltip-investment .tooltip-item{flex-basis:240px;padding-left:8px;margin-right:12px}#g2-customize-tooltip-investment .tooltip-item .tooltip-item-value{font-size:16px;font-weight:700}#g2-customize-tooltip-investment .tooltip-item-info{display:flex;justify-content:space-between}#g2-customize-tooltip-investment .tooltip-item-info .info-item{display:flex}#g2-customize-tooltip-investment .tooltip-item-info .info-item .info-item-name{opacity:.65}#g2-customize-tooltip-investment .tooltip-item-info .info-item .info-item-value{margin-left:8px}",""]),t.exports=o},1526:function(t,e,n){"use strict";n.r(e);n(152),n(136),n(114),n(93),n(102),n(101),n(70),n(83),n(113),n(99),n(100);var o=n(38),l=n(1467);function r(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,d=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){d=!0,l=t},f:function(){try{r||null==n.return||n.return()}finally{if(d)throw l}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var d=["#A0DC2C","#FF6500","#0059FF"],v=["#FAE423","#653CFA","#2FFAA9","#FA7055","#2382FA","#987346"];function h(t,e,n){var o,l=[],c=[],d=r(t);try{for(d.s();!(o=d.n()).done;){var v=o.value,h=n(v);if(!v.pending||e){c[v.date]||(c[v.date]={}),l.includes(h)||l.push(h);var f=parseFloat(v.amount),m=parseFloat(v.currency_weight);c[v.date][h]||(c[v.date][h]={amount:0,weightedAmount:0}),c[v.date][h].amount+=f,c[v.date][h].weightedAmount+=f*m}}}catch(t){d.e(t)}finally{d.f()}var data=[];for(var y in c){var _,w=r(l);try{for(w.s();!(_=w.n()).done;){var x=_.value,a=x in c[y]?parseFloat(c[y][x].amount):0;a=parseFloat(a.toFixed(2));var C=x in c[y]?parseFloat(c[y][x].weightedAmount):0;C=parseFloat(C.toFixed(2)),data.push({date:y,scope:x,value:C,originalAmount:a})}}catch(t){w.e(t)}finally{w.f()}}return data}function f(t,e,n){return n.indexOf(t)===e}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"currency",e={fieldFn:void 0,color:void 0,getTooltipHTMLFn:void 0};function n(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(data){var title=data.title,n=data.items,o=0,l="".concat(n.map((function(n){var l=n.color,r=n.name,c=n.value,d=n.data.originalAmount;o+=parseFloat(c);var v="",h="";return t&&(v+=r,h+=d),e&&(t&&(v+=" ",h+=" "),v+="(Weighted ".concat(r,")"),h+="(".concat(c,")")),"\n        <div class='tooltip-item' style='border-left: 2px solid ".concat(l,"'>\n          <div class='tooltip-item-name' style='color: ").concat(l,"'>").concat(v,"</div>\n          <div class='tooltip-item-value' style='color: ").concat(l,"'>").concat(h,"</div>\n        </div>\n        ")})).join("")),r="#2B2B2B";return"\n    <div class='tooltip-title'>".concat(title,"</div>\n    <div class='tooltip-items'>\n      <div class='tooltip-item' style='border-left: 2px solid ").concat(r,"'>\n          <div class='tooltip-item-name' style='color: ").concat(r,"'>(Weighted Sum)</div>\n          <div class='tooltip-item-value' style='color: ").concat(r,"'>(").concat(o.toFixed(2),")</div>\n        </div>\n      ").concat(l,"\n    </div>\n  ")}}return"currency"===t?(e.color=d,e.fieldFn=function(t){return String(t.currency)},e.getTooltipHTMLFn=n(!0,!0)):"class"===t&&(e.color=v,e.fieldFn=function(t){return"".concat(t.primary_class,"-").concat(t.secondary_class)},e.getTooltipHTMLFn=n(!1,!0)),e}function y(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"currency",d=document.getElementById("balance");d.innerHTML="\n<div id='app-container-balance'>\n  <div id='g2-customize-tooltip-balance'></div>\n  <div id='g2-container-balance'></div>\n</div>\n";var v=t.$g2.Chart,y=t.$dataset.DataView,_=new v({container:"g2-container-balance",autoFit:!0,height:Object(l.a)("g2-container-balance")}),w=m(c),data=h(e,n,w.fieldFn);_.data(data),_.scale("value",{nice:!0}),_.scale("date",{nice:!0,type:"time"}),_.tooltip({showCrosshairs:!0,shared:!0}),_.area().adjust("stack").position("date*value").color("scope",w.color),_.line().adjust("stack").position("date*value").color("scope",w.color),_.interaction("element-highlight"),_.axis("value",{label:{formatter:function(t){return parseFloat(t).toFixed(2)}}}),_.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}});var x,C=document.getElementById("g2-customize-tooltip-balance"),F=data[data.length-1].date,k=[],A=r(data);try{for(A.s();!(x=A.n()).done;){var $=x.value;k.includes($)||k.push($.scope)}}catch(t){A.e(t)}finally{A.f()}if(_.on("afterrender",(function(){var t=data.filter((function(t){return t.date===F})).map((function(t){return{color:w.color[k.indexOf(t.scope)%w.color.length],name:t.scope,value:t.value,data:{originalAmount:t.originalAmount}}}));C.innerHTML=w.getTooltipHTMLFn({title:F,items:t})})),_.on("tooltip:change",(function(t){C.innerHTML=w.getTooltipHTMLFn(t.data)})),t.showAnnotationCheck){var z,S="9999-12-31",D="0000-01-01",P=[],j=[],T=[1],E=0,M=-1,W=r(data);try{for(W.s();!(z=W.n()).done;){var H=z.value;if(H.date>D&&(D=H.date),H.date<S&&(S=H.date),P[H.date]?P[H.date]+=parseFloat(H.value):P[H.date]=parseFloat(H.value),j[H.date])j[H.date]+=parseFloat(H.value)*T[M];else{if(++M===T.length){var L=1.1*T[M-1];T.push(L)}j[H.date]=parseFloat(H.value)*T[M]}E+=parseFloat(H.value)}}catch(t){W.e(t)}finally{W.f()}var O=data.map((function(t){return t.date})).filter(f).length,B=E/O;_.annotation().line({top:!0,start:[S,B],end:[D,B],style:{stroke:"#c849ff",lineWidth:1,lineDash:[2,6]},text:{position:"end",style:{fill:"#c849ff",fontSize:12,fontWeight:300},content:"".concat(t.$t("income.average-line"),"\n").concat(B.toFixed(2)),offsetX:-20,offsetY:-5}}),E=0;var I,N,Y,J=0,X=0,U=0;for(var V in P){E+=P[V],J+=j[V],U+=T[X];var G=E/(X+=1),K=J/U;I||(I=V,N=G,Y=K),_.annotation().line({top:!0,start:[I,N],end:[V,G],style:{stroke:"#c849ff",lineWidth:1,lineDash:[5,5]}}),_.annotation().line({top:!0,start:[I,Y],end:[V,K],style:{stroke:"#01376e",lineWidth:1,lineDash:[8,5]}}),I=V,N=G,Y=K}_.annotation().line({top:!0,start:[I,Y],end:[I,Y],style:{stroke:"",lineWidth:1,lineDash:[8,5]},text:{position:"end",style:{fill:"#01376e",fontSize:12,fontWeight:300},content:"".concat(t.$t("income.weighted-average-line"),"\n").concat(Y.toFixed(2)),offsetX:-20,offsetY:-5}});var Q=864e5,R=[];for(var Z in P){var tt=(Date.parse(Z)-Date.parse(S))/Q;R.push({datum:tt,value:parseFloat(P[Z])})}var et=(new y).source(R);et.transform({type:"regression",method:"polynomial",fields:["datum","value"],bandwidth:30,as:["datum","value"]});var nt=et.rows.map((function(t){return{date:Object(o.dateFormat)(new Date(Date.parse(Object(o.dateFormat)(new Date(S)))+t.datum*Q)),value:t.value}}));for(var ot in nt){var it=nt[ot],at=0===parseInt(ot)?it:nt[ot-1];_.annotation().line({top:!0,start:[it.date,it.value],end:[at.date,at.value],style:{stroke:"#ffbd49",lineWidth:1,lineDash:[5,3]}})}_.annotation().text({content:"".concat(t.$t("income.prediction-line"),"\n").concat(nt[nt.length-1].value),top:!0,position:[nt[nt.length-1].date,nt[nt.length-1].value],style:{fill:"#ffbd49",fontSize:12,fontWeight:300},offsetY:-5})}return _.render(),_}function _(t){var e,n,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=t.sort((function(a,b){return new Date(a.date)-new Date(b.date)})),c=[],d=[],v={},h=r(l);try{for(h.s();!(n=h.n()).done;){var f=n.value,m=f.date,code=f.code;c.includes(code)||c.push(code),d.includes(m)||d.push(m),m in v||(v[m]={});var y,_=r(c);try{for(_.s();!(y=_.n()).done;){var w=y.value;w in v[m]||(v[m][w]={holdings:0,market_price:0,total_cost:0},e&&w in v[e]&&(v[m][w].holdings=v[e][w].holdings,v[m][w].total_cost=v[e][w].total_cost,v[m][w].market_price=v[e][w].market_price))}}catch(t){_.e(t)}finally{_.f()}var x=f.buyin_shares;o&&f.equity_awards&&(x=0),v[m][code].holdings+=x,v[m][code].market_price=f.market_price,v[m][code].total_cost+=x*f.buyin_price,e=m}}catch(t){h.e(t)}finally{h.f()}for(var C={},F=0,k=d;F<k.length;F++){var A=k[F];C[A]={value:0,cost:0};var $,z=r(c);try{for(z.s();!($=z.n()).done;){var S=$.value;S in v[A]&&(C[A].value+=v[A][S].holdings*v[A][S].market_price,C[A].cost+=v[A][S].total_cost)}}catch(t){z.e(t)}finally{z.f()}}var data=[];for(var D in C)data.push({date:D,value:C[D].value,net:C[D].value-C[D].cost});return data}function w(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=document.getElementById("investment");r.innerHTML="\n<div id='app-container-investment'>\n  <div id='g2-customize-tooltip-investment'></div>\n  <div id='g2-container-investment'></div>\n</div>\n";var c=t.$g2.Chart,d=new c({container:"g2-container-investment",autoFit:!0,height:Object(l.a)("g2-container-investment")}),data=_(e,o);d.data(data);var v=n?"net":"value";d.scale(v,{nice:!0}),d.scale("date",{nice:!0,type:"time"}),d.tooltip({showCrosshairs:!0,shared:!0});var h=n?"white":"#873BF4";return d.area().adjust("stack").position("date*".concat(v)).color(h),d.line().adjust("stack").position("date*".concat(v)).color(h),n&&(d.annotation().regionFilter({top:!0,start:["min","max"],end:["max",0],color:"#f5222d"}),d.annotation().regionFilter({top:!0,start:["min",0],end:["max","min"],color:"#2fc25b"})),d.interaction("element-highlight"),d.axis(v,{label:{formatter:function(t){return parseFloat(t).toFixed(2)}}}),d.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}}),d.render(),d}var x=n(398),C={name:"Balance",data:function(){return{oldChart:{balance:void 0,investment:void 0},investmentNet:!1,chartScope:"currency",showPendingCheck:!1,showAnnotationCheck:!1,disablePending:!1,previousPendingCheckCache:!1,ignoreEquityAwards:!1}},watch:{"$i18n.locale":function(){this.renderAllCharts()},chartScope:function(t){"currency"===t?(this.showPendingCheck=this.previousPendingCheckCache,this.disablePending=!1):"class"===t&&(this.previousPendingCheckCache=this.showPendingCheck,this.showPendingCheck=!0,this.disablePending=!0),this.renderCharts(["balance"])},showPendingCheck:function(){this.renderCharts(["balance"])},showAnnotationCheck:function(){this.renderCharts(["balance"])},investmentNet:function(){this.renderCharts(["investment"])},ignoreEquityAwards:function(){this.renderCharts(["investment"])}},mounted:function(){this.renderAllCharts()},methods:{renderAllCharts:function(){this.renderCharts(["balance","investment"])},renderCharts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["balance","investment"];t.includes("balance")&&(this.oldChart.balance&&this.oldChart.balance.destroy(),this.oldChart.balance=y(this,x.balance,this.showPendingCheck,this.chartScope)),t.includes("investment")&&(this.oldChart.investment&&this.oldChart.investment.destroy(),this.oldChart.investment=w(this,x.investment,this.investmentNet,this.ignoreEquityAwards)),window.dispatchEvent(new Event("resize"))}}},F=C,k=(n(1497),n(133)),component=Object(k.a)(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Divider",[t._v(t._s(t.$t("balance.balance")))]),t._v(" "),n("Alert",[t._v("\n    "+t._s(t.$t("income.show-original-amount"))+"\n    "),n("i-switch",{attrs:{value:!0,disabled:"",size:"large","true-value":!0,"false-value":!1}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("income.open")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("income.close")))])]),t._v("\n    "+t._s(t.$t("income.show-equivalent-cny"))+"\n    "),n("br"),t._v("\n    "+t._s(t.$t("balance.scope_by_class"))+"\n    "),n("i-switch",{attrs:{size:"large","true-value":"currency","false-value":"class"},model:{value:t.chartScope,callback:function(e){t.chartScope=e},expression:"chartScope"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("income.open")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("income.close")))])]),t._v("\n    "+t._s(t.$t("balance.scope_by_currency"))+"\n    "),n("br"),t._v(" "),n("Checkbox",{attrs:{disabled:t.disablePending},model:{value:t.showPendingCheck,callback:function(e){t.showPendingCheck=e},expression:"showPendingCheck"}},[t._v("\n      "+t._s(t.$t("balance.show-pending"))+"\n    ")]),t._v(" "),n("Checkbox",{model:{value:t.showAnnotationCheck,callback:function(e){t.showAnnotationCheck=e},expression:"showAnnotationCheck"}},[t._v("\n      "+t._s(t.$t("balance.show-annotation"))+"\n    ")])],1),t._v(" "),n("div",{attrs:{id:"balance"}}),t._v(" "),n("Divider",[t._v(t._s(t.$t("balance.investment")))]),t._v(" "),n("Alert",[t._v("\n    "+t._s(t.$t("income.show-original-amount"))+"\n    "),n("i-switch",{attrs:{value:!1,disabled:"",size:"large","true-value":!0,"false-value":!1}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("income.open")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("income.close")))])]),t._v("\n    "+t._s(t.$t("income.show-equivalent-cny"))+"\n    "),n("br"),t._v("\n    "+t._s(t.$t("balance.show-actual-investment"))+"\n    "),n("i-switch",{attrs:{size:"large"},model:{value:t.investmentNet,callback:function(e){t.investmentNet=e},expression:"investmentNet"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("income.open")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("income.close")))])]),t._v("\n    "+t._s(t.$t("balance.show-net-investment"))+"\n    "),n("br"),t._v("\n    "+t._s(t.$t("balance.show-all-transactions"))+"\n    "),n("i-switch",{attrs:{size:"large"},model:{value:t.ignoreEquityAwards,callback:function(e){t.ignoreEquityAwards=e},expression:"ignoreEquityAwards"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("income.open")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("income.close")))])]),t._v("\n    "+t._s(t.$t("balance.ignore-equity-awards"))+"\n  ")],1),t._v(" "),n("div",{attrs:{id:"investment"}})],1)}),[],!1,null,null,null);e.default=component.exports}}]);