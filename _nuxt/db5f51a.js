(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1469:function(t,e,n){var content=n(1497);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(135).default)("60dd175a",content,!0,{sourceMap:!1})},1496:function(t,e,n){"use strict";n(1469)},1497:function(t,e,n){var o=n(134)(!1);o.push([t.i,"#app-container-balance{display:flex;flex-direction:column;width:100%;height:100%}#g2-container-balance{flex:auto}#g2-customize-tooltip-balance{margin-bottom:16px;font-size:12px}#g2-customize-tooltip-balance .tooltip-items{display:flex;flex-direction:row}#g2-customize-tooltip-balance .tooltip-item{flex-basis:240px;padding-left:8px;margin-right:12px}#g2-customize-tooltip-balance .tooltip-item .tooltip-item-value{font-size:16px;font-weight:700}#g2-customize-tooltip-balance .tooltip-item-info{display:flex;justify-content:space-between}#g2-customize-tooltip-balance .tooltip-item-info .info-item{display:flex}#g2-customize-tooltip-balance .tooltip-item-info .info-item .info-item-name{opacity:.65}#g2-customize-tooltip-balance .tooltip-item-info .info-item .info-item-value{margin-left:8px}",""]),t.exports=o},1525:function(t,e,n){"use strict";n.r(e);n(152),n(136),n(114),n(93),n(102),n(101),n(70),n(83),n(113),n(99),n(100);var o=n(38),r=n(1466);function l(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,d=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){d=!0,r=t},f:function(){try{l||null==n.return||n.return()}finally{if(d)throw r}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var d=["#A0DC2C","#FF6500","#0059FF"],h=["#FAE423","#653CFA","#2FFAA9","#FA7055","#2382FA","#987346"];function f(t,e,n){var o,r=[],c=[],d=l(t);try{for(d.s();!(o=d.n()).done;){var h=o.value,f=n(h);if(!h.pending||e){c[h.date]||(c[h.date]={}),r.includes(f)||r.push(f);var v=parseFloat(h.amount),m=parseFloat(h.currency_weight);c[h.date][f]||(c[h.date][f]={amount:0,weightedAmount:0}),c[h.date][f].amount+=v,c[h.date][f].weightedAmount+=v*m}}}catch(t){d.e(t)}finally{d.f()}var data=[];for(var y in c){var w,C=l(r);try{for(C.s();!(w=C.n()).done;){var F=w.value,a=F in c[y]?parseFloat(c[y][F].amount):0;a=parseFloat(a.toFixed(2));var x=F in c[y]?parseFloat(c[y][F].weightedAmount):0;x=parseFloat(x.toFixed(2)),data.push({date:y,scope:F,value:x,originalAmount:a})}}catch(t){C.e(t)}finally{C.f()}}return data}function v(t,e,n){return n.indexOf(t)===e}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"currency",e={fieldFn:void 0,color:void 0,getTooltipHTMLFn:void 0};function n(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(data){var title=data.title,n=data.items,o=0,r="".concat(n.map((function(n){var r=n.color,l=n.name,c=n.value,d=n.data.originalAmount;o+=parseFloat(c);var h="",f="";return t&&(h+=l,f+=d),e&&(t&&(h+=" ",f+=" "),h+="(Weighted ".concat(l,")"),f+="(".concat(c,")")),"\n        <div class='tooltip-item' style='border-left: 2px solid ".concat(r,"'>\n          <div class='tooltip-item-name' style='color: ").concat(r,"'>").concat(h,"</div>\n          <div class='tooltip-item-value' style='color: ").concat(r,"'>").concat(f,"</div>\n        </div>\n        ")})).join("")),l="#2B2B2B";return"\n    <div class='tooltip-title'>".concat(title,"</div>\n    <div class='tooltip-items'>\n      <div class='tooltip-item' style='border-left: 2px solid ").concat(l,"'>\n          <div class='tooltip-item-name' style='color: ").concat(l,"'>(Weighted Sum)</div>\n          <div class='tooltip-item-value' style='color: ").concat(l,"'>(").concat(o.toFixed(2),")</div>\n        </div>\n      ").concat(r,"\n    </div>\n  ")}}return"currency"===t?(e.color=d,e.fieldFn=function(t){return String(t.currency)},e.getTooltipHTMLFn=n(!0,!0)):"class"===t&&(e.color=h,e.fieldFn=function(t){return"".concat(t.primary_class,"-").concat(t.secondary_class)},e.getTooltipHTMLFn=n(!1,!0)),e}function y(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"currency",d=document.getElementById("balance");d.innerHTML="\n<div id='app-container-balance'>\n  <div id='g2-customize-tooltip-balance'></div>\n  <div id='g2-container-balance'></div>\n</div>\n";var h=t.$g2.Chart,y=t.$dataset.DataView,w=new h({container:"g2-container-balance",autoFit:!0,height:Object(r.a)("g2-container-balance")}),C=m(c),data=f(e,n,C.fieldFn);w.data(data),w.scale("value",{nice:!0}),w.scale("date",{nice:!0,type:"time"}),w.tooltip({showCrosshairs:!0,shared:!0}),w.area().adjust("stack").position("date*value").color("scope",C.color),w.line().adjust("stack").position("date*value").color("scope",C.color),w.interaction("element-highlight"),w.axis("value",{label:{formatter:function(t){return parseFloat(t).toFixed(2)}}}),w.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}});var F,x=document.getElementById("g2-customize-tooltip-balance"),_=data[data.length-1].date,k=[],A=l(data);try{for(A.s();!(F=A.n()).done;){var $=F.value;k.includes($)||k.push($.scope)}}catch(t){A.e(t)}finally{A.f()}if(w.on("afterrender",(function(){var t=data.filter((function(t){return t.date===_})).map((function(t){return{color:C.color[k.indexOf(t.scope)%C.color.length],name:t.scope,value:t.value,data:{originalAmount:t.originalAmount}}}));x.innerHTML=C.getTooltipHTMLFn({title:_,items:t})})),w.on("tooltip:change",(function(t){x.innerHTML=C.getTooltipHTMLFn(t.data)})),t.showAnnotationCheck){var z,S="9999-12-31",P="0000-01-01",D=[],T=[],j=[1],M=0,W=-1,H=l(data);try{for(H.s();!(z=H.n()).done;){var L=z.value;if(L.date>P&&(P=L.date),L.date<S&&(S=L.date),D[L.date]?D[L.date]+=parseFloat(L.value):D[L.date]=parseFloat(L.value),T[L.date])T[L.date]+=parseFloat(L.value)*j[W];else{if(++W===j.length){var O=1.1*j[W-1];j.push(O)}T[L.date]=parseFloat(L.value)*j[W]}M+=parseFloat(L.value)}}catch(t){H.e(t)}finally{H.f()}var E=data.map((function(t){return t.date})).filter(v).length,B=M/E;w.annotation().line({top:!0,start:[S,B],end:[P,B],style:{stroke:"#c849ff",lineWidth:1,lineDash:[2,6]},text:{position:"end",style:{fill:"#c849ff",fontSize:12,fontWeight:300},content:"".concat(t.$t("income.average-line"),"\n").concat(B.toFixed(2)),offsetX:-20,offsetY:-5}}),M=0;var I,Y,J,X=0,U=0,V=0;for(var G in D){M+=D[G],X+=T[G],V+=j[U];var K=M/(U+=1),N=X/V;I||(I=G,Y=K,J=N),w.annotation().line({top:!0,start:[I,Y],end:[G,K],style:{stroke:"#c849ff",lineWidth:1,lineDash:[5,5]}}),w.annotation().line({top:!0,start:[I,J],end:[G,N],style:{stroke:"#01376e",lineWidth:1,lineDash:[8,5]}}),I=G,Y=K,J=N}w.annotation().line({top:!0,start:[I,J],end:[I,J],style:{stroke:"",lineWidth:1,lineDash:[8,5]},text:{position:"end",style:{fill:"#01376e",fontSize:12,fontWeight:300},content:"".concat(t.$t("income.weighted-average-line"),"\n").concat(J.toFixed(2)),offsetX:-20,offsetY:-5}});var Q=864e5,R=[];for(var Z in D){var tt=(Date.parse(Z)-Date.parse(S))/Q;R.push({datum:tt,value:parseFloat(D[Z])})}var et=(new y).source(R);et.transform({type:"regression",method:"polynomial",fields:["datum","value"],bandwidth:30,as:["datum","value"]});var nt=et.rows.map((function(t){return{date:Object(o.dateFormat)(new Date(Date.parse(Object(o.dateFormat)(new Date(S)))+t.datum*Q)),value:t.value}}));for(var at in nt){var ot=nt[at],it=0===parseInt(at)?ot:nt[at-1];w.annotation().line({top:!0,start:[ot.date,ot.value],end:[it.date,it.value],style:{stroke:"#ffbd49",lineWidth:1,lineDash:[5,3]}})}w.annotation().text({content:"".concat(t.$t("income.prediction-line"),"\n").concat(nt[nt.length-1].value),top:!0,position:[nt[nt.length-1].date,nt[nt.length-1].value],style:{fill:"#ffbd49",fontSize:12,fontWeight:300},offsetY:-5})}return w.render(),w}var w=n(398),C={name:"Balance",data:function(){return{oldChart:{balance:void 0},chartScope:"currency",showPendingCheck:!1,showAnnotationCheck:!1,disablePending:!1,previousPendingCheckCache:!1}},watch:{"$i18n.locale":function(){this.renderAllCharts()},chartScope:function(t){"currency"===t?(this.showPendingCheck=this.previousPendingCheckCache,this.disablePending=!1):"class"===t&&(this.previousPendingCheckCache=this.showPendingCheck,this.showPendingCheck=!0,this.disablePending=!0),this.renderCharts(["balance"])},showPendingCheck:function(){this.renderCharts(["balance"])},showAnnotationCheck:function(){this.renderCharts(["balance"])}},mounted:function(){this.renderAllCharts()},methods:{renderAllCharts:function(){this.renderCharts(["balance"])},renderCharts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["balance"];t.includes("balance")&&(this.oldChart.balance&&this.oldChart.balance.destroy(),this.oldChart.balance=y(this,w.balance,this.showPendingCheck,this.chartScope)),window.dispatchEvent(new Event("resize"))}}},F=C,x=(n(1496),n(133)),component=Object(x.a)(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Divider",[t._v(t._s(t.$t("balance.balance")))]),t._v(" "),n("Alert",[t._v("\n    "+t._s(t.$t("balance.scope_by_class"))+"\n    "),n("i-switch",{attrs:{size:"large","true-value":"currency","false-value":"class"},model:{value:t.chartScope,callback:function(e){t.chartScope=e},expression:"chartScope"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("income.open")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("income.close")))])]),t._v("\n    "+t._s(t.$t("balance.scope_by_currency"))+"\n    "),n("br"),t._v(" "),n("Checkbox",{attrs:{disabled:t.disablePending},model:{value:t.showPendingCheck,callback:function(e){t.showPendingCheck=e},expression:"showPendingCheck"}},[t._v("\n      "+t._s(t.$t("balance.show-pending"))+"\n    ")]),t._v(" "),n("Checkbox",{model:{value:t.showAnnotationCheck,callback:function(e){t.showAnnotationCheck=e},expression:"showAnnotationCheck"}},[t._v("\n      "+t._s(t.$t("balance.show-annotation"))+"\n    ")])],1),t._v(" "),n("div",{attrs:{id:"balance"}}),t._v(" "),n("Divider",[t._v(t._s(t.$t("balance.investment")))]),t._v(" "),n("Alert",{attrs:{type:"error","show-icon":""}},[t._v("\n    "+t._s(t.$t("reserved.title"))+"\n    "),n("template",{slot:"desc"},[t._v("\n      "+t._s(t.$t("reserved.desc"))+"\n    ")])],2)],1)}),[],!1,null,null,null);e.default=component.exports}}]);