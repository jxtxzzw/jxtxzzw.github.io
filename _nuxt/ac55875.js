(window.webpackJsonp=window.webpackJsonp||[]).push([[34,3,21],{1465:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var o;n(102),n(114),n(93);function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=2,n=2,o=10,r=1.5,c=e;return void 0!==t&&(c=t/r),Math.max(Math.min(c,o),n)}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n="#080298",o=1,c=r(e);t.size(c).shape("dot").color(n).style({opacity:o})}function l(map,source,t,e){var data,l,h=e.$l7,d=h.Scene,f=h.Popup,m=e.$l7maps,v=m.GaodeMap,y=m.Mapbox,x=n(398).setting,w=n(37).showDate,$={center:"china"===map?[108.5525,34.3227]:[-35.353535,35.353535],pitch:0,zoom:"china"===map?2.5:1,maxZoom:18,token:"china"===map?x.token.gaode:x.token.mapbox},_=new d({id:"".concat(map,"Footprint"),logoVisible:!1,preserveDrawingBuffer:!1,map:"china"===map?new v($):new y($)});_.on("loaded",(function(){window.dispatchEvent(new Event("resize")),e.screenHeight=e.$store.getters["size/getHeight"],e.screenWidth=e.$store.getters["size/getWidth"],e.screenWidth-=1,e.screenHeight-=1,_.on("zoomchange",(function(){c(o,r(_.getZoom())),_.render()}))})),data="china"===map?source.filter((function(t){return"china"===t.map})):source,l="china"===map?t.filter((function(t){return"china"===t.from_map&&"china"===t.to_map})):t;var W=function(data,t){var e=new(0,t.$l7.PointLayer)({name:"pointlayer"}).source(data,{parser:{type:"json",x:"lng",y:"lat"}});return o=e,c(e),e.active(!0).select(!0).on("click",(function(e){e.feature.cluster?t.$Message.info(t.$t("footprint.cluster_click")):t.$emit("pictures",e.feature.id,e.feature.pictures)})),e}(data,e);W.on("mousemove",(function(t){var n="<span>";if(t.feature.cluster)n=e.$t("footprint.cluster",{count:t.feature.point_count});else{var o=t.feature,r=o.date,c=o.name;r&&(n+=e.$t("footprint.date",{date:w(t.feature)})),n+=e.$t("footprint.name",{name:c}),n+="</span>"}var l=new f({offsets:[0,0],closeButton:!1}).setLnglat(t.lngLat).setHTML(n);_.addPopup(l)}));var z=function(data,t){var e=new(0,t.$l7.LineLayer)({name:"arclayer",blend:"additive"}).source(data,{parser:{type:"json",x:"from_lng",y:"from_lat",x1:"to_lng",y1:"to_lat"}});return e.size(1).shape("arc").color("#8C1EB2").style({opacity:.8,blur:.99}),e}(l,e);return _.addLayer(W),_.addLayer(z),_}},1469:function(t,e,n){"use strict";n.r(e);n(114);var o=n(1465),r=n(398),c={name:"ChinaFootprint",data:function(){return{map:"china",source:r.footprint,flights:r.flights,screenHeight:0,screenWidth:0}},computed:{getId:function(){return this.map+"Footprint"},contentHeight:function(){return this.screenHeight-160-106},contentWidth:function(){return this.screenWidth-200-96}},watch:{"$store.state.size.height":function(){this.screenHeight=this.$store.getters["size/getHeight"]},"$store.state.size.width":function(){this.screenWidth=this.$store.getters["size/getWidth"]}},mounted:function(){this.screenHeight=this.$store.getters["size/getHeight"],this.screenWidth=this.$store.getters["size/getWidth"];var t=o.a(this.map,this.source,this.flights,this);this.$emit("scene",t)}},l=n(133),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{style:{width:t.contentWidth+"px",height:t.contentHeight+"px",justifyContent:"center",position:"absolute",zIndex:2},attrs:{id:t.getId}})])}),[],!1,null,null,null);e.default=component.exports},1470:function(t,e,n){"use strict";n.r(e);n(114);var o=n(1465),r=n(398),c={name:"WorldFootprint",data:function(){return{map:"world",flights:r.flights,source:r.footprint,screenHeight:0,screenWidth:0}},computed:{getId:function(){return this.map+"Footprint"},contentHeight:function(){return this.screenHeight-160-106},contentWidth:function(){return this.screenWidth-200-96}},watch:{"$store.state.size.height":function(){this.screenHeight=this.$store.getters["size/getHeight"]},"$store.state.size.width":function(){this.screenWidth=this.$store.getters["size/getWidth"]}},mounted:function(){this.screenHeight=this.$store.getters["size/getHeight"],this.screenWidth=this.$store.getters["size/getWidth"];var t=o.a(this.map,this.source,this.flights,this);this.$emit("scene",t)}},l=n(133),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{style:{width:t.contentWidth+"px",height:t.contentHeight+"px",justifyContent:"center",position:"absolute",zIndex:1},attrs:{id:t.getId}})])}),[],!1,null,null,null);e.default=component.exports},1475:function(t,e,n){var content=n(1508);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(135).default)("8b99d94e",content,!0,{sourceMap:!1})},1507:function(t,e,n){"use strict";n(1475)},1508:function(t,e,n){var o=n(134)(!1);o.push([t.i,'.demo-carousel[data-v-19925c10]{text-align:center;color:#fff;font-size:20px;background:#fff}.cycle-gallery[data-v-19925c10]{position:relative;text-align:center;padding:40px 200px 33px;margin:0 0 60px;line-height:1.6}.cycle-gallery p[data-v-19925c10]{color:#515a6e}.cycle-gallery .img-box[data-v-19925c10]{display:block;line-height:1.5;padding:0 0 40px}.cycle-gallery .img-box .img-holder[data-v-19925c10]{display:inline-block;vertical-align:middle;margin:0 22px 0 0;overflow:hidden}.cycle-gallery .img-box .img-holder img[data-v-19925c10]{width:100%;height:100%;border-radius:10%}.cycle-gallery .img-box h3[data-v-19925c10]{margin:0;line-height:1.33333;color:#635c73}.cycle-gallery .img-box a[data-v-19925c10]{font-weight:700}.cycle-gallery[data-v-19925c10]:after{content:"";position:absolute;bottom:0;left:180px;right:180px;height:1px;background:#f4f4f4}',""]),t.exports=o},1539:function(t,e,n){"use strict";n.r(e);n(172);var o=n(398),r=n(1469),c={name:"Footprint",components:{WorldFootprint:n(1470).default,ChinaFootprint:r.default},data:function(){return{setting:o.setting,map:"china",chinaScene:null,worldScene:null,pictureModal:!1,pictureId:0,carouselId:0,pictures:[]}},watch:{map:function(){this.$store.commit("size/setHeight",600),this.$store.commit("size/setWidth",600),this.chinaScene.render(),this.worldScene.render()}},methods:{saveChinaScene:function(t){this.chinaScene=t},saveWorldScene:function(t){this.worldScene=t},showPictures:function(t,e){this.pictureId=t,null!=e&&""!==e?(this.pictures=e.split(","),this.pictureModal=!0):(this.$Message.error(this.$t("footprint.no_pictures")),this.pictures=[],this.pictureModal=!1)}}},l=(n(1507),n(133)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Alert",{attrs:{type:"info"}},[n("p",[t._v("\n      "+t._s(t.$t("footprint.current"))+"\n      "),n("i-switch",{attrs:{size:"large","true-value":"china","false-value":"world"},model:{value:t.map,callback:function(e){t.map=e},expression:"map"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("footprint.china")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("footprint.world")))])]),t._v("\n      "+t._s(t.$t("navigation.footprint"))+"\n    ")],1),t._v(" "),n("template",{slot:"desc"},[t._v(t._s(t.$t("footprint.desc")))])],2),t._v(" "),n("ChinaFootprint",{style:{display:"china"===t.map?"block":"none"},on:{scene:t.saveChinaScene,pictures:t.showPictures}}),t._v(" "),n("WorldFootprint",{on:{scene:t.saveWorldScene,pictures:t.showPictures}}),t._v(" "),n("Modal",{attrs:{"footer-hide":"",width:"90"},model:{value:t.pictureModal,callback:function(e){t.pictureModal=e},expression:"pictureModal"}},[t.pictureModal?n("Carousel",{attrs:{loop:"",autoplay:"","autoplay-speed":5e3},model:{value:t.carouselId,callback:function(e){t.carouselId=e},expression:"carouselId"}},t._l(t.pictures,(function(picture){return n("CarouselItem",{key:picture.id},[n("div",{staticClass:"demo-carousel"},[n("div",{staticClass:"cycle-gallery"},[n("div",{staticClass:"img-box"},[n("div",{staticClass:"img-holder"},[n("img",{attrs:{src:t.setting.src.footprint+picture}})])])])])])})),1):t._e()],1)],1)}),[],!1,null,"19925c10",null);e.default=component.exports;installComponents(component,{ChinaFootprint:n(1469).default,WorldFootprint:n(1470).default})}}]);