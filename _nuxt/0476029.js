(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1467:function(e,t,n){var content=n(1494);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(135).default)("60dd175a",content,!0,{sourceMap:!1})},1493:function(e,t,n){"use strict";n(1467)},1494:function(e,t,n){var o=n(134)(!1);o.push([e.i,"#app-container-balance{display:flex;flex-direction:column;width:100%;height:100%}#g2-container-balance{flex:auto}#g2-customize-tooltip-balance{margin-bottom:16px;font-size:12px}#g2-customize-tooltip-balance .tooltip-items{display:flex;flex-direction:row}#g2-customize-tooltip-balance .tooltip-item{flex-basis:240px;padding-left:8px;margin-right:12px}#g2-customize-tooltip-balance .tooltip-item .tooltip-item-value{font-size:16px;font-weight:700}#g2-customize-tooltip-balance .tooltip-item-info{display:flex;justify-content:space-between}#g2-customize-tooltip-balance .tooltip-item-info .info-item{display:flex}#g2-customize-tooltip-balance .tooltip-item-info .info-item .info-item-name{opacity:.65}#g2-customize-tooltip-balance .tooltip-item-info .info-item .info-item-value{margin-left:8px}",""]),e.exports=o},1520:function(e,t,n){"use strict";n.r(t);var o=n(198),r=(n(102),n(114),n(152),n(136),n(101),n(70),n(93),n(83),n(113),n(99),n(100),n(39)),l=n(1464);function c(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,r=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw r}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var f=["#A0DC2C","#FF6500","#0059FF"],h=["#FAE423","#653CFA","#2FFAA9","#FA7055","#2382FA","#987346"];function v(e,t,n){var o,r=[],l=[],d=c(e);try{for(d.s();!(o=d.n()).done;){var f=o.value,h=n(f);if(!f.pending||t){l[f.date]||(l[f.date]={}),r.includes(h)||r.push(h);var v=parseFloat(f.amount),m=parseFloat(f.currency_weight);l[f.date][h]||(l[f.date][h]={amount:0,weightedAmount:0}),l[f.date][h].amount+=v,l[f.date][h].weightedAmount+=v*m}}}catch(e){d.e(e)}finally{d.f()}var data=[];for(var y in l){var A,k=c(r);try{for(k.s();!(A=k.n()).done;){var C=A.value,a=C in l[y]?parseFloat(l[y][C].amount):0;a=parseFloat(a.toFixed(2));var x=C in l[y]?parseFloat(l[y][C].weightedAmount):0;x=parseFloat(x.toFixed(2)),data.push({date:y,scope:C,value:x,originalAmount:a})}}catch(e){k.e(e)}finally{k.f()}}return data}function m(e,t,n){return n.indexOf(e)===t}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"currency",t={fieldFn:void 0,color:void 0};return"currency"===e?(t.color=f,t.fieldFn=function(e){return String(e.currency)}):"class"===e&&(t.color=h,t.fieldFn=function(e){return"".concat(e.primary_class,"-").concat(e.secondary_class)}),t}function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"currency",d=document.getElementById("balance");d.innerHTML="\n<div id='app-container-balance'>\n  <div id='g2-customize-tooltip-balance'></div>\n  <div id='g2-container-balance'></div>\n</div>\n";var f=e.$g2.Chart,h=e.$dataset.DataView,A=new f({container:"g2-container-balance",autoFit:!0,height:Object(l.a)("g2-container-balance")}),k=y(o),data=v(t,n,k.fieldFn);A.data(data),A.scale("value",{nice:!0}),A.scale("date",{nice:!0,type:"time"}),A.tooltip({showCrosshairs:!0,shared:!0}),A.area().adjust("stack").position("date*value").color("scope",k.color),A.line().adjust("stack").position("date*value").color("scope",k.color),A.interaction("element-highlight"),A.axis("value",{label:{formatter:function(e){return parseFloat(e).toFixed(2)}}}),A.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}});var C=document.getElementById("g2-customize-tooltip-balance");function x(data){var title=data.title,e=data.items,t=0,n="".concat(e.map((function(e){var n=e.color,o=e.name,r=e.value,l=e.data.originalAmount;return t+=parseFloat(r),"\n        <div class='tooltip-item' style='border-left: 2px solid ".concat(n,"'>\n          <div class='tooltip-item-name'>").concat(o," (Weighted ").concat(o,")</div>\n          <div class='tooltip-item-value'>").concat(l," (").concat(r,")</div>\n        </div>\n        ")})).join(""));return"\n    <div class='tooltip-title'>".concat(title,"</div>\n    <div class='tooltip-items'>\n      <div class='tooltip-item' style='border-left: 2px solid #2B2B2B'>\n          <div class='tooltip-item-name'>(Weighted Sum)</div>\n          <div class='tooltip-item-value'>(").concat(t.toFixed(2),")</div>\n        </div>\n      ").concat(n,"\n    </div>\n  ")}var w=data[data.length-1].date;if(A.on("afterrender",(function(){var e=data.filter((function(e){return e.date===w})).map((function(e){return{name:e.scope,value:e.value,data:{originalAmount:e.originalAmount}}}));C.innerHTML=x({title:w,items:e})})),A.on("tooltip:change",(function(e){C.innerHTML=x(e.data)})),e.showAnnotationCheck){var S,_="9999-12-31",F="0000-01-01",M=[],G=[],O=[1],$=0,j=-1,z=c(data);try{for(z.s();!(S=z.n()).done;){var D=S.value;if(D.date>F&&(F=D.date),D.date<_&&(_=D.date),M[D.date]?M[D.date]+=parseFloat(D.value):M[D.date]=parseFloat(D.value),G[D.date])G[D.date]+=parseFloat(D.value)*O[j];else{if(++j===O.length){var I=1.1*O[j-1];O.push(I)}G[D.date]=parseFloat(D.value)*O[j]}$+=parseFloat(D.value)}}catch(e){z.e(e)}finally{z.f()}var P=data.map((function(e){return e.date})).filter(m).length,W=$/P;A.annotation().line({top:!0,start:[_,W],end:[F,W],style:{stroke:"#c849ff",lineWidth:1,lineDash:[2,6]},text:{position:"end",style:{fill:"#c849ff",fontSize:12,fontWeight:300},content:"".concat(e.$t("income.average-line"),"\n").concat(W.toFixed(2)),offsetX:-20,offsetY:-5}}),$=0;var E,B,R,T=0,V=0,Y=0;for(var H in M){$+=M[H],T+=G[H],Y+=O[V];var L=$/(V+=1),U=T/Y;E||(E=H,B=L,R=U),A.annotation().line({top:!0,start:[E,B],end:[H,L],style:{stroke:"#c849ff",lineWidth:1,lineDash:[5,5]}}),A.annotation().line({top:!0,start:[E,R],end:[H,U],style:{stroke:"#01376e",lineWidth:1,lineDash:[8,5]}}),E=H,B=L,R=U}A.annotation().line({top:!0,start:[E,R],end:[E,R],style:{stroke:"",lineWidth:1,lineDash:[8,5]},text:{position:"end",style:{fill:"#01376e",fontSize:12,fontWeight:300},content:"".concat(e.$t("income.weighted-average-line"),"\n").concat(R.toFixed(2)),offsetX:-20,offsetY:-5}});var J=864e5,X=[];for(var K in M){var N=(Date.parse(K)-Date.parse(_))/J;X.push({datum:N,value:parseFloat(M[K])})}var Q=(new h).source(X);Q.transform({type:"regression",method:"polynomial",fields:["datum","value"],bandwidth:30,as:["datum","value"]});var Z=Q.rows.map((function(e){return{date:Object(r.dateFormat)(new Date(Date.parse(Object(r.dateFormat)(new Date(_)))+e.datum*J)),value:e.value}}));for(var ee in Z){var te=Z[ee],ne=0===parseInt(ee)?te:Z[ee-1];A.annotation().line({top:!0,start:[te.date,te.value],end:[ne.date,ne.value],style:{stroke:"#ffbd49",lineWidth:1,lineDash:[5,3]}})}A.annotation().text({content:"".concat(e.$t("income.prediction-line"),"\n").concat(Z[Z.length-1].value),top:!0,position:[Z[Z.length-1].date,Z[Z.length-1].value],style:{fill:"#ffbd49",fontSize:12,fontWeight:300},offsetY:-5})}return A.render(),A}var k=n(398),C=n(41);function x(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,r=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw r}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function S(e,t,n){var o=Object(C.a)(n,3),r=o[0],c=o[1],d=o[2];if(0===(t=t.filter((function(e){return r.includes(e.source)&&c.includes(e.model)}))).length)return null;var f,h=new(0,e.$g2.Chart)({container:"credit-score",forceFit:!0,autoFit:!0,height:Object(l.a)()}),v=x(t);try{for(v.s();!(f=v.n()).done;){var m=f.value;m.name="".concat(m.source," + ").concat(m.model)}}catch(e){v.e(e)}finally{v.f()}return h.data(t),h.tooltip({showCrosshairs:!0,shared:!0}),h.scale("date",{type:"time"}),h.scale("score",{nice:!0}),h.axis("score",{label:{formatter:function(e){return parseInt(e,10)}}}),h.line().position("date*score").color("name"),h.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}}),function(e,t,n){var o,r=1e3,l=0,c=!1,d="9999-12-31",f="0000-01-01",h=x(e);try{for(h.s();!(o=h.n()).done;){var v=o.value;v.date>f&&(f=v.date),v.date<d&&(d=v.date)}}catch(e){h.e(e)}finally{h.f()}for(var m={"芝麻信用":{boarder:[350,950],score:[350,550,600,650,700],text:["较差","中等","良好","优秀","极好"],color:"#1574F7"},"微信支付分":{boarder:[350,950],score:[350,550,600,650,700],text:["较差","中等","良好","优秀","极好"],color:"#1AAD19"},"VantageScore 3.0":{boarder:[300,850],score:[300,500,601,661,781],text:["Very Poor","Poor","Fair","Good","Excellent"],color:"#F15F22"},"FICO Score 8":{boarder:[300,850],score:[300,580,670,740,800],text:["Poor","Fair","Good","Very Good","Exceptional"],color:"#b520ff"}},y=0,A=["芝麻信用","微信支付分","VantageScore 3.0","FICO Score 8"];y<A.length;y++){var k=A[y];if(t.includes(k)){r=Math.min(r,m[k].boarder[0]),l=Math.max(l,m[k].boarder[1]),c=!0;for(var i=0;i<m[k].score.length;i++)n.annotation().line({top:!0,start:[d,m[k].score[i]],end:[f,m[k].score[i]],style:{stroke:m[k].color,lineWidth:1,lineDash:[3,3]},text:{position:"start",style:{fill:m[k].color,fontSize:12,fontWeight:300},content:"".concat(m[k].text[i]," -").concat(k),offsetY:-5}})}}for(var C={"FICO BankCard Score 8":{boarder:[250,900]},"FICO Auto Score 8":{boarder:[350,950]}},w=0,S=["FICO BankCard Score 8","FICO Auto Score 8"];w<S.length;w++){var _=S[w];t.includes(_)&&(r=Math.min(r,C[_].boarder[0]),l=Math.max(l,C[_].boarder[1]),c=!0)}c&&(n.scale("score",{min:r,max:l}),n.legend(!0),n.removeInteraction("legend-filter"))}(t,d,h),h.render(),h}function _(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,r=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw r}}}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var M={name:"Balance",data:function(){return{oldChart:{balance:void 0,creditScore:void 0},chartScope:"currency",uniqueSource:[],uniqueModel:[],checkAllGroupSource:[],checkAllGroupModel:[],checkAllGroupRange:[],forceCheckedModel:[],showPendingCheck:!1,showAnnotationCheck:!1,disablePending:!1}},watch:{"$i18n.locale":function(){this.renderAllCharts()},chartScope:function(e){"currency"===e?this.disablePending=!1:"class"===e&&(this.showPendingCheck=!0,this.disablePending=!0),this.renderCharts(["balance"])},showPendingCheck:function(){this.renderCharts(["balance"])},showAnnotationCheck:function(){this.renderCharts(["balance"])}},mounted:function(){this.prepareData(),this.renderAllCharts()},methods:{prepareData:function(){this.uniqueSource=k.credit.map((function(e){return e.source})).filter((function(e,t,n){return n.indexOf(e)===t})),this.uniqueModel=k.credit.map((function(e){return e.model})).filter((function(e,t,n){return n.indexOf(e)===t})),this.checkAllGroupSource=Object(o.a)(this.uniqueSource),this.checkAllGroupModel=Object(o.a)(this.uniqueModel),this.checkAllGroupRange=[]},renderCredit:function(){this.renderCharts(["credit"])},renderAllCharts:function(){this.renderCharts(["balance","credit"])},renderCharts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["balance","credit"];if(e.includes("balance")&&(this.oldChart.balance&&this.oldChart.balance.destroy(),this.oldChart.balance=A(this,k.balance,this.showPendingCheck,this.chartScope)),e.includes("credit")){this.oldChart.creditScore&&this.oldChart.creditScore.destroy(),this.forceCheckedModel=this.checkAllGroupRange;var t,n=_(this.forceCheckedModel);try{for(n.s();!(t=n.n()).done;){var o=t.value;this.checkAllGroupModel.includes(o)||this.checkAllGroupModel.push(o)}}catch(e){n.e(e)}finally{n.f()}this.oldChart.creditScore=S(this,k.credit,[this.checkAllGroupSource,this.checkAllGroupModel,this.checkAllGroupRange])}window.dispatchEvent(new Event("resize"))}}},G=M,O=(n(1493),n(133)),component=Object(O.a)(G,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Divider",[e._v(e._s(e.$t("balance.balance")))]),e._v(" "),n("Alert",[e._v("\n    "+e._s(e.$t("balance.scope_by_class"))+"\n    "),n("i-switch",{attrs:{size:"large","true-value":"currency","false-value":"class"},model:{value:e.chartScope,callback:function(t){e.chartScope=t},expression:"chartScope"}},[n("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("income.open")))]),e._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("income.close")))])]),e._v("\n    "+e._s(e.$t("balance.scope_by_currency"))+"\n    "),n("br"),e._v(" "),n("Checkbox",{attrs:{disabled:e.disablePending},model:{value:e.showPendingCheck,callback:function(t){e.showPendingCheck=t},expression:"showPendingCheck"}},[e._v("\n      "+e._s(e.$t("balance.show-pending"))+"\n    ")]),e._v(" "),n("Checkbox",{model:{value:e.showAnnotationCheck,callback:function(t){e.showAnnotationCheck=t},expression:"showAnnotationCheck"}},[e._v("\n      "+e._s(e.$t("balance.show-annotation"))+"\n    ")])],1),e._v(" "),n("div",{attrs:{id:"balance"}}),e._v(" "),n("Divider",[e._v(" "+e._s(e.$t("credit.credit")))]),e._v(" "),n("Alert",[n("p",[e._v(e._s(e.$t("credit.source")))]),e._v(" "),n("CheckboxGroup",{on:{"on-change":e.renderCredit},model:{value:e.checkAllGroupSource,callback:function(t){e.checkAllGroupSource=t},expression:"checkAllGroupSource"}},e._l(e.uniqueSource,(function(s){return n("Checkbox",{key:s,attrs:{label:s}})})),1),e._v(" "),n("Divider",{staticClass:"ivu-m-0",attrs:{size:"small"}}),e._v(" "),n("p",[e._v(e._s(e.$t("credit.model")))]),e._v(" "),n("CheckboxGroup",{on:{"on-change":e.renderCredit},model:{value:e.checkAllGroupModel,callback:function(t){e.checkAllGroupModel=t},expression:"checkAllGroupModel"}},e._l(e.uniqueModel,(function(t){return n("Checkbox",{key:t,attrs:{label:t,disabled:e.forceCheckedModel.includes(t)}})})),1),e._v(" "),n("Divider",{staticClass:"ivu-m-0",attrs:{size:"small"}}),e._v(" "),n("p",[e._v(e._s(e.$t("credit.range")))]),e._v(" "),n("CheckboxGroup",{on:{"on-change":e.renderCredit},model:{value:e.checkAllGroupRange,callback:function(t){e.checkAllGroupRange=t},expression:"checkAllGroupRange"}},e._l(e.uniqueModel,(function(e){return n("Checkbox",{key:e,attrs:{label:e}})})),1)],1),e._v(" "),n("div",{attrs:{id:"credit-score"}})],1)}),[],!1,null,null,null);t.default=component.exports}}]);