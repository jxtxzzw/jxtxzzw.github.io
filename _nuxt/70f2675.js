(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1470:function(t,e,n){var content=n(1498);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(135).default)("60dd175a",content,!0,{sourceMap:!1})},1497:function(t,e,n){"use strict";n(1470)},1498:function(t,e,n){var o=n(134)(!1);o.push([t.i,"#app-container-balance{display:flex;flex-direction:column;width:100%;height:100%}#g2-container-balance{flex:auto}#g2-customize-tooltip-balance{margin-bottom:16px;font-size:12px}#g2-customize-tooltip-balance .tooltip-items{display:flex;flex-direction:row}#g2-customize-tooltip-balance .tooltip-item{flex-basis:240px;padding-left:8px;margin-right:12px}#g2-customize-tooltip-balance .tooltip-item .tooltip-item-value{font-size:16px;font-weight:700}#g2-customize-tooltip-balance .tooltip-item-info{display:flex;justify-content:space-between}#g2-customize-tooltip-balance .tooltip-item-info .info-item{display:flex}#g2-customize-tooltip-balance .tooltip-item-info .info-item .info-item-name{opacity:.65}#g2-customize-tooltip-balance .tooltip-item-info .info-item .info-item-value{margin-left:8px}#app-container-investment{display:flex;flex-direction:column;width:100%;height:100%}#g2-container-investment{flex:auto}#g2-customize-tooltip-investment{margin-bottom:16px;font-size:12px}#g2-customize-tooltip-investment .tooltip-items{display:flex;flex-direction:row}#g2-customize-tooltip-investment .tooltip-item{flex-basis:240px;padding-left:8px;margin-right:12px}#g2-customize-tooltip-investment .tooltip-item .tooltip-item-value{font-size:16px;font-weight:700}#g2-customize-tooltip-investment .tooltip-item-info{display:flex;justify-content:space-between}#g2-customize-tooltip-investment .tooltip-item-info .info-item{display:flex}#g2-customize-tooltip-investment .tooltip-item-info .info-item .info-item-name{opacity:.65}#g2-customize-tooltip-investment .tooltip-item-info .info-item .info-item-value{margin-left:8px}",""]),t.exports=o},1526:function(t,e,n){"use strict";n.r(e);n(152),n(136),n(114),n(93),n(102),n(101),n(70),n(83),n(113),n(99),n(100);var o=n(38),r=n(1467);function l(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,d=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){d=!0,r=t},f:function(){try{l||null==n.return||n.return()}finally{if(d)throw r}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var d=["#A0DC2C","#FF6500","#0059FF"],v=["#FAE423","#653CFA","#2FFAA9","#FA7055","#2382FA","#987346"];function h(t,e,n){var o,r=[],c=[],d=l(t);try{for(d.s();!(o=d.n()).done;){var v=o.value,h=n(v);if(!v.pending||e){c[v.date]||(c[v.date]={}),r.includes(h)||r.push(h);var m=parseFloat(v.amount),f=parseFloat(v.currency_weight);c[v.date][h]||(c[v.date][h]={amount:0,weightedAmount:0}),c[v.date][h].amount+=m,c[v.date][h].weightedAmount+=m*f}}}catch(t){d.e(t)}finally{d.f()}var data=[];for(var y in c){var _,w=l(r);try{for(w.s();!(_=w.n()).done;){var C=_.value,a=C in c[y]?parseFloat(c[y][C].amount):0;a=parseFloat(a.toFixed(2));var x=C in c[y]?parseFloat(c[y][C].weightedAmount):0;x=parseFloat(x.toFixed(2)),data.push({date:y,scope:C,value:x,originalAmount:a})}}catch(t){w.e(t)}finally{w.f()}}return data}function m(t,e,n){return n.indexOf(t)===e}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"currency",e={fieldFn:void 0,color:void 0,getTooltipHTMLFn:void 0};function n(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(data){var title=data.title,n=data.items,o=0,r="".concat(n.map((function(n){var r=n.color,l=n.name,c=n.value,d=n.data.originalAmount;o+=parseFloat(c);var v="",h="";return t&&(v+=l,h+=d),e&&(t&&(v+=" ",h+=" "),v+="(Weighted ".concat(l,")"),h+="(".concat(c,")")),"\n        <div class='tooltip-item' style='border-left: 2px solid ".concat(r,"'>\n          <div class='tooltip-item-name' style='color: ").concat(r,"'>").concat(v,"</div>\n          <div class='tooltip-item-value' style='color: ").concat(r,"'>").concat(h,"</div>\n        </div>\n        ")})).join("")),l="#2B2B2B";return"\n    <div class='tooltip-title'>".concat(title,"</div>\n    <div class='tooltip-items'>\n      <div class='tooltip-item' style='border-left: 2px solid ").concat(l,"'>\n          <div class='tooltip-item-name' style='color: ").concat(l,"'>(Weighted Sum)</div>\n          <div class='tooltip-item-value' style='color: ").concat(l,"'>(").concat(o.toFixed(2),")</div>\n        </div>\n      ").concat(r,"\n    </div>\n  ")}}return"currency"===t?(e.color=d,e.fieldFn=function(t){return String(t.currency)},e.getTooltipHTMLFn=n(!0,!0)):"class"===t&&(e.color=v,e.fieldFn=function(t){return"".concat(t.primary_class,"-").concat(t.secondary_class)},e.getTooltipHTMLFn=n(!1,!0)),e}function y(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"currency",d=document.getElementById("balance");d.innerHTML="\n<div id='app-container-balance'>\n  <div id='g2-customize-tooltip-balance'></div>\n  <div id='g2-container-balance'></div>\n</div>\n";var v=t.$g2.Chart,y=t.$dataset.DataView,_=new v({container:"g2-container-balance",autoFit:!0,height:Object(r.a)("g2-container-balance")}),w=f(c),data=h(e,n,w.fieldFn);_.data(data),_.scale("value",{nice:!0}),_.scale("date",{nice:!0,type:"time"}),_.tooltip({showCrosshairs:!0,shared:!0}),_.area().adjust("stack").position("date*value").color("scope",w.color),_.line().adjust("stack").position("date*value").color("scope",w.color),_.interaction("element-highlight"),_.axis("value",{label:{formatter:function(t){return parseFloat(t).toFixed(2)}}}),_.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}});var C,x=document.getElementById("g2-customize-tooltip-balance"),F=data[data.length-1].date,A=[],k=l(data);try{for(k.s();!(C=k.n()).done;){var $=C.value;A.includes($)||A.push($.scope)}}catch(t){k.e(t)}finally{k.f()}if(_.on("afterrender",(function(){var t=data.filter((function(t){return t.date===F})).map((function(t){return{color:w.color[A.indexOf(t.scope)%w.color.length],name:t.scope,value:t.value,data:{originalAmount:t.originalAmount}}}));x.innerHTML=w.getTooltipHTMLFn({title:F,items:t})})),_.on("tooltip:change",(function(t){x.innerHTML=w.getTooltipHTMLFn(t.data)})),t.showAnnotationCheck){var z,S="9999-12-31",D="0000-01-01",P=[],j=[],E=[1],T=0,M=-1,W=l(data);try{for(W.s();!(z=W.n()).done;){var H=z.value;if(H.date>D&&(D=H.date),H.date<S&&(S=H.date),P[H.date]?P[H.date]+=parseFloat(H.value):P[H.date]=parseFloat(H.value),j[H.date])j[H.date]+=parseFloat(H.value)*E[M];else{if(++M===E.length){var L=1.1*E[M-1];E.push(L)}j[H.date]=parseFloat(H.value)*E[M]}T+=parseFloat(H.value)}}catch(t){W.e(t)}finally{W.f()}var O=data.map((function(t){return t.date})).filter(m).length,B=T/O;_.annotation().line({top:!0,start:[S,B],end:[D,B],style:{stroke:"#c849ff",lineWidth:1,lineDash:[2,6]},text:{position:"end",style:{fill:"#c849ff",fontSize:12,fontWeight:300},content:"".concat(t.$t("income.average-line"),"\n").concat(B.toFixed(2)),offsetX:-20,offsetY:-5}}),T=0;var I,N,Y,J=0,X=0,U=0;for(var V in P){T+=P[V],J+=j[V],U+=E[X];var G=T/(X+=1),K=J/U;I||(I=V,N=G,Y=K),_.annotation().line({top:!0,start:[I,N],end:[V,G],style:{stroke:"#c849ff",lineWidth:1,lineDash:[5,5]}}),_.annotation().line({top:!0,start:[I,Y],end:[V,K],style:{stroke:"#01376e",lineWidth:1,lineDash:[8,5]}}),I=V,N=G,Y=K}_.annotation().line({top:!0,start:[I,Y],end:[I,Y],style:{stroke:"",lineWidth:1,lineDash:[8,5]},text:{position:"end",style:{fill:"#01376e",fontSize:12,fontWeight:300},content:"".concat(t.$t("income.weighted-average-line"),"\n").concat(Y.toFixed(2)),offsetX:-20,offsetY:-5}});var Q=864e5,R=[];for(var Z in P){var tt=(Date.parse(Z)-Date.parse(S))/Q;R.push({datum:tt,value:parseFloat(P[Z])})}var et=(new y).source(R);et.transform({type:"regression",method:"polynomial",fields:["datum","value"],bandwidth:30,as:["datum","value"]});var nt=et.rows.map((function(t){return{date:Object(o.dateFormat)(new Date(Date.parse(Object(o.dateFormat)(new Date(S)))+t.datum*Q)),value:t.value}}));for(var ot in nt){var it=nt[ot],at=0===parseInt(ot)?it:nt[ot-1];_.annotation().line({top:!0,start:[it.date,it.value],end:[at.date,at.value],style:{stroke:"#ffbd49",lineWidth:1,lineDash:[5,3]}})}_.annotation().text({content:"".concat(t.$t("income.prediction-line"),"\n").concat(nt[nt.length-1].value),top:!0,position:[nt[nt.length-1].date,nt[nt.length-1].value],style:{fill:"#ffbd49",fontSize:12,fontWeight:300},offsetY:-5})}return _.render(),_}function _(t){var e,n,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],d=t.sort((function(a,b){return new Date(a.date)-new Date(b.date)})),v=[],h=[],m={},f=l(d);try{for(f.s();!(n=f.n()).done;){var y=n.value;if(!c||!y.equity_awards){var _=y.date,code=y.code;v.includes(code)||v.push(code),h.includes(_)||h.push(_),_ in m||(m[_]={});var w,C=l(v);try{for(C.s();!(w=C.n()).done;){var x=w.value;x in m[_]||(m[_][x]={holdings:0,market_price:0,total_cost:0},e&&x in m[e]&&(m[_][x].holdings=m[e][x].holdings,m[_][x].total_cost=m[e][x].total_cost,m[_][x].market_price=m[e][x].market_price))}}catch(t){C.e(t)}finally{C.f()}var F=y.buyin_shares,A=y.buyin_price;!r&&y.equity_awards&&(A=0);var k=o?y.currency_weight:1,$=A*k,z=y.market_price*k;m[_][code].holdings+=F,m[_][code].market_price=z,m[_][code].total_cost+=F*$,e=_}}}catch(t){f.e(t)}finally{f.f()}for(var S={},D=0,P=h;D<P.length;D++){var j=P[D];S[j]={value:0,cost:0};var E,T=l(v);try{for(T.s();!(E=T.n()).done;){var M=E.value;M in m[j]&&(S[j].value+=m[j][M].holdings*m[j][M].market_price,S[j].cost+=m[j][M].total_cost)}}catch(t){T.e(t)}finally{T.f()}}var data=[];for(var W in S)data.push({date:W,value:S[W].value,net:S[W].value-S[W].cost});return data}function w(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],d=document.getElementById("investment");d.innerHTML="\n<div id='app-container-investment'>\n  <div id='g2-customize-tooltip-investment'></div>\n  <div id='g2-container-investment'></div>\n</div>\n";var v=t.$g2.Chart,h=new v({container:"g2-container-investment",autoFit:!0,height:Object(r.a)("g2-container-investment")}),data=_(e,n,l,c);h.data(data);var m=o?"net":"value";h.scale(m,{nice:!0}),h.scale("date",{nice:!0,type:"time"}),h.tooltip({showCrosshairs:!0,shared:!0});var f=o?"white":"#873BF4";return h.area().adjust("stack").position("date*".concat(m)).color(f),h.line().adjust("stack").position("date*".concat(m)).color(f),o&&(h.annotation().regionFilter({top:!0,start:["min","max"],end:["max",0],color:"#f5222d"}),h.annotation().regionFilter({top:!0,start:["min",0],end:["max","min"],color:"#2fc25b"})),h.interaction("element-highlight"),h.axis(m,{label:{formatter:function(t){return parseFloat(t).toFixed(2)}}}),h.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}}),h.render(),h}var C=n(398),x={name:"Balance",data:function(){return{oldChart:{balance:void 0,investment:void 0},investmentNet:!1,chartScope:"currency",showPendingCheck:!1,showAnnotationCheck:!1,disablePending:!1,previousPendingCheckCache:!1,equityAwardsCost:!1,investmentCurrency:!0,hideEquityAwards:!1}},watch:{"$i18n.locale":function(){this.renderAllCharts()},chartScope:function(t){"currency"===t?(this.showPendingCheck=this.previousPendingCheckCache,this.disablePending=!1):"class"===t&&(this.previousPendingCheckCache=this.showPendingCheck,this.showPendingCheck=!0,this.disablePending=!0),this.renderCharts(["balance"])},showPendingCheck:function(){this.renderCharts(["balance"])},showAnnotationCheck:function(){this.renderCharts(["balance"])},investmentNet:function(){this.renderCharts(["investment"])},equityAwardsCost:function(){this.renderCharts(["investment"])},investmentCurrency:function(){this.renderCharts(["investment"])},hideEquityAwards:function(){this.renderCharts(["investment"])}},mounted:function(){this.renderAllCharts()},methods:{renderAllCharts:function(){this.renderCharts(["balance","investment"])},renderCharts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["balance","investment"];t.includes("balance")&&(this.oldChart.balance&&this.oldChart.balance.destroy(),this.oldChart.balance=y(this,C.balance,this.showPendingCheck,this.chartScope)),t.includes("investment")&&(this.oldChart.investment&&this.oldChart.investment.destroy(),this.oldChart.investment=w(this,C.investment,this.investmentCurrency,this.investmentNet,this.equityAwardsCost,this.hideEquityAwards)),window.dispatchEvent(new Event("resize"))}}},F=x,A=(n(1497),n(133)),component=Object(A.a)(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Divider",[t._v(t._s(t.$t("balance.balance")))]),t._v(" "),n("Alert",[t._v("\n    "+t._s(t.$t("income.show-original-amount"))+"\n    "),n("i-switch",{attrs:{value:!0,disabled:"",size:"large","true-value":!0,"false-value":!1}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("income.open")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("income.close")))])]),t._v("\n    "+t._s(t.$t("income.show-equivalent-cny"))+"\n    "),n("br"),t._v("\n    "+t._s(t.$t("balance.scope_by_class"))+"\n    "),n("i-switch",{attrs:{size:"large","true-value":"currency","false-value":"class"},model:{value:t.chartScope,callback:function(e){t.chartScope=e},expression:"chartScope"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("income.open")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("income.close")))])]),t._v("\n    "+t._s(t.$t("balance.scope_by_currency"))+"\n    "),n("br"),t._v(" "),n("Checkbox",{attrs:{disabled:t.disablePending},model:{value:t.showPendingCheck,callback:function(e){t.showPendingCheck=e},expression:"showPendingCheck"}},[t._v("\n      "+t._s(t.$t("balance.show-pending"))+"\n    ")]),t._v(" "),n("Checkbox",{model:{value:t.showAnnotationCheck,callback:function(e){t.showAnnotationCheck=e},expression:"showAnnotationCheck"}},[t._v("\n      "+t._s(t.$t("balance.show-annotation"))+"\n    ")])],1),t._v(" "),n("div",{attrs:{id:"balance"}}),t._v(" "),n("Divider",[t._v(t._s(t.$t("balance.investment")))]),t._v(" "),n("Alert",[t._v("\n    "+t._s(t.$t("income.show-original-amount"))+"\n    "),n("i-switch",{attrs:{size:"large","true-value":!0,"false-value":!1},model:{value:t.investmentCurrency,callback:function(e){t.investmentCurrency=e},expression:"investmentCurrency"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("income.open")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("income.close")))])]),t._v("\n    "+t._s(t.$t("income.show-equivalent-cny"))+"\n    "),n("br"),t._v("\n    "+t._s(t.$t("balance.show-actual-investment"))+"\n    "),n("i-switch",{attrs:{size:"large"},model:{value:t.investmentNet,callback:function(e){t.investmentNet=e},expression:"investmentNet"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("income.open")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("income.close")))])]),t._v("\n    "+t._s(t.$t("balance.show-net-investment"))+"\n    "),n("br"),t._v("\n    "+t._s(t.$t("balance.show-all-transactions"))+"\n    "),n("i-switch",{attrs:{size:"large"},model:{value:t.hideEquityAwards,callback:function(e){t.hideEquityAwards=e},expression:"hideEquityAwards"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("income.open")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("income.close")))])]),t._v("\n    "+t._s(t.$t("balance.hide-equity-awards"))+"\n    "),n("br"),t._v(" "),t.investmentNet&&!t.hideEquityAwards?n("span",[t._v("\n      "+t._s(t.$t("balance.equity-awards-as-zero-cost"))+"\n      "),n("i-switch",{attrs:{size:"large"},model:{value:t.equityAwardsCost,callback:function(e){t.equityAwardsCost=e},expression:"equityAwardsCost"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("income.open")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("income.close")))])]),t._v("\n      "+t._s(t.$t("balance.equity-awards-as-vest-cost"))+"\n    ")],1):t._e()],1),t._v(" "),n("div",{attrs:{id:"investment"}})],1)}),[],!1,null,null,null);e.default=component.exports}}]);