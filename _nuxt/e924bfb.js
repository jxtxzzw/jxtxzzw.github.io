(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1608:function(e,t,r){"use strict";r.r(t);r(166),r(150);var n=r(41);r(109),r(122),r(86),r(103),r(134),r(120),r(121);function o(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,d=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){d=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(d)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var l="ALL_ACCUMULATED";function d(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},c=o(e);try{for(c.s();!(t=c.n()).done;){var l=t.value,d=l.year,v=parseFloat(l.amount),h=l.type;d in n||(n[d]={}),h in n[d]||(n[d][h]=r?{}:0);var y=parseFloat(l.currency_weight);if(r){var f=l.currency;f in n[d][h]||(n[d][h][f]={amount:0,weightedAmount:0}),n[d][h][f].amount+=v,n[d][h][f].weightedAmount+=v*y}else n[d][h]+=v*y}}catch(e){c.e(e)}finally{c.f()}var data=[];for(var m in n)for(var _ in n[m])if(r)for(var w in n[m][_])data.push({year:m,type:_,currency:w,amount:n[m][_][w].amount,weightedAmount:n[m][_][w].weightedAmount});else data.push({year:m,type:_,amount:n[m][_]});return data}function v(){return.75*(document.body.clientHeight-64-24-24-24-24-24)}function h(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"container",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["#74CBED","#FF6B3B","#247FEA","#F6C022","#AE0025","#7666F9","#9967BD","#E19348","#FF9EC6","#76523B","#585853","#6395F9","#62DAAB"],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=e.$g2.Chart,data=d(t,c),h=new l({container:n,autoFit:!0,height:v()});return h.data(data),h.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}}),h.scale(c?"weightedAmount":"amount",{alias:"金额",formatter:function(e){return e=parseFloat(e).toFixed(2)}}),h.axis("year",{tickLine:null}),h.axis(c?"weightedAmount":"amount",{title:{offset:80,style:{fill:"#aaaaaa"}}}),h.tooltip({shared:!1,showMarkers:!0,showTitle:!0}),h.interaction("active-region"),h.interaction("element-highlight-by-color"),h.interaction("legend-highlight"),h.interaction("axis-label-highlight"),r=c?[{type:"dodge",dodgeBy:"currency",marginRatio:0},{type:"stack"}]:"stack",h.interval().adjust(r).position("year*".concat(c?"weightedAmount":"amount")).color("type",o).label("value",(function(){return{position:"middle",offset:0,content:function(e){var t=parseFloat(e.amount).toFixed(2);return c?"".concat(e.currency," ").concat(t):t},style:{stroke:"#fff"}}})),h.render(),h}function y(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},c=0,l=o(e);try{for(l.s();!(t=l.n()).done;){var d=t.value,v=d.category,h=parseFloat(d.amount);if(v in n||(n[v]=r?{}:0),!(h<=0)){var y=parseFloat(d.currency_weight);if(r){var f=d.currency;f in n[v]||(n[v][f]={amount:0,weightedAmount:0}),n[v][f].amount+=h,n[v][f].weightedAmount+=h*y}else n[v]+=h*y,c+=h*y}}}catch(e){l.e(e)}finally{l.f()}if(r){var m=[],_=[],w=[];for(var A in n)for(var F in n[A]){m.includes(F)||m.push(F);var C=n[A][F].amount,x=n[A][F].weightedAmount;C>0&&_.push({category:A,amount:C,weightedAmount:x,currency:"".concat(A," - ").concat(F)})}for(var $=0,B=m;$<B.length;$++){var k=B[$];for(var Y in n)if(n[Y][k]){var T=n[Y][k].amount,E=n[Y][k].weightedAmount;T>0&&w.push({category:"".concat(k," - ").concat(Y),amount:T,weightedAmount:E,currency:k})}}return[_,w]}var data=[];for(var I in n){var D=n[I];D>0&&data.push({category:I,amount:D,percent:D/c})}return data}function f(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.$g2.Chart,c=e.$dataset.DataView,l=new o({container:"basic-category",autoFit:!0,height:v()});if(r){var d=["#e57575","#96ef78","#ba75e8","#7af1e0","#ccec68","#768dea","#e573de","#626114","#b0adad","#f1c265","#672323","#7e6767"],h=y(t,r),f=Object(n.a)(h,2),m=f[0],_=f[1],w=l.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},padding:[0,10,40,60]}),A=new c;A.source(m).transform({type:"percent",field:"weightedAmount",dimension:"category",as:"percent"}),w.data(A.rows),w.interval().adjust("stack").position("percent").color("category").label("percent",{content:function(data){return"".concat(data.category,": ").concat(parseFloat(100*data.percent).toFixed(2),"%")}}),w.scale({percent:{formatter:function(e){return e=parseFloat(100*e).toFixed(2)+"%"}}}),w.coordinate("theta",{radius:.5}),w.tooltip({showTitle:!0,showMarkers:!0}),w.interaction("element-active");var F=l.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},padding:[0,10,40,60]}),C=new c;C.source(m).transform({type:"percent",field:"weightedAmount",dimension:"currency",as:"percent"}),F.data(C.rows),F.scale({percent:{formatter:function(e){return e=parseFloat(100*e).toFixed(2)+"%"}}}),F.coordinate("theta",{innerRadius:.5/.75,radius:.75}),F.interval().adjust("stack").position("percent").color("currency",d).label("currency").tooltip("currency*percent",(function(e,t){return{name:e,value:t=(100*t).toFixed(2)+"%"}})).style({lineWidth:1,stroke:"#fff"});var x=l.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},padding:[0,10,40,60]}),$=new c;$.source(_).transform({type:"percent",field:"weightedAmount",dimension:"currency",as:"percent"}),x.data($.rows),x.interval().adjust("stack").position("percent").color("currency").label("percent",{content:function(data){return"".concat(data.currency,": ").concat(parseFloat(100*data.percent).toFixed(2),"%")}}),x.scale({percent:{formatter:function(e){return e=parseFloat(100*e).toFixed(2)+"%"}}}),x.coordinate("theta",{radius:.5}),x.tooltip({showTitle:!0,showMarkers:!0}),x.interaction("element-active");var B=l.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},padding:[0,10,40,60]}),k=new c;k.source(_).transform({type:"percent",field:"weightedAmount",dimension:"category",as:"percent"}),B.data(k.rows),B.scale({percent:{formatter:function(e){return e=parseFloat(100*e).toFixed(2)+"%"}}}),B.coordinate("theta",{innerRadius:.5/.75,radius:.75}),B.interval().adjust("stack").position("percent").color("category",d).label("category").tooltip("category*percent",(function(e,t){return{name:e,value:t=(100*t).toFixed(2)+"%"}})).style({lineWidth:1,stroke:"#fff"})}else{var data=y(t,r),Y=new c;Y.source(data).transform({type:"percent",field:"amount",dimension:"category",as:"percent"}),l.data(Y.rows),l.interval().adjust("stack").position("percent").color("category").label("percent",{content:function(data){return"".concat(data.category,": ").concat(parseFloat(100*data.percent).toFixed(2),"%")}}),l.scale({percent:{formatter:function(e){return e=parseFloat(100*e).toFixed(2)+"%"}}}),l.coordinate("theta",{radius:.5}),l.legend(!1),l.tooltip({showTitle:!0,showMarkers:!0}),l.interaction("element-active")}return l.legend(!1),l.render(),l}function m(e,t){var r=new(0,e.$g2.Chart)({container:"all-accumulated",autoFit:!0,height:v()}),data=function(e){var t,r=[],n={},c=9999,d=0,v=o(e);try{for(v.s();!(t=v.n()).done;){var h,y=o(t.value);try{for(y.s();!(h=y.n()).done;){var f=h.value,m=parseInt(f.year),_=parseFloat(f.amount);m<c&&(c=m),m>d&&(d=m),m in n||(n[m]={});var w=parseFloat(f.currency_weight),A=f.currency;r.includes(A)||r.push(A),n[m][A]||(n[m][A]={amount:0,weightedAmount:0}),n[m][A].amount+=_,n[m][A].weightedAmount+=_*w}}catch(e){y.e(e)}finally{y.f()}}}catch(e){v.e(e)}finally{v.f()}for(var F={},C=0,x=r;C<x.length;C++)F[x[C]]=0;for(var data=[],i=c;i<=d;i++)if(i in n){var $,B=o(r);try{for(B.s();!($=B.n()).done;){var k=$.value;data.push({year:i,currency:k,value:k in n[i]?parseFloat(n[i][k].amount):0}),F[k]+=k in n[i]?parseFloat(n[i][k].weightedAmount):0,data.push({year:i,currency:"WEIGHTED_".concat(k,"_").concat(l),value:F[k]})}}catch(e){B.e(e)}finally{B.f()}}return data}(t);return r.data(data),r.tooltip({showCrosshairs:!0,shared:!0}),r.axis("value",{label:{formatter:function(e){return e}}}),r.line().position("year*value").color("currency").shape("smooth"),r.point().position("year*value").color("currency").shape("circle").style({stroke:"#fff",lineWidth:1}),r.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}}),r.render(),r}function _(e,t){var r=e.$g2.Chart,n=e.$dataset.DataView,c=function(e){var t,r={},n=o(e);try{for(n.s();!(t=n.n()).done;){var c=t.value,l=parseFloat(c.amount);void 0!==c.currency_weight&&null!==c.currency_weight&&(l*=parseFloat(c.currency_weight));var d=c.type,v=c.platform;v in r||(r[v]={},r[v].value=0,r[v].children={}),r[v].value+=l,d in r[v].children||(r[v].children[d]=0),r[v].children[d]+=l}}catch(e){n.e(e)}finally{n.f()}var data=[];for(var h in r){var y={name:h,brand:h,value:r[h].value,children:[]};for(var f in r[h].children)y.children.push({name:h+" - "+f,value:r[h].children[f]});data.push(y)}return data.sort((function(a,b){return b.value-a.value})),data}(t);c.forEach((function(td){td.value=0}));var data={name:"root",children:c},l=new n;l.source(data,{type:"hierarchy"}).transform({field:"value",type:"hierarchy.treemap",tile:"treemapResquarify",as:["x","y"]});var d,h=[],y=o(l.getAllNodes());try{for(y.s();!(d=y.n()).done;){var f=d.value;if(!f.children){var m={name:f.data.name,x:f.x,y:f.y,depth:f.depth,value:f.value};!f.data.brand&&f.parent?m.brand=f.parent.data.brand:m.brand=f.data.brand,h.push(m)}}}catch(e){y.e(e)}finally{y.f()}var _=new r({container:"advanced-platform",autoFit:!0,height:v()});return _.coordinate().scale(1,-1),_.data(h),_.axis(!1),_.legend({position:"bottom"}),_.tooltip({showTitle:!1,showMarkers:!1}),_.polygon().position("x*y").color("brand").tooltip("name*value",(function(e,t){return{name:e,value:parseFloat(t).toFixed(2)}})).style({lineWidth:1,stroke:"#fff"}).label("name",{offset:0,style:{textBaseline:"middle",fill:"#000",shadowBlur:10,shadowColor:"#fff"},layout:{type:"limit-in-shape"}}),_.interaction("element-active"),_.render(),_}function w(e,t){var r=new(0,e.$g2.Chart)({container:"balance",autoFit:!0,height:v()}),data=function(e){var t,r="WEIGHTED_".concat(l),n=[r],c=[],d=o(e);try{for(d.s();!(t=d.n()).done;){var v=t.value;c[v.date]||(c[v.date]={WEIGHTED_ALL_ACCUMULATED:0}),n.includes(v.currency)||n.push(v.currency),c[v.date][v.currency]=parseFloat(v.amount),c[v.date][r]+=parseFloat(v.amount*v.currency_weight)}}catch(e){d.e(e)}finally{d.f()}var data=[];for(var h in c){var y,f=o(n);try{for(f.s();!(y=f.n()).done;){var m=y.value;data.push({date:h,currency:m,value:m in c[h]?parseFloat(c[h][m]):0})}}catch(e){f.e(e)}finally{f.f()}}return data}(t);return r.data(data),r.scale("value",{nice:!0}),r.tooltip({showCrosshairs:!0,shared:!0}),r.area().adjust("stack").position("date*value").color("currency"),r.line().adjust("stack").position("date*value").color("currency"),r.interaction("element-highlight"),r.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}}),r.render(),r}var A=r(426),F={name:"Income",data:function(){return{currencyBasicYear:!0,currencyBasicCategory:!0,currencyAdvancedYear:!0,currencyAdvancedPlatform:!1,currencyAllAccumulated:!0,currencyBalance:!0,oldChart:{allAccumulated:void 0,incomeChartForYearAndType:void 0,incomeChartForBasicCategory:void 0,advancedIncomeChartForYearAndType:void 0,advancedIncomeChartForAdvancedPlatform:void 0,balance:void 0}}},watch:{currencyBasicYear:function(){this.renderAllCharts(["basic-year"])},currencyBasicCategory:function(){this.renderAllCharts(["basic-category"])},currencyAdvancedYear:function(){this.renderAllCharts(["advanced-year"])}},mounted:function(){this.renderAllCharts()},methods:{renderAllCharts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["basic-year","basic-category","advanced-year","advanced-platform","all-accumulated","balance"];e.includes("basic-year")&&(this.oldChart.incomeChartForYearAndType&&this.oldChart.incomeChartForYearAndType.destroy(),this.oldChart.incomeChartForYearAndType=h(this,A.income,"basic-year",void 0,this.currencyBasicYear)),e.includes("basic-category")&&(this.oldChart.incomeChartForBasicCategory&&this.oldChart.incomeChartForBasicCategory.destroy(),this.oldChart.incomeChartForBasicCategory=f(this,A.income,this.currencyBasicCategory)),e.includes("advanced-year")&&(this.oldChart.advancedIncomeChartForYearAndType&&this.oldChart.advancedIncomeChartForYearAndType.destroy(),this.oldChart.advancedIncomeChartForYearAndType=h(this,A.advancedIncome,"advanced-year",void 0,this.currencyAdvancedYear)),e.includes("advanced-platform")&&(this.oldChart.advancedIncomeChartForAdvancedPlatform=_(this,A.advancedIncome)),e.includes("all-accumulated")&&(this.oldChart.allAccumulated=m(this,[A.income,A.advancedIncome])),e.includes("balance")&&(this.oldChart.balance=w(this,A.balance)),window.dispatchEvent(new Event("resize"))}}},C=F,x=r(147),component=Object(x.a)(C,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Divider",[e._v(e._s(e.$t("income.basic-year")))]),e._v(" "),r("Alert",{attrs:{type:"info"}},[e._v("\n    "+e._s(e.$t("income.currency"))+"\n    "),r("i-switch",{attrs:{size:"large","true-value":!0,"false-value":!1},model:{value:e.currencyBasicYear,callback:function(t){e.currencyBasicYear=t},expression:"currencyBasicYear"}},[r("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("income.open")))]),e._v(" "),r("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("income.close")))])])],1),e._v(" "),r("div",{attrs:{id:"basic-year"}}),e._v(" "),r("Divider",[e._v(e._s(e.$t("income.basic-category")))]),e._v(" "),r("Alert",{attrs:{type:"info"}},[e._v("\n    "+e._s(e.$t("income.currency"))+"\n    "),r("i-switch",{attrs:{size:"large","true-value":!0,"false-value":!1},model:{value:e.currencyBasicCategory,callback:function(t){e.currencyBasicCategory=t},expression:"currencyBasicCategory"}},[r("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("income.open")))]),e._v(" "),r("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("income.close")))])])],1),e._v(" "),r("div",{attrs:{id:"basic-category"}}),e._v(" "),r("Divider",[e._v(e._s(e.$t("income.advanced-year")))]),e._v(" "),r("Alert",{attrs:{type:"info"}},[e._v("\n    "+e._s(e.$t("income.currency"))+"\n    "),r("i-switch",{attrs:{size:"large","true-value":!0,"false-value":!1},model:{value:e.currencyAdvancedYear,callback:function(t){e.currencyAdvancedYear=t},expression:"currencyAdvancedYear"}},[r("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("income.open")))]),e._v(" "),r("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("income.close")))])])],1),e._v(" "),r("div",{attrs:{id:"advanced-year"}}),e._v(" "),r("Divider",[e._v(e._s(e.$t("income.advanced-platform")))]),e._v(" "),r("Alert",{attrs:{type:"info"}},[e._v("\n    "+e._s(e.$t("income.currency"))+"\n    "),r("i-switch",{attrs:{size:"large","true-value":!0,"false-value":!1,disabled:""},model:{value:e.currencyAdvancedPlatform,callback:function(t){e.currencyAdvancedPlatform=t},expression:"currencyAdvancedPlatform"}},[r("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("income.open")))]),e._v(" "),r("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("income.close")))])])],1),e._v(" "),r("div",{attrs:{id:"advanced-platform"}}),e._v(" "),r("Divider",[e._v(e._s(e.$t("income.all-accumulated")))]),e._v(" "),r("Alert",{attrs:{type:"info"}},[e._v("\n    "+e._s(e.$t("income.currency"))+"\n    "),r("i-switch",{attrs:{size:"large","true-value":!0,"false-value":!1,disabled:""},model:{value:e.currencyAllAccumulated,callback:function(t){e.currencyAllAccumulated=t},expression:"currencyAllAccumulated"}},[r("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("income.open")))]),e._v(" "),r("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("income.close")))])])],1),e._v(" "),r("div",{attrs:{id:"all-accumulated"}}),e._v(" "),r("Divider",[e._v(e._s(e.$t("income.balance")))]),e._v(" "),r("Alert",{attrs:{type:"info"}},[e._v("\n    "+e._s(e.$t("income.currency"))+"\n    "),r("i-switch",{attrs:{size:"large","true-value":!0,"false-value":!1,disabled:""},model:{value:e.currencyBalance,callback:function(t){e.currencyBalance=t},expression:"currencyBalance"}},[r("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("income.open")))]),e._v(" "),r("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("income.close")))])])],1),e._v(" "),r("div",{attrs:{id:"balance"}})],1)}),[],!1,null,null,null);t.default=component.exports}}]);