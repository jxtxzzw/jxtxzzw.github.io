(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1466:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"g",(function(){return v})),n.d(t,"e",(function(){return y})),n.d(t,"c",(function(){return F})),n.d(t,"b",(function(){return x})),n.d(t,"d",(function(){return C})),n.d(t,"f",(function(){return j}));var r=n(40),o=(n(136),n(98),n(110),n(99),n(114),n(113),n(70),n(92),n(120),n(111),n(112),n(55));function c(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,d=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){d=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function d(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={},o=c(e);try{for(o.s();!(t=o.n()).done;){var l=t.value,d=l.year,f=parseFloat(l.amount),v=l.type;d in r||(r[d]={}),v in r[d]||(r[d][v]={});var h=n?parseFloat(l.currency_weight):1,y=l.currency;y in r[d][v]||(r[d][v][y]={amount:0,weightedAmount:0}),r[d][v][y].amount+=f,r[d][v][y].weightedAmount+=f*h}}catch(e){o.e(e)}finally{o.f()}var data=[];for(var m in r)for(var F in r[m])for(var w in r[m][F])data.push({year:m,type:F,currency:w,amount:r[m][F][w].amount,weightedAmount:r[m][F][w].weightedAmount});return data}function f(){return.75*(document.body.clientHeight-64-24-24-24-24-24)}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"container",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["#74CBED","#FF6B3B","#247FEA","#F6C022","#AE0025","#7666F9","#9967BD","#E19348","#FF9EC6","#76523B","#585853","#6395F9","#62DAAB"],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=e.$g2.Chart,data=d(t,o),l=new c({container:n,autoFit:!0,height:f()});l.data(data),l.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}}),l.scale("weightedAmount",{alias:"金额",nice:!0,formatter:function(e){return e=parseFloat(parseFloat(e).toFixed(2))}}),l.axis("weightedAmount",{title:{offset:80,style:{fill:"#aaaaaa"}}}),l.scale("year",{nice:!0}),l.axis("year",{tickLine:null}),l.tooltip({shared:!1,showMarkers:!0,showTitle:!0}),l.interaction("active-region"),l.interaction("element-highlight-by-color"),l.interaction("legend-highlight"),l.interaction("axis-label-highlight");var v=[{type:"dodge",dodgeBy:"currency",marginRatio:0},{type:"stack"}];return l.interval().adjust(v).position("year*weightedAmount").color("type",r).label("value",(function(){return{position:"middle",offset:0,content:function(e){var t=parseFloat(parseFloat(e.amount).toFixed(2)),n=parseFloat(parseFloat(e.weightedAmount).toFixed(2));return"".concat(e.currency," ").concat(t," \n (").concat(n,")")},style:{stroke:"#fff"}}})),l.render(),l}function h(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={},l=c(e);try{for(l.s();!(n=l.n()).done;){var d=n.value,f=d.category,v=parseFloat(d.amount);if(f in o||(o[f]={}),!(v<=0)){var h=r?parseFloat(d.currency_weight):1,y=d.currency;y in o[f]||(o[f][y]={amount:0,weightedAmount:0}),o[f][y].amount+=v,o[f][y].weightedAmount+=v*h}}}catch(e){l.e(e)}finally{l.f()}var m,F=c(t);try{for(F.s();!(m=F.n()).done;){var w=m.value,x="被动收入",A=parseFloat(w.amount);if(x in o||(o[x]={}),!(A<=0)){var k=r?parseFloat(w.currency_weight):1,C=w.currency;C in o[x]||(o[x][C]={amount:0,weightedAmount:0}),o[x][C].amount+=A,o[x][C].weightedAmount+=A*k}}}catch(e){F.e(e)}finally{F.f()}var j=[],D=[],$=[];for(var B in o)for(var T in o[B]){j.includes(T)||j.push(T);var W=o[B][T].amount,E=o[B][T].weightedAmount;W>0&&D.push({category:B,amount:W,weightedAmount:E,currency:"".concat(B," - ").concat(T)})}for(var M=0,I=j;M<I.length;M++){var O=I[M];for(var S in o)if(o[S][O]){var _=o[S][O].amount,V=o[S][O].weightedAmount;_>0&&$.push({category:"".concat(O," - ").concat(S),amount:_,weightedAmount:V,currency:O})}}return[D,$]}function y(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=e.$g2.Chart,l=e.$dataset.DataView,d=new c({container:"basic-category",autoFit:!0,height:f()}),v=["#e57575","#96ef78","#ba75e8","#7af1e0","#ccec68","#768dea","#e573de","#626114","#b0adad","#f1c265","#20a0ff","#7e6767"],y=h(t,n,o),m=Object(r.a)(y,2),F=m[0],w=m[1],x=d.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},padding:[0,10,40,60]}),A=new l;A.source(F).transform({type:"percent",field:"weightedAmount",dimension:"category",as:"percent"}),x.data(A.rows),x.interval().adjust("stack").position("percent").color("category").label("percent",(function(e){return{offset:e>.02?-30:30,content:function(data){return"".concat(data.category,": ").concat(parseFloat(100*data.percent).toFixed(2),"%")}}})),x.scale({percent:{formatter:function(e){return e=parseFloat(100*e).toFixed(2)+"%"}}}),x.coordinate("theta",{radius:.5}),x.tooltip({showTitle:!0,showMarkers:!0}),x.interaction("element-active");var k=d.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},padding:[0,10,40,60]}),C=new l;C.source(F).transform({type:"percent",field:"weightedAmount",dimension:"currency",as:"percent"}),k.data(C.rows),k.scale({percent:{formatter:function(e){return e=parseFloat(100*e).toFixed(2)+"%"}}}),k.coordinate("theta",{innerRadius:.5/.75,radius:.75}),k.interval().adjust("stack").position("percent").color("currency",v).label("currency").tooltip("currency*percent",(function(e,t){return{name:e,value:t=(100*t).toFixed(2)+"%"}})).style({lineWidth:1,stroke:"#fff"});var j=d.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},padding:[0,10,40,60]}),D=new l;D.source(w).transform({type:"percent",field:"weightedAmount",dimension:"currency",as:"percent"}),j.data(D.rows),j.interval().adjust("stack").position("percent").color("currency").label("percent",(function(e){return{offset:e>.02?-30:30,content:function(data){return"".concat(data.currency,": ").concat(parseFloat(100*data.percent).toFixed(2),"%")}}})),j.scale({percent:{formatter:function(e){return e=parseFloat(100*e).toFixed(2)+"%"}}}),j.coordinate("theta",{radius:.5}),j.tooltip({showTitle:!0,showMarkers:!0}),j.interaction("element-active");var $=d.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},padding:[0,10,40,60]}),B=new l;return B.source(w).transform({type:"percent",field:"weightedAmount",dimension:"category",as:"percent"}),$.data(B.rows),$.scale({percent:{formatter:function(e){return e=parseFloat(100*e).toFixed(2)+"%"}}}),$.coordinate("theta",{innerRadius:.5/.75,radius:.75}),$.interval().adjust("stack").position("percent").color("category",v).label("category").tooltip("category*percent",(function(e,t){return{name:e,value:t=(100*t).toFixed(2)+"%"}})).style({lineWidth:1,stroke:"#fff"}),d.legend(!1),d.render(),d}function m(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=[],o={},l=9999,d=0,f=c(e);try{for(f.s();!(t=f.n()).done;){var v,h=t.value,y=c(h);try{for(y.s();!(v=y.n()).done;){var m=v.value,F=parseInt(m.year),w=parseFloat(m.amount);F<l&&(l=F),F>d&&(d=F),F in o||(o[F]={});var x=n?parseFloat(m.currency_weight):1,A=m.currency;r.includes(A)||r.push(A),o[F][A]||(o[F][A]={amount:0,weightedAmount:0}),o[F][A].amount+=w,o[F][A].weightedAmount+=w*x}}catch(e){y.e(e)}finally{y.f()}}}catch(e){f.e(e)}finally{f.f()}for(var k={},C=0,j=r;C<j.length;C++){var D=j[C];k[D]=0}for(var data=[],i=l;i<=d;i++)if(i in o){var $,B=c(r);try{for(B.s();!($=B.n()).done;){var T=$.value,W=T in o[i]?parseFloat(o[i][T].weightedAmount):0;W=parseFloat(parseFloat(W).toFixed(2)),data.push({year:i,currency:T,value:W}),k[T]+=parseFloat(W),W=parseFloat(parseFloat(k[T]).toFixed(2)),data.push({year:i,currency:"".concat(T,"_(ACCUMULATED)"),value:W})}}catch(e){B.e(e)}finally{B.f()}}return data}function F(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.$g2.Chart,o=new r({container:"all-accumulated",autoFit:!0,height:f()}),data=m(t,n);return o.data(data),o.tooltip({showCrosshairs:!0,shared:!0}),o.scale("value",{nice:!0}),o.scale("date",{nice:!0}),o.axis("value",{label:{formatter:function(e){return parseFloat(e).toFixed(2)}}}),o.line().position("year*value").color("currency").shape("smooth"),o.point().position("year*value").color("currency").shape("circle").style({stroke:"#fff",lineWidth:1}),o.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}}),o.render(),o}function w(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},o=c(e);try{for(o.s();!(t=o.n()).done;){var l=t.value,d=parseFloat(l.amount);if(!(d<0)){void 0!==l.currency_weight&&null!==l.currency_weight&&(d*=n?parseFloat(l.currency_weight):1);var f=l.type,v=l.platform;v in r||(r[v]={},r[v].value=0,r[v].children={}),r[v].value+=d,f in r[v].children||(r[v].children[f]=0),r[v].children[f]+=d}}}catch(e){o.e(e)}finally{o.f()}var data=[];for(var h in r){var y={name:h,brand:h,value:r[h].value,children:[]};for(var m in r[h].children)y.children.push({name:"".concat(h," - ").concat(m),value:r[h].children[m]});data.push(y)}return data.sort((function(a,b){return b.value-a.value})),data}function x(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.$g2.Chart,o=e.$dataset.DataView,l=w(t,n);l.forEach((function(td){td.value=0}));var data={name:"root",children:l},d=new o;d.source(data,{type:"hierarchy"}).transform({field:"value",type:"hierarchy.treemap",tile:"treemapResquarify",as:["x","y"]});var v,h=[],y=c(d.getAllNodes());try{for(y.s();!(v=y.n()).done;){var m=v.value;if(!m.children){var F={name:m.data.name,x:m.x,y:m.y,depth:m.depth,value:m.value};!m.data.brand&&m.parent?F.brand=m.parent.data.brand:F.brand=m.data.brand,h.push(F)}}}catch(e){y.e(e)}finally{y.f()}var x=new r({container:"advanced-platform",autoFit:!0,height:f()});return x.coordinate().scale(1,-1),x.data(h),x.axis(!1),x.legend({position:"bottom"}),x.tooltip({showTitle:!1,showMarkers:!1}),x.polygon().position("x*y").color("brand").tooltip("name*value",(function(e,t){return{name:e,value:"(".concat(parseFloat(t).toFixed(2),")")}})).style({lineWidth:1,stroke:"#fff"}).label("name",{offset:0,style:{textBaseline:"middle",fill:"#000",shadowBlur:10,shadowColor:"#fff"},layout:{type:"limit-in-shape"}}),x.interaction("element-active"),x.render(),x}function A(e,t){var n,r=[],o=[],l=c(e);try{for(l.s();!(n=l.n()).done;){var d=n.value;if(!d.pending||t){o[d.date]||(o[d.date]={}),r.includes(d.currency)||r.push(d.currency);var f=parseFloat(d.amount),v=parseFloat(d.currency_weight);o[d.date][d.currency]||(o[d.date][d.currency]={amount:0,weightedAmount:0}),o[d.date][d.currency].amount+=f,o[d.date][d.currency].weightedAmount+=f*v}}}catch(e){l.e(e)}finally{l.f()}var data=[];for(var h in o){var y,m=c(r);try{for(m.s();!(y=m.n()).done;){var F=y.value,a=F in o[h]?parseFloat(o[h][F].amount):0;a=parseFloat(parseFloat(a).toFixed(2));var w=F in o[h]?parseFloat(o[h][F].weightedAmount):0;w=parseFloat(parseFloat(w).toFixed(2)),data.push({date:h,currency:F,value:w,originalAmount:a})}}catch(e){m.e(e)}finally{m.f()}}return data}function k(e,t,n){return n.indexOf(e)===t}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=document.getElementById("balance");r.innerHTML="\n<div id='app-container-balance'>\n  <div id='g2-customize-tooltip-balance'></div>\n  <div id='g2-container-balance'></div>\n</div>\n";var l=e.$g2.Chart,d=e.$dataset.DataView,v=new l({container:"g2-container-balance",autoFit:!0,height:f()}),data=A(t,n);v.data(data),v.scale("value",{nice:!0}),v.scale("date",{nice:!0,type:"time"}),v.tooltip({showCrosshairs:!0,shared:!0}),v.area().adjust("stack").position("date*value").color("currency"),v.line().adjust("stack").position("date*value").color("currency"),v.interaction("element-highlight"),v.axis("value",{label:{formatter:function(e){return parseFloat(e).toFixed(2)}}}),v.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}});var h=document.getElementById("g2-customize-tooltip-balance");function y(data){var title=data.title,e=data.items;return"\n    <div class='tooltip-title'>".concat(title,"</div>\n    <div class='tooltip-items'>\n      ").concat(e.map((function(e){var t=e.color,n=e.name,r=e.value,o=e.data.originalAmount;return"\n        <div class='tooltip-item' style='border-left: 2px solid ".concat(t,"'>\n          <div class='tooltip-item-name'>").concat(n," (Weighted ").concat(n,")</div>\n          <div class='tooltip-item-value'>").concat(o," (").concat(r,")</div>\n        </div>\n        ")})).join(""),"\n    </div>\n  ")}var m=data[data.length-1].date;v.on("afterrender",(function(){var e=data.filter((function(e){return e.date===m})).map((function(e){return{name:e.currency,value:e.value,data:{originalAmount:e.originalAmount}}}));h.innerHTML=y({title:m,items:e})})),v.on("tooltip:change",(function(e){h.innerHTML=y(e.data)}));var F,w="9999-12-31",x="0000-01-01",C=[],j=0,D=c(data);try{for(D.s();!(F=D.n()).done;){var $=F.value;$.date>x&&(x=$.date),$.date<w&&(w=$.date),C[$.date]?C[$.date]+=parseFloat($.value):C[$.date]=parseFloat($.value),j+=parseFloat($.value)}}catch(e){D.e(e)}finally{D.f()}var B=data.map((function(e){return e.date})).filter(k).length,T=j/B;v.annotation().line({top:!0,start:[w,T],end:[x,T],style:{stroke:"#c849ff",lineWidth:1,lineDash:[3,5]},text:{position:"end",style:{fill:"#c849ff",fontSize:12,fontWeight:300},content:"".concat(e.$t("income.average-line"),"\n").concat(parseFloat(T).toFixed(2)),offsetX:-20,offsetY:-5}}),j=0;var W,E,M=0;for(var I in C){var O=(j+=C[I])/(M+=1);W||(W=I,E=O),v.annotation().line({top:!0,start:[W,E],end:[I,O],style:{stroke:"#c849ff",lineWidth:1,lineDash:[5,5]}}),W=I,E=O}var S=7776e6,_=[];for(var V in C){var z=(Date.parse(V)-Date.parse(w))/S;_.push({datum:z,value:parseFloat(C[V])})}var L=(new d).source(_);L.transform({type:"regression",method:"polynomial",fields:["datum","value"],bandwidth:1,as:["datum","value"]});var H=L.rows.map((function(e){return{date:Object(o.a)(new Date(Date.parse(Object(o.a)(new Date(w)))+e.datum*S)),value:e.value}}));for(var R in H){var U=H[R],J=0===parseInt(R)?U:H[R-1];v.annotation().line({top:!0,start:[U.date,U.value],end:[J.date,J.value],style:{stroke:"#ffbd49",lineWidth:1,lineDash:[5,3]}})}return v.annotation().text({content:"".concat(e.$t("income.prediction-line"),"\n").concat(H[H.length-1].value),top:!0,position:[H[H.length-1].date,H[H.length-1].value],style:{fill:"#ffbd49",fontSize:12,fontWeight:300},offsetY:-5}),v.render(),v}function j(e,t){var n=function(e,t){var n,r=t.$t("income.taxable"),o=[],l=[],d=c(e);try{for(d.s();!(n=d.n()).done;){var f=n.value;o.includes(f.currency)||o.push(f.currency),parseFloat(f.amount)<0&&!l.includes(f.category)&&l.push(f.category)}}catch(e){d.e(e)}finally{d.f()}var v,h=[r].concat(l),y={},m=c(h);try{for(m.s();!(v=m.n()).done;){var F=v.value;y[F]={};var w,x=c(o);try{for(x.s();!(w=x.n()).done;){var A=w.value;y[F][A]=0}}catch(e){x.e(e)}finally{x.f()}}}catch(e){m.e(e)}finally{m.f()}var k,C=c(e);try{for(C.s();!(k=C.n()).done;){var j=k.value,D=parseFloat(j.amount);if(D>0&&j.taxable){y[r][j.currency]+=D;var $,B=c(l);try{for(B.s();!($=B.n()).done;)y[$.value][j.currency]+=D}catch(e){B.e(e)}finally{B.f()}}else if(l.includes(j.category))for(var i=l.indexOf(j.category);i<l.length;i++)y[l[i]][j.currency]+=D}}catch(e){C.e(e)}finally{C.f()}var T,data=[],W=c(h.reverse());try{for(W.s();!(T=W.n()).done;){var E,M=T.value,I=c(o);try{for(I.s();!(E=I.n()).done;){var O=E.value;data.push({type:M===r?M:t.$t("income.after-what",{what:M}),currency:O,value:y[M][O]})}}catch(e){I.e(e)}finally{I.f()}}}catch(e){W.e(e)}finally{W.f()}return[data,y[r]]}(t,e),o=Object(r.a)(n,2),data=o[0],base=o[1],l=new(0,e.$g2.Chart)({container:"tax-deduction",autoFit:!0,height:f(),padding:[30,120,95]}),d=0,v=Object.keys(base).length,h=function(e){var t=l.createView({region:{start:{x:d/v,y:0},end:{x:(d+1)/v,y:1}},padding:[0,10,40,60]});d++;var n=data.filter((function(t){return t.currency===e}));t.data(n),t.axis(!1),t.tooltip({showMarkers:!1,showTitle:!1,itemTpl:'<li class="g2-tooltip-list-item" data-index={index} style="margin-bottom:4px;"><span style="background-color:{color};" class="g2-tooltip-marker"></span><br/><span style="padding-left: 16px">{value}</span><br/><span style="padding-left: 16px">{name}</span></li>'}),t.coordinate("rect").transpose().scale(-1,1),t.interval().adjust("symmetric").position("type*value").color("type",["#69C0FF","#40A9FF","#1890FF","#0050B3","#0C3967FF"]).shape("funnel").tooltip("currency*type*value",(function(e,t,n){return{name:e,value:"".concat(n.toFixed(2)," (").concat((100*parseFloat(n)/parseFloat(base[e])).toFixed(2),"%)")}})).label("currency").style({lineWidth:1,stroke:"#fff"}).animate({appear:{animation:"fade-in"},update:{annotation:"fade-in"}}),t.removeInteraction("element-active");var r,o=c(n);try{for(o.s();!(r=o.n()).done;){var f=r.value;t.annotation().text({top:!0,position:[f.type,"center"],content:"".concat(f.type,"\n").concat(parseFloat(f.value).toFixed(2),"\n(").concat((100*parseFloat(f.value)/parseFloat(base[f.currency])).toFixed(2),"%)"),style:{fill:"#fff",stroke:null,fontSize:12,textAlign:"center",shadowBlur:2,shadowColor:"rgba(0, 0, 0, .45)"}})}}catch(e){o.e(e)}finally{o.f()}};for(var y in base)h(y);return l.removeInteraction("legend-filter"),l.render(),l}}}]);