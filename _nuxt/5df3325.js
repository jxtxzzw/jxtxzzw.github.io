(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1467:function(t,e,n){var content=n(1494);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(135).default)("60dd175a",content,!0,{sourceMap:!1})},1493:function(t,e,n){"use strict";n(1467)},1494:function(t,e,n){var o=n(134)(!1);o.push([t.i,"#app-container-balance{display:flex;flex-direction:column;width:100%;height:100%}#g2-container-balance{flex:auto}#g2-customize-tooltip-balance{margin-bottom:16px;font-size:12px}#g2-customize-tooltip-balance .tooltip-items{display:flex;flex-direction:row}#g2-customize-tooltip-balance .tooltip-item{flex-basis:240px;padding-left:8px;margin-right:12px}#g2-customize-tooltip-balance .tooltip-item .tooltip-item-value{font-size:16px;font-weight:700}#g2-customize-tooltip-balance .tooltip-item-info{display:flex;justify-content:space-between}#g2-customize-tooltip-balance .tooltip-item-info .info-item{display:flex}#g2-customize-tooltip-balance .tooltip-item-info .info-item .info-item-name{opacity:.65}#g2-customize-tooltip-balance .tooltip-item-info .info-item .info-item-value{margin-left:8px}",""]),t.exports=o},1520:function(t,e,n){"use strict";n.r(e);n(152),n(136),n(114),n(93),n(102),n(101),n(70),n(83),n(113),n(99),n(100);var o=n(39),r=n(1464);function l(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,d=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){d=!0,r=t},f:function(){try{l||null==n.return||n.return()}finally{if(d)throw r}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var d=["#A0DC2C","#FF6500","#0059FF"];function f(t,e){var n,o=[],r=[],c=l(t);try{for(c.s();!(n=c.n()).done;){var d=n.value;if(!d.pending||e){r[d.date]||(r[d.date]={}),o.includes(d.currency)||o.push(d.currency);var f=parseFloat(d.amount),h=parseFloat(d.currency_weight);r[d.date][d.currency]||(r[d.date][d.currency]={amount:0,weightedAmount:0}),r[d.date][d.currency].amount+=f,r[d.date][d.currency].weightedAmount+=f*h}}}catch(t){c.e(t)}finally{c.f()}var data=[];for(var v in r){var m,y=l(o);try{for(y.s();!(m=y.n()).done;){var w=m.value,a=w in r[v]?parseFloat(r[v][w].amount):0;a=parseFloat(a.toFixed(2));var x=w in r[v]?parseFloat(r[v][w].weightedAmount):0;x=parseFloat(x.toFixed(2)),data.push({date:v,currency:w,value:x,originalAmount:a})}}catch(t){y.e(t)}finally{y.f()}}return data}function h(t,e,n){return n.indexOf(t)===e}function v(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=document.getElementById("balance");c.innerHTML="\n<div id='app-container-balance'>\n  <div id='g2-customize-tooltip-balance'></div>\n  <div id='g2-container-balance'></div>\n</div>\n";var v=t.$g2.Chart,m=t.$dataset.DataView,y=new v({container:"g2-container-balance",autoFit:!0,height:Object(r.a)("g2-container-balance")}),data=f(e,n);y.data(data),y.scale("value",{nice:!0}),y.scale("date",{nice:!0,type:"time"}),y.tooltip({showCrosshairs:!0,shared:!0}),y.area().adjust("stack").position("date*value").color("currency",d),y.line().adjust("stack").position("date*value").color("currency",d),y.interaction("element-highlight"),y.axis("value",{label:{formatter:function(t){return parseFloat(t).toFixed(2)}}}),y.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}});var w=document.getElementById("g2-customize-tooltip-balance");function x(data){var title=data.title,t=data.items,e=0,n="".concat(t.map((function(t){var n=t.color,o=t.name,r=t.value,l=t.data.originalAmount;return e+=parseFloat(r),"\n        <div class='tooltip-item' style='border-left: 2px solid ".concat(n,"'>\n          <div class='tooltip-item-name'>").concat(o," (Weighted ").concat(o,")</div>\n          <div class='tooltip-item-value'>").concat(l," (").concat(r,")</div>\n        </div>\n        ")})).join(""));return"\n    <div class='tooltip-title'>".concat(title,"</div>\n    <div class='tooltip-items'>\n      <div class='tooltip-item' style='border-left: 2px solid #2B2B2B'>\n          <div class='tooltip-item-name'>(Weighted Sum)</div>\n          <div class='tooltip-item-value'>(").concat(e.toFixed(2),")</div>\n        </div>\n      ").concat(n,"\n    </div>\n  ")}var C=data[data.length-1].date;if(y.on("afterrender",(function(){var t=data.filter((function(t){return t.date===C})).map((function(t){return{name:t.currency,value:t.value,data:{originalAmount:t.originalAmount}}}));w.innerHTML=x({title:C,items:t})})),y.on("tooltip:change",(function(t){w.innerHTML=x(t.data)})),t.showAnnotationCheck){var A,F="9999-12-31",k="0000-01-01",z=[],_=[],D=[1],j=0,$=-1,S=l(data);try{for(S.s();!(A=S.n()).done;){var W=A.value;if(W.date>k&&(k=W.date),W.date<F&&(F=W.date),z[W.date]?z[W.date]+=parseFloat(W.value):z[W.date]=parseFloat(W.value),_[W.date])_[W.date]+=parseFloat(W.value)*D[$];else{if(++$===D.length){var O=1.1*D[$-1];D.push(O)}_[W.date]=parseFloat(W.value)*D[$]}j+=parseFloat(W.value)}}catch(t){S.e(t)}finally{S.f()}var B=data.map((function(t){return t.date})).filter(h).length,E=j/B;y.annotation().line({top:!0,start:[F,E],end:[k,E],style:{stroke:"#c849ff",lineWidth:1,lineDash:[2,6]},text:{position:"end",style:{fill:"#c849ff",fontSize:12,fontWeight:300},content:"".concat(t.$t("income.average-line"),"\n").concat(E.toFixed(2)),offsetX:-20,offsetY:-5}}),j=0;var I,M,P,T=0,H=0,L=0;for(var Y in z){j+=z[Y],T+=_[Y],L+=D[H];var J=j/(H+=1),X=T/L;I||(I=Y,M=J,P=X),y.annotation().line({top:!0,start:[I,M],end:[Y,J],style:{stroke:"#c849ff",lineWidth:1,lineDash:[5,5]}}),y.annotation().line({top:!0,start:[I,P],end:[Y,X],style:{stroke:"#01376e",lineWidth:1,lineDash:[8,5]}}),I=Y,M=J,P=X}y.annotation().line({top:!0,start:[I,P],end:[I,P],style:{stroke:"",lineWidth:1,lineDash:[8,5]},text:{position:"end",style:{fill:"#01376e",fontSize:12,fontWeight:300},content:"".concat(t.$t("income.weighted-average-line"),"\n").concat(P.toFixed(2)),offsetX:-20,offsetY:-5}});var U=864e5,V=[];for(var G in z){var K=(Date.parse(G)-Date.parse(F))/U;V.push({datum:K,value:parseFloat(z[G])})}var N=(new m).source(V);N.transform({type:"regression",method:"polynomial",fields:["datum","value"],bandwidth:30,as:["datum","value"]});var Q=N.rows.map((function(t){return{date:Object(o.dateFormat)(new Date(Date.parse(Object(o.dateFormat)(new Date(F)))+t.datum*U)),value:t.value}}));for(var R in Q){var Z=Q[R],tt=0===parseInt(R)?Z:Q[R-1];y.annotation().line({top:!0,start:[Z.date,Z.value],end:[tt.date,tt.value],style:{stroke:"#ffbd49",lineWidth:1,lineDash:[5,3]}})}y.annotation().text({content:"".concat(t.$t("income.prediction-line"),"\n").concat(Q[Q.length-1].value),top:!0,position:[Q[Q.length-1].date,Q[Q.length-1].value],style:{fill:"#ffbd49",fontSize:12,fontWeight:300},offsetY:-5})}return y.render(),y}var m=n(398),y={name:"Balance",data:function(){return{oldChart:{balance:void 0},showPendingCheck:!1,showAnnotationCheck:!0}},watch:{"$i18n.locale":function(){this.renderAllCharts()},showPendingCheck:function(){this.renderAllCharts(["balance"])},showAnnotationCheck:function(){this.renderAllCharts(["balance"])}},mounted:function(){this.renderAllCharts()},methods:{renderAllCharts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["balance"];t.includes("balance")&&(this.oldChart.balance&&this.oldChart.balance.destroy(),this.oldChart.balance=v(this,m.balance,this.showPendingCheck)),window.dispatchEvent(new Event("resize"))}}},w=y,x=(n(1493),n(133)),component=Object(x.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Divider",[t._v(t._s(t.$t("balance.balance")))]),t._v(" "),n("Alert",[n("Checkbox",{model:{value:t.showPendingCheck,callback:function(e){t.showPendingCheck=e},expression:"showPendingCheck"}},[t._v("\n      "+t._s(t.$t("balance.show-pending"))+"\n    ")]),t._v(" "),n("Checkbox",{model:{value:t.showAnnotationCheck,callback:function(e){t.showAnnotationCheck=e},expression:"showAnnotationCheck"}},[t._v("\n      "+t._s(t.$t("balance.show-annotation"))+"\n    ")])],1),t._v(" "),n("div",{attrs:{id:"balance"}})],1)}),[],!1,null,null,null);e.default=component.exports}}]);