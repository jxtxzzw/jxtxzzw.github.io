(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1471:function(t,e,n){var content=n(1499);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(136).default)("60dd175a",content,!0,{sourceMap:!1})},1498:function(t,e,n){"use strict";n(1471)},1499:function(t,e,n){var o=n(135)(!1);o.push([t.i,"#app-container-balance{display:flex;flex-direction:column;width:100%;height:100%}#g2-container-balance{flex:auto}#g2-customize-tooltip-balance{margin-bottom:16px;font-size:12px}#g2-customize-tooltip-balance .tooltip-items{display:flex;flex-direction:row}#g2-customize-tooltip-balance .tooltip-item{flex-basis:240px;padding-left:8px;margin-right:12px}#g2-customize-tooltip-balance .tooltip-item .tooltip-item-value{font-size:16px;font-weight:700}#g2-customize-tooltip-balance .tooltip-item-info{display:flex;justify-content:space-between}#g2-customize-tooltip-balance .tooltip-item-info .info-item{display:flex}#g2-customize-tooltip-balance .tooltip-item-info .info-item .info-item-name{opacity:.65}#g2-customize-tooltip-balance .tooltip-item-info .info-item .info-item-value{margin-left:8px}#app-container-investment{display:flex;flex-direction:column;width:100%;height:100%}#g2-container-investment{flex:auto}#g2-customize-tooltip-investment{margin-bottom:16px;font-size:12px}#g2-customize-tooltip-investment .tooltip-items{display:flex;flex-direction:row}#g2-customize-tooltip-investment .tooltip-item{flex-basis:240px;padding-left:8px;margin-right:12px}#g2-customize-tooltip-investment .tooltip-item .tooltip-item-value{font-size:16px;font-weight:700}#g2-customize-tooltip-investment .tooltip-item-info{display:flex;justify-content:space-between}#g2-customize-tooltip-investment .tooltip-item-info .info-item{display:flex}#g2-customize-tooltip-investment .tooltip-item-info .info-item .info-item-name{opacity:.65}#g2-customize-tooltip-investment .tooltip-item-info .info-item .info-item-value{margin-left:8px}",""]),t.exports=o},1530:function(t,e,n){"use strict";n.r(e);var o=n(198),r=(n(137),n(121),n(101),n(70),n(93),n(83),n(113),n(99),n(100),n(114),n(102),n(37)),l=n(1468);function c(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,r=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw r}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var v=["#A0DC2C","#FF6500","#0059FF"],h=["#FAE423","#653CFA","#2FFAA9","#FA7055","#2382FA","#987346"];function f(t,e,n){var o,r=[],l=[],d=c(t);try{for(d.s();!(o=d.n()).done;){var v=o.value,h=n(v);if(!v.pending||e){l[v.date]||(l[v.date]={}),r.includes(h)||r.push(h);var f=parseFloat(v.amount),m=parseFloat(v.currency_weight);l[v.date][h]||(l[v.date][h]={amount:0,weightedAmount:0}),l[v.date][h].amount+=f,l[v.date][h].weightedAmount+=f*m}}}catch(t){d.e(t)}finally{d.f()}var data=[];for(var y in l){var _,w=c(r);try{for(w.s();!(_=w.n()).done;){var x=_.value,a=x in l[y]?parseFloat(l[y][x].amount):0;a=parseFloat(a.toFixed(2));var C=x in l[y]?parseFloat(l[y][x].weightedAmount):0;C=parseFloat(C.toFixed(2)),data.push({date:y,scope:x,value:C,originalAmount:a})}}catch(t){w.e(t)}finally{w.f()}}return data}function m(t,e,n){return n.indexOf(t)===e}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"currency",e={fieldFn:void 0,color:void 0,getTooltipHTMLFn:void 0};function n(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(data){var title=data.title,n=data.items,o=0,r="".concat(n.map((function(n){var r=n.color,l=n.name,c=n.value,d=n.data.originalAmount;o+=parseFloat(c);var v="",h="";return t&&(v+=l,h+=d),e&&(t&&(v+=" ",h+=" "),v+="(Weighted ".concat(l,")"),h+="(".concat(c,")")),"\n        <div class='tooltip-item' style='border-left: 2px solid ".concat(r,"'>\n          <div class='tooltip-item-name' style='color: ").concat(r,"'>").concat(v,"</div>\n          <div class='tooltip-item-value' style='color: ").concat(r,"'>").concat(h,"</div>\n        </div>\n        ")})).join("")),l="#2B2B2B";return"\n    <div class='tooltip-title'>".concat(title,"</div>\n    <div class='tooltip-items'>\n      <div class='tooltip-item' style='border-left: 2px solid ").concat(l,"'>\n          <div class='tooltip-item-name' style='color: ").concat(l,"'>(Weighted Sum)</div>\n          <div class='tooltip-item-value' style='color: ").concat(l,"'>(").concat(o.toFixed(2),")</div>\n        </div>\n      ").concat(r,"\n    </div>\n  ")}}return"currency"===t?(e.color=v,e.fieldFn=function(t){return String(t.currency)},e.getTooltipHTMLFn=n(!0,!0)):"class"===t&&(e.color=h,e.fieldFn=function(t){return"".concat(t.primary_class,"-").concat(t.secondary_class)},e.getTooltipHTMLFn=n(!1,!0)),e}function _(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"currency",d=document.getElementById("balance");d.innerHTML="\n<div id='app-container-balance'>\n  <div id='g2-customize-tooltip-balance'></div>\n  <div id='g2-container-balance'></div>\n</div>\n";var v=t.$g2.Chart,h=t.$dataset.DataView,_=new v({container:"g2-container-balance",autoFit:!0,height:Object(l.a)("g2-container-balance")}),w=y(o),data=f(e,n,w.fieldFn);_.data(data),_.scale("value",{nice:!0}),_.scale("date",{nice:!0,type:"time"}),_.tooltip({showCrosshairs:!0,shared:!0}),_.area().adjust("stack").position("date*value").color("scope",w.color),_.line().adjust("stack").position("date*value").color("scope",w.color),_.interaction("element-highlight"),_.axis("value",{label:{formatter:function(t){return parseFloat(t).toFixed(2)}}}),_.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}});var x,C=document.getElementById("g2-customize-tooltip-balance"),k=data[data.length-1].date,A=[],F=c(data);try{for(F.s();!(x=F.n()).done;){var $=x.value;A.includes($)||A.push($.scope)}}catch(t){F.e(t)}finally{F.f()}if(_.on("afterrender",(function(){var t=data.filter((function(t){return t.date===k})).map((function(t){return{color:w.color[A.indexOf(t.scope)%w.color.length],name:t.scope,value:t.value,data:{originalAmount:t.originalAmount}}}));C.innerHTML=w.getTooltipHTMLFn({title:k,items:t})})),_.on("tooltip:change",(function(t){C.innerHTML=w.getTooltipHTMLFn(t.data)})),t.showAnnotationCheck){var z,S="9999-12-31",j="0000-01-01",D=[],E=[],P=[1],T=0,M=-1,O=c(data);try{for(O.s();!(z=O.n()).done;){var I=z.value;if(I.date>j&&(j=I.date),I.date<S&&(S=I.date),D[I.date]?D[I.date]+=parseFloat(I.value):D[I.date]=parseFloat(I.value),E[I.date])E[I.date]+=parseFloat(I.value)*P[M];else{if(++M===P.length){var W=1.1*P[M-1];P.push(W)}E[I.date]=parseFloat(I.value)*P[M]}T+=parseFloat(I.value)}}catch(t){O.e(t)}finally{O.f()}var H=data.map((function(t){return t.date})).filter(m).length,L=T/H;_.annotation().line({top:!0,start:[S,L],end:[j,L],style:{stroke:"#c849ff",lineWidth:1,lineDash:[2,6]},text:{position:"end",style:{fill:"#c849ff",fontSize:12,fontWeight:300},content:"".concat(t.$t("income.average-line"),"\n").concat(L.toFixed(2)),offsetX:-20,offsetY:-5}}),T=0;var B,N,Y,J=0,U=0,X=0;for(var V in D){T+=D[V],J+=E[V],X+=P[U];var G=T/(U+=1),K=J/X;B||(B=V,N=G,Y=K),_.annotation().line({top:!0,start:[B,N],end:[V,G],style:{stroke:"#c849ff",lineWidth:1,lineDash:[5,5]}}),_.annotation().line({top:!0,start:[B,Y],end:[V,K],style:{stroke:"#01376e",lineWidth:1,lineDash:[8,5]}}),B=V,N=G,Y=K}_.annotation().line({top:!0,start:[B,Y],end:[B,Y],style:{stroke:"",lineWidth:1,lineDash:[8,5]},text:{position:"end",style:{fill:"#01376e",fontSize:12,fontWeight:300},content:"".concat(t.$t("income.weighted-average-line"),"\n").concat(Y.toFixed(2)),offsetX:-20,offsetY:-5}});var Q=864e5,R=[];for(var Z in D){var tt=(Date.parse(Z)-Date.parse(S))/Q;R.push({datum:tt,value:parseFloat(D[Z])})}var et=(new h).source(R);et.transform({type:"regression",method:"polynomial",fields:["datum","value"],bandwidth:30,as:["datum","value"]});var nt=et.rows.map((function(t){return{date:Object(r.dateFormat)(new Date(Date.parse(Object(r.dateFormat)(new Date(S)))+t.datum*Q)),value:t.value}}));for(var ot in nt){var it=nt[ot],at=0===parseInt(ot)?it:nt[ot-1];_.annotation().line({top:!0,start:[it.date,it.value],end:[at.date,at.value],style:{stroke:"#ffbd49",lineWidth:1,lineDash:[5,3]}})}_.annotation().text({content:"".concat(t.$t("income.prediction-line"),"\n").concat(nt[nt.length-1].value),top:!0,position:[nt[nt.length-1].date,nt[nt.length-1].value],style:{fill:"#ffbd49",fontSize:12,fontWeight:300},offsetY:-5})}return _.render(),_}function w(t,e){var n,o,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],d=arguments.length>4&&void 0!==arguments[4]&&arguments[4],v=t.filter((function(t){return e.includes(t.code)})).sort((function(a,b){return new Date(a.date)-new Date(b.date)})),h=[],f=[],m={},y=c(v);try{for(y.s();!(o=y.n()).done;){var _=o.value;if(!d||!_.equity_awards){var w=_.date,code=_.code;h.includes(code)||h.push(code),f.includes(w)||f.push(w),w in m||(m[w]={});var x,C=c(h);try{for(C.s();!(x=C.n()).done;){var k=x.value;k in m[w]||(m[w][k]={holdings:0,market_price:0,total_cost:0},n&&k in m[n]&&(m[w][k].holdings=m[n][k].holdings,m[w][k].total_cost=m[n][k].total_cost,m[w][k].market_price=m[n][k].market_price))}}catch(t){C.e(t)}finally{C.f()}var A=_.buyin_shares,F=_.buyin_price;!l&&_.equity_awards&&(F=0);var $=r?_.currency_weight:1,z=F*$,S=_.market_price*$;m[w][code].holdings+=A,m[w][code].market_price=S,m[w][code].total_cost+=A*z,n=w}}}catch(t){y.e(t)}finally{y.f()}for(var j={},D=0,E=f;D<E.length;D++){var P=E[D];j[P]={value:0,cost:0};var T,M=c(h);try{for(M.s();!(T=M.n()).done;){var O=T.value;O in m[P]&&(j[P].value+=m[P][O].holdings*m[P][O].market_price,j[P].cost+=m[P][O].total_cost)}}catch(t){M.e(t)}finally{M.f()}}var data=[];for(var I in j)data.push({date:I,value:j[I].value,net:j[I].value-j[I].cost});return data}function x(t,e,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],d=arguments.length>6&&void 0!==arguments[6]&&arguments[6],v=document.getElementById("investment");v.innerHTML="\n<div id='app-container-investment'>\n  <div id='g2-customize-tooltip-investment'></div>\n  <div id='g2-container-investment'></div>\n</div>\n";var h=t.$g2.Chart,f=new h({container:"g2-container-investment",autoFit:!0,height:Object(l.a)("g2-container-investment")}),data=w(e,n,o,c,d);f.data(data);var m=r?"net":"value";f.scale(m,{nice:!0}),f.scale("date",{nice:!0,type:"time"}),f.tooltip({showCrosshairs:!0,shared:!0});var y=r?"white":"#873BF4";return f.area().adjust("stack").position("date*".concat(m)).color(y),f.line().adjust("stack").position("date*".concat(m)).color(y),r&&(f.annotation().regionFilter({top:!0,start:["min","max"],end:["max",0],color:"#f5222d"}),f.annotation().regionFilter({top:!0,start:["min",0],end:["max","min"],color:"#2fc25b"})),f.interaction("element-highlight"),f.axis(m,{label:{formatter:function(t){return parseFloat(t).toFixed(2)}}}),f.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}}),f.render(),f}var C=n(398);function k(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,r=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw r}}}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var F={name:"Balance",data:function(){return{oldChart:{balance:void 0,investment:void 0},investmentNet:!1,chartScope:"currency",showPendingCheck:!1,showAnnotationCheck:!1,disablePending:!1,previousPendingCheckCache:!1,equityAwardsCost:!1,investmentCurrency:!0,hideEquityAwards:!1,selectedStock:[],stocks:[]}},watch:{"$i18n.locale":function(){this.renderAllCharts()},chartScope:function(t){"currency"===t?(this.showPendingCheck=this.previousPendingCheckCache,this.disablePending=!1):"class"===t&&(this.previousPendingCheckCache=this.showPendingCheck,this.showPendingCheck=!0,this.disablePending=!0),this.renderCharts(["balance"])},showPendingCheck:function(){this.renderCharts(["balance"])},showAnnotationCheck:function(){this.renderCharts(["balance"])},investmentNet:function(){this.renderCharts(["investment"])},equityAwardsCost:function(){this.renderCharts(["investment"])},investmentCurrency:function(){this.renderCharts(["investment"])},hideEquityAwards:function(){this.renderCharts(["investment"])},selectedStock:function(){this.renderCharts(["investment"])},stocks:function(){this.renderCharts(["investment"])}},mounted:function(){"jxtxzzw"===this.$route.query.admin&&(this.preprocess(),this.renderAllCharts())},methods:{preprocess:function(){var t,e=k(C.investment);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.stocks.includes(n.code)||this.stocks.push(n.code)}}catch(t){e.e(t)}finally{e.f()}this.selectedStock=Object(o.a)(this.stocks)},renderAllCharts:function(){this.renderCharts(["balance","investment"])},renderCharts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["balance","investment"];t.includes("balance")&&(this.oldChart.balance&&this.oldChart.balance.destroy(),this.oldChart.balance=_(this,C.balance,this.showPendingCheck,this.chartScope)),t.includes("investment")&&(this.oldChart.investment&&this.oldChart.investment.destroy(),this.oldChart.investment=x(this,C.investment,this.selectedStock,this.investmentCurrency,this.investmentNet,this.equityAwardsCost,this.hideEquityAwards)),window.dispatchEvent(new Event("resize"))}}},$=F,z=(n(1498),n(134)),component=Object(z.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["jxtxzzw"===t.$route.query.admin?n("div",[n("Divider",[t._v(t._s(t.$t("balance.balance")))]),t._v(" "),n("Alert",[t._v("\n      "+t._s(t.$t("income.show-original-amount"))+"\n      "),n("i-switch",{attrs:{value:!0,disabled:"",size:"large","true-value":!0,"false-value":!1}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("income.open")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("income.close")))])]),t._v("\n      "+t._s(t.$t("income.show-equivalent-cny"))+"\n      "),n("br"),t._v("\n      "+t._s(t.$t("balance.scope_by_class"))+"\n      "),n("i-switch",{attrs:{size:"large","true-value":"currency","false-value":"class"},model:{value:t.chartScope,callback:function(e){t.chartScope=e},expression:"chartScope"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("income.open")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("income.close")))])]),t._v("\n      "+t._s(t.$t("balance.scope_by_currency"))+"\n      "),n("br"),t._v(" "),n("Checkbox",{attrs:{disabled:t.disablePending},model:{value:t.showPendingCheck,callback:function(e){t.showPendingCheck=e},expression:"showPendingCheck"}},[t._v("\n        "+t._s(t.$t("balance.show-pending"))+"\n      ")]),t._v(" "),n("Checkbox",{model:{value:t.showAnnotationCheck,callback:function(e){t.showAnnotationCheck=e},expression:"showAnnotationCheck"}},[t._v("\n        "+t._s(t.$t("balance.show-annotation"))+"\n      ")])],1),t._v(" "),n("div",{attrs:{id:"balance"}}),t._v(" "),n("Divider",[t._v(t._s(t.$t("balance.investment")))]),t._v(" "),n("Alert",[t._v("\n      "+t._s(t.$t("income.show-original-amount"))+"\n      "),n("i-switch",{attrs:{size:"large",disabled:"","true-value":!0,"false-value":!1},model:{value:t.investmentCurrency,callback:function(e){t.investmentCurrency=e},expression:"investmentCurrency"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("income.open")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("income.close")))])]),t._v("\n      "+t._s(t.$t("income.show-equivalent-cny"))+"\n      "),n("br"),t._v("\n      "+t._s(t.$t("balance.show-actual-investment"))+"\n      "),n("i-switch",{attrs:{size:"large"},model:{value:t.investmentNet,callback:function(e){t.investmentNet=e},expression:"investmentNet"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("income.open")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("income.close")))])]),t._v("\n      "+t._s(t.$t("balance.show-net-investment"))+"\n      "),n("br"),t._v("\n      "+t._s(t.$t("balance.show-all-transactions"))+"\n      "),n("i-switch",{attrs:{size:"large"},model:{value:t.hideEquityAwards,callback:function(e){t.hideEquityAwards=e},expression:"hideEquityAwards"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("income.open")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("income.close")))])]),t._v("\n      "+t._s(t.$t("balance.hide-equity-awards"))+"\n      "),n("br"),t._v(" "),t.investmentNet&&!t.hideEquityAwards?n("span",[t._v("\n        "+t._s(t.$t("balance.equity-awards-as-zero-cost"))+"\n        "),n("i-switch",{attrs:{size:"large"},model:{value:t.equityAwardsCost,callback:function(e){t.equityAwardsCost=e},expression:"equityAwardsCost"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("income.open")))]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("income.close")))])]),t._v("\n        "+t._s(t.$t("balance.equity-awards-as-vest-cost"))+"\n      ")],1):t._e()],1),t._v(" "),n("Alert",{attrs:{type:"info"}},[t._v("\n      "+t._s(t.$t("balance.filter-by-stock"))+"\n      "),n("Select",{staticStyle:{width:"unset"},attrs:{multiple:"",size:"small","max-tag-count":5},model:{value:t.selectedStock,callback:function(e){t.selectedStock=e},expression:"selectedStock"}},t._l(t.stocks,(function(s){return n("Option",{key:s,attrs:{value:s}},[t._v(t._s(s))])})),1)],1),t._v(" "),n("div",{attrs:{id:"investment"}})],1):n("div",[n("Alert",{attrs:{type:"error","show-icon":""}},[t._v("\n      "+t._s(t.$t("error.error"))+"\n      "),n("template",{slot:"desc"},[t._v("\n        "+t._s(t.$t("error.permission"))+"\n      ")])],2)],1)])}),[],!1,null,null,null);e.default=component.exports}}]);