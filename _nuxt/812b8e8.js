(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{1604:function(e,t,r){"use strict";r.r(t);r(109),r(122),r(86),r(103),r(134),r(120),r(121);function n(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,d=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){d=!0,c=e},f:function(){try{l||null==r.return||r.return()}finally{if(d)throw c}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function c(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o={},c=n(e);try{for(c.s();!(t=c.n()).done;){var l=t.value,d=l.year,h=parseFloat(l.amount),v=l.type;d in o||(o[d]={}),v in o[d]||(o[d][v]=r?{}:0);var f=parseFloat(l.currency_weight);if(r){var y=l.currency;y in o[d][v]||(o[d][v][y]={amount:0,weightedAmount:0}),o[d][v][y].amount+=h,o[d][v][y].weightedAmount+=h*f}else o[d][v]+=h*f}}catch(e){c.e(e)}finally{c.f()}var data=[];for(var m in o)for(var w in o[m])if(r)for(var F in o[m][w])data.push({year:m,type:w,currency:F,amount:o[m][w][F].amount,weightedAmount:o[m][w][F].weightedAmount});else data.push({year:m,type:w,amount:o[m][w]});return data}function l(){return.9*(document.body.clientHeight-64-24-24-24-24-24)}function d(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"container",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["#74CBED","#FF6B3B","#247FEA","#F6C022","#AE0025","#7666F9","#9967BD","#E19348","#FF9EC6","#76523B","#585853","#6395F9","#62DAAB"],d=arguments.length>4&&void 0!==arguments[4]&&arguments[4],h=e.$g2.Chart,data=c(t,d),v=new h({container:n,autoFit:!0,height:l()});return v.data(data),v.option("slider",{height:30,trendCfg:{smooth:!0,isArea:!0}}),v.scale(d?"weightedAmount":"amount",{alias:"金额",formatter:function(e){return e=parseFloat(e).toFixed(2)}}),v.axis("year",{tickLine:null}),v.axis(d?"weightedAmount":"amount",{title:{offset:80,style:{fill:"#aaaaaa"}}}),v.tooltip({shared:!1,showMarkers:!0,showTitle:!0}),v.interaction("active-region"),v.interaction("element-highlight-by-color"),v.interaction("legend-highlight"),v.interaction("axis-label-highlight"),r=d?[{type:"dodge",dodgeBy:"currency",marginRatio:0},{type:"stack"}]:"stack",v.interval().adjust(r).position("year*".concat(d?"weightedAmount":"amount")).color("type",o).label("value",(function(){return{position:"middle",offset:0,content:function(e){var t=parseFloat(e.amount).toFixed(2);return d?"".concat(e.currency," ").concat(t):t},style:{stroke:"#fff"}}})),v.render(),v}function h(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o={},c=0,l=n(e);try{for(l.s();!(t=l.n()).done;){var d=t.value,h=d.category,v=parseFloat(d.amount);if(h in o||(o[h]=r?{}:0),!(v<=0)){var f=parseFloat(d.currency_weight);if(r){var y=d.currency;y in o[h]||(o[h][y]={amount:0,weightedAmount:0}),o[h][y].amount+=v,o[h][y].weightedAmount+=v*f}else o[h]+=v*f,c+=v*f}}}catch(e){l.e(e)}finally{l.f()}var data=[];for(var m in o)if(r)for(var w in o[m]){var F=o[m][w].amount,A=o[m][w].weightedAmount;F>0&&data.push({category:m,amount:F,weightedAmount:A,currency:"".concat(m," - ").concat(w)})}else{var C=o[m];C>0&&data.push({category:m,amount:C,percent:C/c})}return data}function v(e,t){var r=e.$g2.Chart,o=e.$dataset.DataView,c=function(e){var t,r={},o=n(e);try{for(o.s();!(t=o.n()).done;){var c=t.value,l=parseFloat(c.amount);void 0!==c.currency_weight&&null!==c.currency_weight&&(l*=parseFloat(c.currency_weight));var d=c.type,h=c.platform;h in r||(r[h]={},r[h].value=0,r[h].children={}),r[h].value+=l,d in r[h].children||(r[h].children[d]=0),r[h].children[d]+=l}}catch(e){o.e(e)}finally{o.f()}var data=[];for(var v in r){var f={name:v,brand:v,value:r[v].value,children:[]};for(var y in r[v].children)f.children.push({name:v+" - "+y,value:r[v].children[y]});data.push(f)}return data.sort((function(a,b){return b.value-a.value})),data}(t);c.forEach((function(td){td.value=0}));var data={name:"root",children:c},d=new o;d.source(data,{type:"hierarchy"}).transform({field:"value",type:"hierarchy.treemap",tile:"treemapResquarify",as:["x","y"]});var h,v=[],f=n(d.getAllNodes());try{for(f.s();!(h=f.n()).done;){var y=h.value;if(!y.children){var m={name:y.data.name,x:y.x,y:y.y,depth:y.depth,value:y.value};!y.data.brand&&y.parent?m.brand=y.parent.data.brand:m.brand=y.data.brand,v.push(m)}}}catch(e){f.e(e)}finally{f.f()}var w=new r({container:"advanced-platform",autoFit:!0,height:l()});return w.coordinate().scale(1,-1),w.data(v),w.axis(!1),w.legend({position:"bottom"}),w.tooltip({showTitle:!1,showMarkers:!1}),w.polygon().position("x*y").color("brand").tooltip("name*value",(function(e,t){return{name:e,value:parseFloat(t).toFixed(2)}})).style({lineWidth:1,stroke:"#fff"}).label("name",{offset:0,style:{textBaseline:"middle",fill:"#000",shadowBlur:10,shadowColor:"#fff"},layout:{type:"limit-in-shape"}}),w.interaction("element-active"),w.render(),w}var f=r(426),y={name:"Income",data:function(){return{currency:!0,oldChart:{incomeChartForYearAndType:void 0,incomeChartForBasicCategory:void 0,advancedIncomeChartForYearAndType:void 0,advancedIncomeChartForAdvancedPlatform:void 0}}},watch:{currency:function(){this.renderAllCharts()}},mounted:function(){this.renderAllCharts()},methods:{renderAllCharts:function(){for(var e in this.oldChart)this.oldChart[e]&&this.oldChart[e].destroy();this.oldChart.incomeChartForYearAndType=d(this,f.income,"basic-year",void 0,this.currency),this.oldChart.incomeChartForBasicCategory=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.$g2.Chart,o=e.$dataset.DataView,data=h(t,r),c=new o;c.source(data).transform({type:"percent",field:r?"weightedAmount":"amount",dimension:"category",as:"percent"});var d=new n({container:"basic-category",autoFit:!0,height:l()});if(d.data(c.rows),d.scale({percent:{formatter:function(e){return parseFloat(100*e).toFixed(2)+"%"}}}),d.coordinate("theta",{radius:.5}),d.legend(!1),d.tooltip({showTitle:!0,showMarkers:!0}),d.interval().adjust("stack").position("percent").color("category").label("percent",{content:function(data){return"".concat(data.category,": ").concat(parseFloat(100*data.percent).toFixed(2),"%")}}),r){var v=d.createView(),f=new o;f.source(data).transform({type:"percent",field:r?"weightedAmount":"amount",dimension:"currency",as:"percent"}),v.data(f.rows),v.scale({percent:{formatter:function(e){return parseFloat(100*e).toFixed(2)+"%"}}}),v.coordinate("theta",{innerRadius:.5/.75,radius:.75}),v.interval().adjust("stack").position("percent").color("currency",["#BAE7FF","#7FC9FE","#71E3E3","#ABF5F5","#8EE0A1","#BAF5C4"]).label("currency").tooltip("currency*percent",(function(e,t){return{name:e,value:t=(100*t).toFixed(2)+"%"}})).style({lineWidth:1,stroke:"#fff"})}return d.interaction("element-active"),d.render(),d}(this,f.income,this.currency),this.oldChart.advancedIncomeChartForYearAndType=d(this,f.advancedIncome,"advanced-year",void 0,this.currency),this.oldChart.advancedIncomeChartForAdvancedPlatform=v(this,f.advancedIncome),window.dispatchEvent(new Event("resize"))}}},m=y,w=r(147),component=Object(w.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Alert",{attrs:{type:"info"}},[e._v("\n    "+e._s(e.$t("income.currency"))+"\n    "),r("i-switch",{attrs:{size:"large","true-value":!0,"false-value":!1},model:{value:e.currency,callback:function(t){e.currency=t},expression:"currency"}},[r("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("income.open")))]),e._v(" "),r("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("income.close")))])])],1),e._v(" "),r("Divider",[e._v(e._s(e.$t("income.basic-year")))]),e._v(" "),r("div",{attrs:{id:"basic-year"}}),e._v(" "),r("Divider",[e._v(e._s(e.$t("income.basic-category")))]),e._v(" "),r("div",{attrs:{id:"basic-category"}}),e._v(" "),r("Divider",[e._v(e._s(e.$t("income.advanced-year")))]),e._v(" "),r("div",{attrs:{id:"advanced-year"}}),e._v(" "),r("Divider",[e._v(e._s(e.$t("income.advanced-platform")))]),e._v(" "),r("div",{attrs:{id:"advanced-platform"}})],1)}),[],!1,null,null,null);t.default=component.exports}}]);